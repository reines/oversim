<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OverSim: BaseRpc.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="dir_668dee661430860db5868c2621a9c372.html">src</a>      </li>
      <li><a class="el" href="dir_c6e45067cd9ed30d67160903d22a8d0a.html">common</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>BaseRpc.h</h1>  </div>
</div>
<div class="contents">
<a href="BaseRpc_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// Copyright (C) 2006 Institut fuer Telematik, Universitaet Karlsruhe (TH)</span>
<a name="l00002"></a>00002 <span class="comment">//</span>
<a name="l00003"></a>00003 <span class="comment">// This program is free software; you can redistribute it and/or</span>
<a name="l00004"></a>00004 <span class="comment">// modify it under the terms of the GNU General Public License</span>
<a name="l00005"></a>00005 <span class="comment">// as published by the Free Software Foundation; either version 2</span>
<a name="l00006"></a>00006 <span class="comment">// of the License, or (at your option) any later version.</span>
<a name="l00007"></a>00007 <span class="comment">//</span>
<a name="l00008"></a>00008 <span class="comment">// This program is distributed in the hope that it will be useful,</span>
<a name="l00009"></a>00009 <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00010"></a>00010 <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00011"></a>00011 <span class="comment">// GNU General Public License for more details.</span>
<a name="l00012"></a>00012 <span class="comment">//</span>
<a name="l00013"></a>00013 <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l00014"></a>00014 <span class="comment">// along with this program; if not, write to the Free Software</span>
<a name="l00015"></a>00015 <span class="comment">// Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.</span>
<a name="l00016"></a>00016 <span class="comment">//</span>
<a name="l00017"></a>00017 
<a name="l00026"></a>00026 <span class="preprocessor">#ifndef __BASERPC_H_</span>
<a name="l00027"></a>00027 <span class="preprocessor"></span><span class="preprocessor">#define __BASERPC_H_</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="oversim__mapset_8h.html">oversim_mapset.h</a>&gt;</span>
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;omnetpp.h&gt;</span>
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;<a class="code" href="RpcState_8h.html">RpcState.h</a>&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;<a class="code" href="RpcListener_8h.html">RpcListener.h</a>&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;<a class="code" href="RpcMacros_8h.html" title="This file declares some macros for RPC implementation.">RpcMacros.h</a>&gt;</span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;<a class="code" href="ProxNodeHandle_8h.html">ProxNodeHandle.h</a>&gt;</span>
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <span class="keyword">class </span><a class="code" href="classUnderlayConfigurator.html" title="Base class for configurators of different underlay models.">UnderlayConfigurator</a>;
<a name="l00040"></a>00040 <span class="keyword">class </span><a class="code" href="classGlobalStatistics.html" title="Module to record global statistics.">GlobalStatistics</a>;
<a name="l00041"></a>00041 <span class="keyword">class </span><a class="code" href="classGlobalParameters.html" title="Modul for storing global simulation parameters.">GlobalParameters</a>;
<a name="l00042"></a>00042 <span class="keyword">class </span><a class="code" href="classNeighborCache.html">NeighborCache</a>;
<a name="l00043"></a>00043 <span class="keyword">class </span><a class="code" href="classCryptoModule.html" title="The CryptoModule contains several method needed for message authentication.">CryptoModule</a>;
<a name="l00044"></a>00044 <span class="keyword">class </span>WaitingContexts;
<a name="l00045"></a>00045 <span class="keyword">class </span><a class="code" href="classBaseOverlay.html" title="Base class for overlays.">BaseOverlay</a>;
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="keyword">class </span><a class="code" href="classProxListener.html">ProxListener</a>;
<a name="l00048"></a>00048 
<a name="l00059"></a><a class="code" href="classBaseRpc.html">00059</a> <span class="keyword">class </span><a class="code" href="classBaseRpc.html" title="Base class for RPCs.">BaseRpc</a> : <span class="keyword">public</span> <a class="code" href="classRpcListener.html" title="A Remote-Procedure-Call listener class.">RpcListener</a>,
<a name="l00060"></a>00060                 <span class="keyword">public</span> cSimpleModule
<a name="l00061"></a>00061 {
<a name="l00062"></a>00062 <span class="keyword">public</span>:
<a name="l00063"></a>00063 
<a name="l00064"></a>00064     <a class="code" href="classBaseRpc.html#a93a93b4bf743699f18284a8069813b23">BaseRpc</a>();
<a name="l00065"></a>00065 
<a name="l00071"></a><a class="code" href="classBaseRpc.html#ac3f420630d5618e81709c078b06fd9da">00071</a>     <span class="keyword">const</span> <a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a>&amp; <a class="code" href="classBaseRpc.html#ac3f420630d5618e81709c078b06fd9da" title="Returns the NodeHandle of this node.">getThisNode</a>() { <span class="keywordflow">return</span> <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>; };
<a name="l00072"></a>00072 
<a name="l00073"></a><a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8">00073</a>     simtime_t <a class="code" href="classBaseRpc.html#a83a09d0c12d158ef2e10cc8bf256f254">getUdpTimeout</a>() { <span class="keywordflow">return</span> <a class="code" href="classBaseRpc.html#af7f8a9d32155e067464ca8e9c716b74e">rpcUdpTimeout</a>; };
<a name="l00074"></a>00074 
<a name="l00075"></a>00075 <span class="keyword">protected</span>:
<a name="l00076"></a>00076 
<a name="l00077"></a>00077     <span class="comment">// overlay identity</span>
<a name="l00078"></a>00078     <a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a> <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>;   
<a name="l00080"></a><a class="code" href="classBaseRpc.html#a9a633ad17071241f981fb76a9678337a">00080</a>     <a class="code" href="classBaseOverlay.html" title="Base class for overlays.">BaseOverlay</a>* <a class="code" href="classBaseRpc.html#a9a633ad17071241f981fb76a9678337a">overlay</a>;
<a name="l00081"></a>00081 
<a name="l00082"></a>00082     <span class="comment">// overlay common parameters</span>
<a name="l00083"></a><a class="code" href="classBaseRpc.html#aff648eca9051b1f37ea42335b021d672">00083</a>     <span class="keywordtype">bool</span> <a class="code" href="classBaseRpc.html#aff648eca9051b1f37ea42335b021d672" title="debug output ?">debugOutput</a>;           
<a name="l00085"></a>00085     <span class="comment">// references to global modules</span>
<a name="l00086"></a><a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d">00086</a>     <a class="code" href="classGlobalStatistics.html" title="Module to record global statistics.">GlobalStatistics</a>* <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>;  
<a name="l00097"></a>00097     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classBaseRpc.html#a45b60cfeaa59a7efafeb5bcbb56f50a5" title="Handles internal rpc requests.">internalHandleRpcCall</a>(<a class="code" href="classBaseCallMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseCallMessage</a>* msg);
<a name="l00098"></a>00098 
<a name="l00112"></a>00112     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseRpc.html#ad25a2ad1fb68d2da5d1fab8b577592a4" title="Handles rpc responses internal in base classes ">internalHandleRpcResponse</a>(<a class="code" href="classBaseResponseMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseResponseMessage</a>* msg,
<a name="l00113"></a>00113                                            cPolymorphic* context, <span class="keywordtype">int</span> rpcId,
<a name="l00114"></a>00114                                            simtime_t rtt);
<a name="l00115"></a>00115 
<a name="l00132"></a>00132     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseRpc.html#ae4b1dfdb39322697542e02d3be48a848" title="Handles rpc timeouts internal in base classes ">internalHandleRpcTimeout</a>(<a class="code" href="classBaseCallMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseCallMessage</a>* msg,
<a name="l00133"></a>00133                                           <span class="keyword">const</span> <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a>&amp; dest,
<a name="l00134"></a>00134                                           cPolymorphic* context,
<a name="l00135"></a>00135                                           <span class="keywordtype">int</span> rpcId, <span class="keyword">const</span> <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a>&amp; destKey);
<a name="l00139"></a>00139     <span class="keywordtype">void</span> <a class="code" href="classBaseRpc.html#a270e68f0d93dfcf9c5f26dbafd0fba54" title="Initializes Remote-Procedure state.">initRpcs</a>();
<a name="l00140"></a>00140 
<a name="l00144"></a>00144     <span class="keywordtype">void</span> <a class="code" href="classBaseRpc.html#a02b90067d0a0b630baca5808d7f82b5a" title="Deinitializes Remote-Procedure state.">finishRpcs</a>();
<a name="l00145"></a>00145 
<a name="l00152"></a>00152     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseRpc.html#a26c06fa9558c497e6dfe1ba6c5153042" title="Handles incoming rpc messages and delegates them to the corresponding listeners or handlers...">internalHandleRpcMessage</a>(<a class="code" href="classBaseRpcMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseRpcMessage</a>* msg);
<a name="l00153"></a>00153 
<a name="l00178"></a><a class="code" href="classBaseRpc.html#a816918e82652f724c291923e018eabe2">00178</a>     <span class="keyword">inline</span> uint32_t <a class="code" href="classBaseRpc.html#a816918e82652f724c291923e018eabe2" title="Routes a Remote-Procedure-Call message to an OverlayKey.">sendRouteRpcCall</a>(<a class="code" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e" title="Enum generated from common/CommonMessages.msg by opp_msgc.">CompType</a> destComp,
<a name="l00179"></a>00179                                      <span class="keyword">const</span> <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a>&amp; dest,
<a name="l00180"></a>00180                                      <span class="keyword">const</span> <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a>&amp; destKey,
<a name="l00181"></a>00181                                      <a class="code" href="classBaseCallMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseCallMessage</a>* msg,
<a name="l00182"></a>00182                                      cPolymorphic* context = NULL,
<a name="l00183"></a>00183                                      <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551" title="Enum generated from common/CommonMessages.msg by opp_msgc.">RoutingType</a> routingType = <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551a931137cd67090e50ef2ea3ccfb9e8d90">DEFAULT_ROUTING</a>,
<a name="l00184"></a>00184                                      simtime_t timeout = -1,
<a name="l00185"></a>00185                                      <span class="keywordtype">int</span> retries = 0,
<a name="l00186"></a>00186                                      <span class="keywordtype">int</span> rpcId = -1,
<a name="l00187"></a>00187                                      <a class="code" href="classRpcListener.html" title="A Remote-Procedure-Call listener class.">RpcListener</a>* rpcListener = NULL)
<a name="l00188"></a>00188     {
<a name="l00189"></a>00189         <span class="keywordflow">if</span> (dest.<a class="code" href="classTransportAddress.html#a026e777c423ff2a0280edd2fa5472e74" title="indicates if TransportAddress is specified">isUnspecified</a>() &amp;&amp; destKey.<a class="code" href="classOverlayKey.html#abe357a4d1babcf7d30598a61cbc0f5c2" title="Returns true, if the key is unspecified.">isUnspecified</a>())
<a name="l00190"></a>00190             opp_error(<span class="stringliteral">&quot;BaseRpc::sendRouteRpcCall() with both key and &quot;</span>
<a name="l00191"></a>00191                       <span class="stringliteral">&quot;transportAddress unspecified!&quot;</span>);
<a name="l00192"></a>00192         <span class="keywordflow">return</span> <a class="code" href="classBaseRpc.html#abf8bd682bf17131b4bc58708b2e7ced2" title="Sends a Remote-Procedure-Call message to the underlay.">sendRpcCall</a>(<a class="code" href="CommonMessages__m_8h.html#aca1e72535e7f260e54ed8bbf984dade9a03dcc78e081682d383ff0baec54dcf8c">ROUTE_TRANSPORT</a>, destComp, dest, destKey, msg,
<a name="l00193"></a>00193                            context, routingType, timeout, retries,
<a name="l00194"></a>00194                            rpcId, rpcListener);
<a name="l00195"></a>00195     }
<a name="l00196"></a>00196 
<a name="l00219"></a><a class="code" href="classBaseRpc.html#abfb0486832f6f42f6b4e35059bae5d21">00219</a>     <span class="keyword">inline</span> uint32_t <a class="code" href="classBaseRpc.html#a816918e82652f724c291923e018eabe2" title="Routes a Remote-Procedure-Call message to an OverlayKey.">sendRouteRpcCall</a>(<a class="code" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e" title="Enum generated from common/CommonMessages.msg by opp_msgc.">CompType</a> destComp,
<a name="l00220"></a>00220                                      <span class="keyword">const</span> <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a>&amp; destKey,
<a name="l00221"></a>00221                                      <a class="code" href="classBaseCallMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseCallMessage</a>* msg,
<a name="l00222"></a>00222                                      cPolymorphic* context = NULL,
<a name="l00223"></a>00223                                      <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551" title="Enum generated from common/CommonMessages.msg by opp_msgc.">RoutingType</a> routingType = <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551a931137cd67090e50ef2ea3ccfb9e8d90">DEFAULT_ROUTING</a>,
<a name="l00224"></a>00224                                      simtime_t timeout = -1,
<a name="l00225"></a>00225                                      <span class="keywordtype">int</span> retries = 0,
<a name="l00226"></a>00226                                      <span class="keywordtype">int</span> rpcId = -1,
<a name="l00227"></a>00227                                      <a class="code" href="classRpcListener.html" title="A Remote-Procedure-Call listener class.">RpcListener</a>* rpcListener = NULL)
<a name="l00228"></a>00228     {
<a name="l00229"></a>00229         <span class="keywordflow">return</span> <a class="code" href="classBaseRpc.html#abf8bd682bf17131b4bc58708b2e7ced2" title="Sends a Remote-Procedure-Call message to the underlay.">sendRpcCall</a>(<a class="code" href="CommonMessages__m_8h.html#aca1e72535e7f260e54ed8bbf984dade9a03dcc78e081682d383ff0baec54dcf8c">ROUTE_TRANSPORT</a>, destComp,
<a name="l00230"></a>00230                            <a class="code" href="classTransportAddress.html#ac1709545db722cbbce1367034142d31f" title="TransportAddress without specified ip and port.">TransportAddress::UNSPECIFIED_NODE</a>,
<a name="l00231"></a>00231                            destKey, msg, context, routingType, timeout,
<a name="l00232"></a>00232                            retries, rpcId, rpcListener);
<a name="l00233"></a>00233     }
<a name="l00234"></a>00234 
<a name="l00258"></a><a class="code" href="classBaseRpc.html#a6da40906ead3bb7faa0782f47385435e">00258</a>     <span class="keyword">inline</span> uint32_t <a class="code" href="classBaseRpc.html#a816918e82652f724c291923e018eabe2" title="Routes a Remote-Procedure-Call message to an OverlayKey.">sendRouteRpcCall</a>(<a class="code" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e" title="Enum generated from common/CommonMessages.msg by opp_msgc.">CompType</a> destComp,
<a name="l00259"></a>00259                                      <span class="keyword">const</span> <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a>&amp; dest,
<a name="l00260"></a>00260                                      <a class="code" href="classBaseCallMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseCallMessage</a>* msg,
<a name="l00261"></a>00261                                      cPolymorphic* context = NULL,
<a name="l00262"></a>00262                                      <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551" title="Enum generated from common/CommonMessages.msg by opp_msgc.">RoutingType</a> routingType = <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551a931137cd67090e50ef2ea3ccfb9e8d90">DEFAULT_ROUTING</a>,
<a name="l00263"></a>00263                                      simtime_t timeout = -1,
<a name="l00264"></a>00264                                      <span class="keywordtype">int</span> retries = 0,
<a name="l00265"></a>00265                                      <span class="keywordtype">int</span> rpcId = -1,
<a name="l00266"></a>00266                                      <a class="code" href="classRpcListener.html" title="A Remote-Procedure-Call listener class.">RpcListener</a>* rpcListener = NULL)
<a name="l00267"></a>00267     {
<a name="l00268"></a>00268         <span class="keywordflow">return</span> <a class="code" href="classBaseRpc.html#abf8bd682bf17131b4bc58708b2e7ced2" title="Sends a Remote-Procedure-Call message to the underlay.">sendRpcCall</a>(<a class="code" href="CommonMessages__m_8h.html#aca1e72535e7f260e54ed8bbf984dade9a03dcc78e081682d383ff0baec54dcf8c">ROUTE_TRANSPORT</a>, destComp, dest,
<a name="l00269"></a>00269                            <a class="code" href="classOverlayKey.html#ac0d4135dff2985e3582fdbed2a37eb75" title="OverlayKey without defined key.">OverlayKey::UNSPECIFIED_KEY</a>, msg, context,
<a name="l00270"></a>00270                            routingType, timeout, retries, rpcId, rpcListener);
<a name="l00271"></a>00271     }
<a name="l00272"></a>00272 
<a name="l00293"></a><a class="code" href="classBaseRpc.html#ac128e0ff0d09f81b652f7d3e00ce9441">00293</a>     <span class="keyword">inline</span> uint32_t <a class="code" href="classBaseRpc.html#ac128e0ff0d09f81b652f7d3e00ce9441" title="Sends a Remote-Procedure-Call message to the underlay ">sendUdpRpcCall</a>(<span class="keyword">const</span> <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a>&amp; dest,
<a name="l00294"></a>00294                                    <a class="code" href="classBaseCallMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseCallMessage</a>* msg,
<a name="l00295"></a>00295                                    cPolymorphic* context = NULL,
<a name="l00296"></a>00296                                    simtime_t timeout = -1,
<a name="l00297"></a>00297                                    <span class="keywordtype">int</span> retries = 0, <span class="keywordtype">int</span> rpcId = -1,
<a name="l00298"></a>00298                                    <a class="code" href="classRpcListener.html" title="A Remote-Procedure-Call listener class.">RpcListener</a>* rpcListener = NULL)
<a name="l00299"></a>00299     {
<a name="l00300"></a>00300         <span class="keywordflow">return</span> <a class="code" href="classBaseRpc.html#abf8bd682bf17131b4bc58708b2e7ced2" title="Sends a Remote-Procedure-Call message to the underlay.">sendRpcCall</a>(<a class="code" href="CommonMessages__m_8h.html#aca1e72535e7f260e54ed8bbf984dade9a01580b2e886cd821bd7f3f2bcd7c690c">UDP_TRANSPORT</a>, <a class="code" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5eaf3e64c2733321fd2c525766733a4b7c0">INVALID_COMP</a>, dest,
<a name="l00301"></a>00301                            <a class="code" href="classOverlayKey.html#ac0d4135dff2985e3582fdbed2a37eb75" title="OverlayKey without defined key.">OverlayKey::UNSPECIFIED_KEY</a>, msg, context,
<a name="l00302"></a>00302                            <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551aec961f27dcdb3050f97033fbd88b89b3">NO_OVERLAY_ROUTING</a>, timeout, retries, rpcId,
<a name="l00303"></a>00303                            rpcListener);
<a name="l00304"></a>00304     }
<a name="l00305"></a>00305 
<a name="l00326"></a><a class="code" href="classBaseRpc.html#a0dea7eed103c0e97176576d6642f7bfa">00326</a>     <span class="keyword">inline</span> uint32_t <a class="code" href="classBaseRpc.html#a0dea7eed103c0e97176576d6642f7bfa" title="Sends an internal Remote-Procedure-Call between two tiers ">sendInternalRpcCall</a>(<a class="code" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e" title="Enum generated from common/CommonMessages.msg by opp_msgc.">CompType</a> destComp,
<a name="l00327"></a>00327                                         <a class="code" href="classBaseCallMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseCallMessage</a>* msg,
<a name="l00328"></a>00328                                         cPolymorphic* context = NULL,
<a name="l00329"></a>00329                                         simtime_t timeout = -1,
<a name="l00330"></a>00330                                         <span class="keywordtype">int</span> retries = 0,
<a name="l00331"></a>00331                                         <span class="keywordtype">int</span> rpcId = -1,
<a name="l00332"></a>00332                                         <a class="code" href="classRpcListener.html" title="A Remote-Procedure-Call listener class.">RpcListener</a>* rpcListener = NULL)
<a name="l00333"></a>00333     {
<a name="l00334"></a>00334         <span class="keywordflow">return</span> <a class="code" href="classBaseRpc.html#abf8bd682bf17131b4bc58708b2e7ced2" title="Sends a Remote-Procedure-Call message to the underlay.">sendRpcCall</a>(<a class="code" href="CommonMessages__m_8h.html#aca1e72535e7f260e54ed8bbf984dade9a94f99d3e9b3318d2fc69d80e3c33008b">INTERNAL_TRANSPORT</a>, destComp,
<a name="l00335"></a>00335                            <a class="code" href="classTransportAddress.html#ac1709545db722cbbce1367034142d31f" title="TransportAddress without specified ip and port.">TransportAddress::UNSPECIFIED_NODE</a>,
<a name="l00336"></a>00336                            <a class="code" href="classOverlayKey.html#ac0d4135dff2985e3582fdbed2a37eb75" title="OverlayKey without defined key.">OverlayKey::UNSPECIFIED_KEY</a>, msg, context,
<a name="l00337"></a>00337                            <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551aec961f27dcdb3050f97033fbd88b89b3">NO_OVERLAY_ROUTING</a>, timeout, retries, rpcId,
<a name="l00338"></a>00338                            rpcListener);
<a name="l00339"></a>00339     }
<a name="l00340"></a>00340 
<a name="l00346"></a>00346     <span class="keywordtype">void</span> <a class="code" href="classBaseRpc.html#aea89bf4704b3859432879853c27fa3e3" title="Cancels a Remote-Procedure-Call.">cancelRpcMessage</a>(uint32_t nonce);
<a name="l00347"></a>00347 
<a name="l00351"></a>00351     <span class="keywordtype">void</span> <a class="code" href="classBaseRpc.html#a77fe0a21bb12ab2fb8e27eb719b2d2fe" title="Cancels all RPCs.">cancelAllRpcs</a>();
<a name="l00352"></a>00352 
<a name="l00365"></a>00365     <span class="keywordtype">void</span> <a class="code" href="classBaseRpc.html#adc06091d348c98a5efbf54fe0afe8747" title="Send Remote-Procedure response message and deletes call message.">sendRpcResponse</a>(<a class="code" href="CommonMessages__m_8h.html#aca1e72535e7f260e54ed8bbf984dade9" title="Enum generated from common/CommonMessages.msg by opp_msgc.">TransportType</a> transportType,
<a name="l00366"></a>00366                          <a class="code" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e" title="Enum generated from common/CommonMessages.msg by opp_msgc.">CompType</a> destComp,
<a name="l00367"></a>00367                          <span class="keyword">const</span> <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a> &amp;dest,
<a name="l00368"></a>00368                          <span class="keyword">const</span> <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a> &amp;destKey,
<a name="l00369"></a>00369                          <a class="code" href="classBaseCallMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseCallMessage</a>* call,
<a name="l00370"></a>00370                          <a class="code" href="classBaseResponseMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseResponseMessage</a>* response);
<a name="l00371"></a>00371 
<a name="l00379"></a>00379     <span class="keywordtype">void</span> <a class="code" href="classBaseRpc.html#adc06091d348c98a5efbf54fe0afe8747" title="Send Remote-Procedure response message and deletes call message.">sendRpcResponse</a>(<a class="code" href="classBaseCallMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseCallMessage</a>* call,
<a name="l00380"></a>00380                          <a class="code" href="classBaseResponseMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseResponseMessage</a>* response);
<a name="l00381"></a>00381 
<a name="l00398"></a>00398     <span class="keywordtype">int</span> <a class="code" href="classBaseRpc.html#a421904b1b501580efed12e6490d3324a" title="ping a node by its TransportAddress">pingNode</a>(<span class="keyword">const</span> <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a>&amp; dest,
<a name="l00399"></a>00399                   simtime_t timeout = -1,
<a name="l00400"></a>00400                   <span class="keywordtype">int</span> retries = 0,
<a name="l00401"></a>00401                   cPolymorphic* context = NULL,
<a name="l00402"></a>00402                   <span class="keyword">const</span> <span class="keywordtype">char</span>* caption = <span class="stringliteral">&quot;PING&quot;</span>,
<a name="l00403"></a>00403                   <a class="code" href="classRpcListener.html" title="A Remote-Procedure-Call listener class.">RpcListener</a>* rpcListener = NULL,
<a name="l00404"></a>00404                   <span class="keywordtype">int</span> rpcId = -1,
<a name="l00405"></a>00405                   <a class="code" href="CommonMessages__m_8h.html#aca1e72535e7f260e54ed8bbf984dade9" title="Enum generated from common/CommonMessages.msg by opp_msgc.">TransportType</a> transportType = <a class="code" href="CommonMessages__m_8h.html#aca1e72535e7f260e54ed8bbf984dade9a63a9afad251f3398062f584d1b23ecb4">INVALID_TRANSPORT</a>);
<a name="l00406"></a>00406 
<a name="l00415"></a>00415     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classBaseRpc.html#a20e77c3e0c203762a5b582ffebe3ba4b" title="Processes Remote-Procedure-Call invocation messages.">handleRpcCall</a>(<a class="code" href="classBaseCallMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseCallMessage</a>* msg);
<a name="l00416"></a>00416 
<a name="l00425"></a>00425     <span class="keyword">virtual</span> <a class="code" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e" title="Enum generated from common/CommonMessages.msg by opp_msgc.">CompType</a> <a class="code" href="classBaseRpc.html#aa76a787b8fbbc33de93646edc67f0e23" title="Return the component type of this module.">getThisCompType</a>() = 0;
<a name="l00426"></a>00426 
<a name="l00427"></a><a class="code" href="classBaseRpc.html#a3edfa69071548f98e78b8669f564953a">00427</a>     <a class="code" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e" title="Enum generated from common/CommonMessages.msg by opp_msgc.">CompType</a> <a class="code" href="classBaseRpc.html#a3edfa69071548f98e78b8669f564953a">thisCompType</a>;
<a name="l00428"></a>00428 
<a name="l00429"></a><a class="code" href="classBaseRpc.html#a077c2bcf388c793d456b53ba6c1d16c0">00429</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseRpc.html#a077c2bcf388c793d456b53ba6c1d16c0">sendMessageToUDP</a>(<span class="keyword">const</span> <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a>&amp; addr,
<a name="l00430"></a>00430                                   cPacket* message)
<a name="l00431"></a>00431     {
<a name="l00432"></a>00432         <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;sendMessageToUDP() not implemented&quot;</span>);
<a name="l00433"></a>00433     }
<a name="l00434"></a>00434 
<a name="l00435"></a>00435     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseRpc.html#afdf8ba10dc92ed3d351c8a7472c2093e">pingResponse</a>(<a class="code" href="classPingResponse.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">PingResponse</a>* <a class="code" href="classBaseRpc.html#afdf8ba10dc92ed3d351c8a7472c2093e">pingResponse</a>,
<a name="l00436"></a>00436                               cPolymorphic* context, <span class="keywordtype">int</span> rpcId,
<a name="l00437"></a>00437                               simtime_t rtt);
<a name="l00438"></a>00438 
<a name="l00439"></a>00439     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseRpc.html#afd90e156e9aa1dff7e4e99f50b2c9b51">pingTimeout</a>(<a class="code" href="classPingCall.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">PingCall</a>* pingCall,
<a name="l00440"></a>00440                              <span class="keyword">const</span> <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a>&amp; dest,
<a name="l00441"></a>00441                              cPolymorphic* context,
<a name="l00442"></a>00442                              <span class="keywordtype">int</span> rpcId);
<a name="l00443"></a>00443 
<a name="l00444"></a><a class="code" href="classBaseRpc.html#ad80237130dc2316d0d76ac6757c50f4f">00444</a>     <a class="code" href="classNeighborCache.html">NeighborCache</a> *<a class="code" href="classBaseRpc.html#ad80237130dc2316d0d76ac6757c50f4f" title="pointer to the neighbor cache">neighborCache</a>; 
<a name="l00445"></a><a class="code" href="classBaseRpc.html#a394dcba6b6307c746927bf74fbea33a5">00445</a>     <a class="code" href="classCryptoModule.html" title="The CryptoModule contains several method needed for message authentication.">CryptoModule</a> *<a class="code" href="classBaseRpc.html#a394dcba6b6307c746927bf74fbea33a5" title="pointer to CryptoModule">cryptoModule</a>; 
<a name="l00447"></a><a class="code" href="classBaseRpc.html#a16d5d34610391c442e9f9cde71b2518a">00447</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseRpc.html#a16d5d34610391c442e9f9cde71b2518a">numPingSent</a>;
<a name="l00448"></a><a class="code" href="classBaseRpc.html#a5653805d9dcb9a53bc240b388e735389">00448</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseRpc.html#a5653805d9dcb9a53bc240b388e735389">bytesPingSent</a>;
<a name="l00449"></a><a class="code" href="classBaseRpc.html#a5f194baa9787f523bdbf6f8639356a62">00449</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseRpc.html#a5f194baa9787f523bdbf6f8639356a62">numPingResponseSent</a>;
<a name="l00450"></a><a class="code" href="classBaseRpc.html#a8525bc500487a2641a2a947b0d5e1946">00450</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseRpc.html#a8525bc500487a2641a2a947b0d5e1946">bytesPingResponseSent</a>;
<a name="l00451"></a>00451 
<a name="l00452"></a>00452     <span class="keywordtype">bool</span> <a class="code" href="classBaseRpc.html#ad68b7208473ba1301deb59d51f0bba6c">internalHandleMessage</a>(cMessage* msg);
<a name="l00453"></a>00453 
<a name="l00454"></a>00454 
<a name="l00455"></a>00455 <span class="keyword">private</span>:
<a name="l00456"></a>00456 
<a name="l00457"></a>00457     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseRpc.html#ab893c156412e38caa62fe058b229899b">handleTimerEvent</a>(cMessage* msg);
<a name="l00458"></a>00458 
<a name="l00487"></a>00487     uint32_t <a class="code" href="classBaseRpc.html#abf8bd682bf17131b4bc58708b2e7ced2" title="Sends a Remote-Procedure-Call message to the underlay.">sendRpcCall</a>(<a class="code" href="CommonMessages__m_8h.html#aca1e72535e7f260e54ed8bbf984dade9" title="Enum generated from common/CommonMessages.msg by opp_msgc.">TransportType</a> transportType,
<a name="l00488"></a>00488                          <a class="code" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e" title="Enum generated from common/CommonMessages.msg by opp_msgc.">CompType</a> destComp,
<a name="l00489"></a>00489                          <span class="keyword">const</span> <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a>&amp; dest,
<a name="l00490"></a>00490                          <span class="keyword">const</span> <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a>&amp; destKey,
<a name="l00491"></a>00491                          <a class="code" href="classBaseCallMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseCallMessage</a>* msg,
<a name="l00492"></a>00492                          cPolymorphic* context,
<a name="l00493"></a>00493                          <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551" title="Enum generated from common/CommonMessages.msg by opp_msgc.">RoutingType</a> routingType,
<a name="l00494"></a>00494                          simtime_t timeout, <span class="keywordtype">int</span> retries,
<a name="l00495"></a>00495                          <span class="keywordtype">int</span> rpcId, <a class="code" href="classRpcListener.html" title="A Remote-Procedure-Call listener class.">RpcListener</a>* rpcListener);
<a name="l00496"></a>00496 
<a name="l00497"></a>00497     <span class="keywordtype">void</span> <a class="code" href="classBaseRpc.html#adb13716a0ebdfa359f7498f6ba1b8508">sendRpcMessageWithTransport</a>(<a class="code" href="CommonMessages__m_8h.html#aca1e72535e7f260e54ed8bbf984dade9" title="Enum generated from common/CommonMessages.msg by opp_msgc.">TransportType</a> transportType,
<a name="l00498"></a>00498                                      <a class="code" href="CommonMessages__m_8h.html#aad57ef0110fe8675eb299d467148bc5e" title="Enum generated from common/CommonMessages.msg by opp_msgc.">CompType</a> destComp,
<a name="l00499"></a>00499                                      <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551" title="Enum generated from common/CommonMessages.msg by opp_msgc.">RoutingType</a> routingType,
<a name="l00500"></a>00500                                      <span class="keyword">const</span> std::vector&lt;TransportAddress&gt;&amp; sourceRoute,
<a name="l00501"></a>00501                                      <span class="keyword">const</span> <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a>&amp; destKey,
<a name="l00502"></a>00502                                      <a class="code" href="classBaseRpcMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseRpcMessage</a>* message);
<a name="l00503"></a>00503 
<a name="l00504"></a>00504     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseRpc.html#a2c7d2b7bc0e2b9eef6481c654d57d877">internalSendRouteRpc</a>(<a class="code" href="classBaseRpcMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseRpcMessage</a>* message,
<a name="l00505"></a>00505                                       <span class="keyword">const</span> <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a>&amp; destKey,
<a name="l00506"></a>00506                                       <span class="keyword">const</span> std::vector&lt;TransportAddress&gt;&amp;
<a name="l00507"></a>00507                                       sourceRoute,
<a name="l00508"></a>00508                                       <a class="code" href="CommonMessages__m_8h.html#a5bbe67ba1134d38bbb89c7c242ba6551" title="Enum generated from common/CommonMessages.msg by opp_msgc.">RoutingType</a> routingType) = 0;
<a name="l00509"></a>00509 
<a name="l00510"></a>00510     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseRpc.html#a8e96c8787fba93dc24c673507152cff3">internalSendRpcResponse</a>(<a class="code" href="classBaseCallMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseCallMessage</a>* call,
<a name="l00511"></a>00511                                          <a class="code" href="classBaseResponseMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseResponseMessage</a>* response) = 0;
<a name="l00512"></a>00512 
<a name="l00513"></a>00513     <span class="keywordtype">void</span> <a class="code" href="classBaseRpc.html#aa398208e1cab8ddbb8df60b73af58597">pingRpcCall</a>(<a class="code" href="classPingCall.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">PingCall</a>* call);
<a name="l00514"></a>00514     <span class="keywordtype">void</span> <a class="code" href="classBaseRpc.html#a2042b62345b9f494d01b55ab946eaf48">pingRpcResponse</a>(<a class="code" href="classPingResponse.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">PingResponse</a>* response, cPolymorphic* context,
<a name="l00515"></a>00515                          <span class="keywordtype">int</span> rpcId, simtime_t rtt);
<a name="l00516"></a>00516     <span class="keywordtype">void</span> <a class="code" href="classBaseRpc.html#a2789009bedea79d85900252a19b23927">pingRpcTimeout</a>(<a class="code" href="classPingCall.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">PingCall</a>* pingCall, <span class="keyword">const</span> <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a>&amp; dest,
<a name="l00517"></a>00517                         cPolymorphic* context, <span class="keywordtype">int</span> rpcId);
<a name="l00518"></a>00518 
<a name="l00519"></a><a class="code" href="classBaseRpc.html#ab1d2746aee1698173f6c27155c1e0dff">00519</a>     <span class="keyword">typedef</span> UNORDERED_MAP&lt;int,RpcState&gt; RpcStates;
<a name="l00520"></a>00520 
<a name="l00521"></a><a class="code" href="classBaseRpc.html#af109c565dddd82caff9f4230a8b87e32">00521</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseRpc.html#af109c565dddd82caff9f4230a8b87e32">rpcsPending</a>;
<a name="l00522"></a><a class="code" href="classBaseRpc.html#a62d50ea3c4a4d90e309575f8e6bec440">00522</a>     <a class="code" href="classRpcListener.html" title="A Remote-Procedure-Call listener class.">RpcListener</a>* <a class="code" href="classBaseRpc.html#a62d50ea3c4a4d90e309575f8e6bec440">defaultRpcListener</a>;
<a name="l00523"></a><a class="code" href="classBaseRpc.html#a406d454a8bc87f85df920ac49fc788b7">00523</a>     <a class="code" href="classBaseRpc.html#ab1d2746aee1698173f6c27155c1e0dff">RpcStates</a> <a class="code" href="classBaseRpc.html#a406d454a8bc87f85df920ac49fc788b7">rpcStates</a>;
<a name="l00524"></a><a class="code" href="classBaseRpc.html#af7f8a9d32155e067464ca8e9c716b74e">00524</a>     simtime_t <a class="code" href="classBaseRpc.html#af7f8a9d32155e067464ca8e9c716b74e">rpcUdpTimeout</a>, <a class="code" href="classBaseRpc.html#a0e3d1dc5889337099be6ff9e28b73240">rpcKeyTimeout</a>;
<a name="l00525"></a><a class="code" href="classBaseRpc.html#a1ac45c35436f95f0717a202b3d0ac9a2">00525</a>     <span class="keywordtype">bool</span> <a class="code" href="classBaseRpc.html#a1ac45c35436f95f0717a202b3d0ac9a2">optimizeTimeouts</a>;
<a name="l00526"></a><a class="code" href="classBaseRpc.html#a0dc0c1443bf9b23da0c0e7d4fc9af41c">00526</a>     <span class="keywordtype">bool</span> <a class="code" href="classBaseRpc.html#a0dc0c1443bf9b23da0c0e7d4fc9af41c">rpcExponentialBackoff</a>;
<a name="l00527"></a>00527 };
<a name="l00528"></a>00528 
<a name="l00529"></a>00529 <span class="preprocessor">#endif</span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Nov 3 2010 14:40:43 for OverSim by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
