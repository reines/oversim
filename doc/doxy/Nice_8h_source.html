<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OverSim: Nice.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="dir_668dee661430860db5868c2621a9c372.html">src</a>      </li>
      <li><a class="el" href="dir_6302e9405fe106175d386473fd676d2e.html">overlay</a>      </li>
      <li><a class="el" href="dir_3b7439cc863d448c2d91c48bb8f106aa.html">nice</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Nice.h</h1>  </div>
</div>
<div class="contents">
<a href="Nice_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//</span>
<a name="l00002"></a>00002 <span class="comment">// Copyright (C) 2009 Institut fuer Telematik, Universitaet Karlsruhe (TH)</span>
<a name="l00003"></a>00003 <span class="comment">//</span>
<a name="l00004"></a>00004 <span class="comment">// This program is free software; you can redistribute it and/or</span>
<a name="l00005"></a>00005 <span class="comment">// modify it under the terms of the GNU General Public License</span>
<a name="l00006"></a>00006 <span class="comment">// as published by the Free Software Foundation; either version 2</span>
<a name="l00007"></a>00007 <span class="comment">// of the License, or (at your option) any later version.</span>
<a name="l00008"></a>00008 <span class="comment">//</span>
<a name="l00009"></a>00009 <span class="comment">// This program is distributed in the hope that it will be useful,</span>
<a name="l00010"></a>00010 <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00011"></a>00011 <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00012"></a>00012 <span class="comment">// GNU General Public License for more details.</span>
<a name="l00013"></a>00013 <span class="comment">//</span>
<a name="l00014"></a>00014 <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l00015"></a>00015 <span class="comment">// along with this program; if not, write to the Free Software</span>
<a name="l00016"></a>00016 <span class="comment">// Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.</span>
<a name="l00017"></a>00017 <span class="comment">//</span>
<a name="l00018"></a>00018 
<a name="l00025"></a>00025 <span class="preprocessor">#ifndef __NICE_H_</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span><span class="preprocessor">#define __NICE_H_</span>
<a name="l00027"></a>00027 <span class="preprocessor"></span>
<a name="l00028"></a>00028 <span class="keyword">namespace </span>oversim
<a name="l00029"></a>00029 {
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <span class="keyword">class </span>Nice;
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 }
<a name="l00034"></a>00034 
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;<a class="code" href="BaseOverlay_8h.html">BaseOverlay.h</a>&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="NiceCluster_8h.html">NiceCluster.h</a>&quot;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;<a class="code" href="NiceMessage__m_8h.html">NiceMessage_m.h</a>&quot;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="NicePeerInfo_8h.html">NicePeerInfo.h</a>&quot;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &lt;<a class="code" href="hashWatch_8h.html">hashWatch.h</a>&gt;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="combination_8h.html">combination.h</a>&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &lt;algorithm&gt;</span>
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <span class="preprocessor">#include &lt;fstream&gt;</span>
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="keyword">namespace </span>oversim
<a name="l00047"></a>00047 {
<a name="l00048"></a>00048 
<a name="l00059"></a><a class="code" href="classoversim_1_1Nice.html">00059</a> <span class="keyword">class </span><a class="code" href="classoversim_1_1Nice.html" title="NICE overlay module.">Nice</a> : <span class="keyword">public</span> <a class="code" href="classBaseOverlay.html" title="Base class for overlays.">BaseOverlay</a>
<a name="l00060"></a>00060 {
<a name="l00061"></a>00061 
<a name="l00062"></a>00062     <span class="comment">/* The maximum of supported layers, fix for easier handling of structures */</span>
<a name="l00063"></a><a class="code" href="classoversim_1_1Nice.html#a960f2035d499686a97fe7163542b8647">00063</a>     <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">short</span> <a class="code" href="classoversim_1_1Nice.html#a960f2035d499686a97fe7163542b8647">maxLayers</a> = 10;
<a name="l00064"></a>00064 
<a name="l00065"></a><a class="code" href="classoversim_1_1Nice.html#a6b71884e13dc73c1a1c81351b031cb64">00065</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classoversim_1_1NicePeerInfo.html">NicePeerInfo</a>;
<a name="l00066"></a>00066 
<a name="l00067"></a>00067 <span class="keyword">public</span>:
<a name="l00068"></a>00068 
<a name="l00069"></a>00069     <span class="comment">/* Define set of TransportAdresses and iterator */</span>
<a name="l00070"></a><a class="code" href="classoversim_1_1Nice.html#a60d75f363c7edb6f1fd349cac322d99a">00070</a>     <span class="keyword">typedef</span> std::set&lt;TransportAddress&gt; TaSet;
<a name="l00071"></a><a class="code" href="classoversim_1_1Nice.html#a2f60a812cd1652cd6624511076dee718">00071</a>     <span class="keyword">typedef</span> std::set&lt;TransportAddress&gt;::iterator TaSetIt;
<a name="l00072"></a>00072 
<a name="l00073"></a>00073     <span class="comment">/* Constructor and Destructor */</span>
<a name="l00074"></a>00074     <a class="code" href="classoversim_1_1Nice.html#a7ffce18253e937f405a232fd8555b60e">Nice</a>();
<a name="l00075"></a>00075     <span class="keyword">virtual</span> <a class="code" href="classoversim_1_1Nice.html#a9788a3d4f0f81f204edaaa16a492cf50">~Nice</a>();
<a name="l00076"></a>00076 
<a name="l00077"></a>00077     <span class="comment">/* See BaseOverlay.h */</span>
<a name="l00078"></a>00078     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a63977effde493b185fb9230ec5c2a608" title="Initializes derived-class-attributes.">initializeOverlay</a>( <span class="keywordtype">int</span> stage );
<a name="l00079"></a>00079 
<a name="l00080"></a>00080     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#aebd1289938fa0c32bceda56deafaf302">handleTimerEvent</a>(cMessage* msg);
<a name="l00081"></a>00081 
<a name="l00082"></a>00082     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#aa7b0abef7e007a2a032614cd1e5be597" title="Processes messages from underlay.">handleUDPMessage</a>(<a class="code" href="classBaseOverlayMessage.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">BaseOverlayMessage</a>* msg);
<a name="l00083"></a>00083 
<a name="l00084"></a>00084     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#af750b796fbab34f8fc9c48cca7a26ddb" title="Processes &amp;quot;timer&amp;quot; self-messages.">handleAppMessage</a>(cMessage* msg);
<a name="l00085"></a>00085 
<a name="l00086"></a>00086     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a93acdc685e2e7ad1ada75063db007463" title="collects statistical data in derived class">finishOverlay</a>();
<a name="l00087"></a>00087 
<a name="l00088"></a>00088 
<a name="l00089"></a>00089 <span class="keyword">protected</span>:
<a name="l00090"></a>00090 
<a name="l00096"></a>00096     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#ad1d32ea267badf0b9a482d7c415aa03c" title="changes node state">changeState</a>(<span class="keywordtype">int</span> toState);
<a name="l00097"></a>00097 
<a name="l00098"></a>00098     <span class="comment">/* see BaseOverlay.h */</span>
<a name="l00099"></a>00099     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a642dd901f2f5b0561cde5a1c3e932d8e" title="Join the overlay with a given nodeID in thisNode.key.">joinOverlay</a>();
<a name="l00100"></a>00100 
<a name="l00101"></a>00101     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a9f2264e7a35474365104f15854108700" title="This method gets call **.gracefulLeaveDelay seconds before it is killed.">handleNodeLeaveNotification</a>();
<a name="l00102"></a>00102 
<a name="l00103"></a>00103 
<a name="l00104"></a>00104 <span class="keyword">private</span>:
<a name="l00105"></a>00105 
<a name="l00106"></a><a class="code" href="classoversim_1_1Nice.html#a8603dc65c59516ee5dc237ce651659c6">00106</a>     <span class="keywordtype">int</span> <a class="code" href="classoversim_1_1Nice.html#a8603dc65c59516ee5dc237ce651659c6">pimp</a>;
<a name="l00107"></a>00107 
<a name="l00108"></a><a class="code" href="classoversim_1_1Nice.html#a28c155327e18edb17d6ab2a4c67cf0a8">00108</a>     <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a> <a class="code" href="classoversim_1_1Nice.html#a28c155327e18edb17d6ab2a4c67cf0a8">RendevouzPoint</a>;
<a name="l00109"></a>00109 
<a name="l00110"></a><a class="code" href="classoversim_1_1Nice.html#aaad03fa2518f9122314129e4afd433d8">00110</a>     <span class="keywordtype">bool</span> <a class="code" href="classoversim_1_1Nice.html#aaad03fa2518f9122314129e4afd433d8">isRendevouzPoint</a>;
<a name="l00111"></a>00111 
<a name="l00112"></a>00112     <span class="comment">/* Periodic Self-Messages and their intervals */</span>
<a name="l00113"></a>00113 
<a name="l00114"></a>00114     <span class="comment">/* Timer for heartbeats by every member node */</span>
<a name="l00115"></a><a class="code" href="classoversim_1_1Nice.html#a687c425a685e47b47d989b24a1fe6165">00115</a>     cMessage* <a class="code" href="classoversim_1_1Nice.html#a687c425a685e47b47d989b24a1fe6165">heartbeatTimer</a>;
<a name="l00116"></a><a class="code" href="classoversim_1_1Nice.html#a58d3d6285e2a84acb277e220d1a35807">00116</a>     simtime_t <a class="code" href="classoversim_1_1Nice.html#a58d3d6285e2a84acb277e220d1a35807">heartbeatInterval</a>;
<a name="l00117"></a>00117 
<a name="l00118"></a>00118     <span class="comment">/* Timer structure maintenance */</span>
<a name="l00119"></a><a class="code" href="classoversim_1_1Nice.html#ace2ed47b84cbee1c7cc71cbc44a4fea8">00119</a>     cMessage* <a class="code" href="classoversim_1_1Nice.html#ace2ed47b84cbee1c7cc71cbc44a4fea8">maintenanceTimer</a>;
<a name="l00120"></a><a class="code" href="classoversim_1_1Nice.html#a6d14d42d813222d9ee8c5d395ba60365">00120</a>     simtime_t <a class="code" href="classoversim_1_1Nice.html#a6d14d42d813222d9ee8c5d395ba60365">maintenanceInterval</a>;
<a name="l00121"></a>00121 
<a name="l00122"></a>00122     <span class="comment">/* Timer for query timeouts */</span>
<a name="l00123"></a><a class="code" href="classoversim_1_1Nice.html#a4648efb65dd8c13990a571c275d3bd04">00123</a>     cMessage* <a class="code" href="classoversim_1_1Nice.html#a4648efb65dd8c13990a571c275d3bd04">queryTimer</a>;
<a name="l00124"></a><a class="code" href="classoversim_1_1Nice.html#a6e3e4cdfa221e6f9980e3c51a5452570">00124</a>     simtime_t <a class="code" href="classoversim_1_1Nice.html#a6e3e4cdfa221e6f9980e3c51a5452570">queryInterval</a>;
<a name="l00125"></a>00125 
<a name="l00126"></a>00126     <span class="comment">/* Timer poll the Rendevouz Point */</span>
<a name="l00127"></a><a class="code" href="classoversim_1_1Nice.html#a4a913c4be6eabc80fac48dffed005771">00127</a>     cMessage* <a class="code" href="classoversim_1_1Nice.html#a4a913c4be6eabc80fac48dffed005771">rpPollTimer</a>;
<a name="l00128"></a><a class="code" href="classoversim_1_1Nice.html#a417d95b2b0bdad377d0613f4dde77b66">00128</a>     simtime_t <a class="code" href="classoversim_1_1Nice.html#a417d95b2b0bdad377d0613f4dde77b66">rpPollTimerInterval</a>;
<a name="l00129"></a>00129 
<a name="l00130"></a><a class="code" href="classoversim_1_1Nice.html#abffc50a7507069a0d97997f269c2d130">00130</a>     <span class="keywordtype">double</span> <a class="code" href="classoversim_1_1Nice.html#abffc50a7507069a0d97997f269c2d130">peerTimeoutHeartbeats</a>;
<a name="l00131"></a>00131 
<a name="l00132"></a>00132     <span class="comment">/* For Visualization only */</span>
<a name="l00133"></a><a class="code" href="classoversim_1_1Nice.html#aa31f386f8403d2ba88f43a1a57fcba57">00133</a>     cMessage* <a class="code" href="classoversim_1_1Nice.html#aa31f386f8403d2ba88f43a1a57fcba57">visualizationTimer</a>;
<a name="l00134"></a>00134 
<a name="l00135"></a>00135     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a71a14940853660afb14b6c8f6b5d448c">updateVisualization</a>();
<a name="l00136"></a>00136 
<a name="l00137"></a>00137     <span class="comment">/* Double leader resolution */</span>
<a name="l00138"></a><a class="code" href="classoversim_1_1Nice.html#a7e846c8b782d0bc44fdafc58897d4d5d">00138</a>     simtime_t <a class="code" href="classoversim_1_1Nice.html#a7e846c8b782d0bc44fdafc58897d4d5d">first_HB</a>;
<a name="l00139"></a><a class="code" href="classoversim_1_1Nice.html#a36ec304efa445340c9c1f72e950b076b">00139</a>     <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a> <a class="code" href="classoversim_1_1Nice.html#a36ec304efa445340c9c1f72e950b076b">first_leader</a>;
<a name="l00140"></a><a class="code" href="classoversim_1_1Nice.html#acde4679b6655c0fbf9bdc6c35bc974b0">00140</a>     simtime_t <a class="code" href="classoversim_1_1Nice.html#acde4679b6655c0fbf9bdc6c35bc974b0">second_HB</a>;
<a name="l00141"></a><a class="code" href="classoversim_1_1Nice.html#ad6115b6ca9ae33de7308570d8aaceaf7">00141</a>     <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a> <a class="code" href="classoversim_1_1Nice.html#ad6115b6ca9ae33de7308570d8aaceaf7">second_leader</a>;
<a name="l00142"></a>00142 
<a name="l00143"></a><a class="code" href="classoversim_1_1Nice.html#a1cdcbcd2cf361d641fb76ee38d552599">00143</a>     std::vector&lt;std::pair&lt;TransportAddress, simtime_t&gt; &gt; <a class="code" href="classoversim_1_1Nice.html#a1cdcbcd2cf361d641fb76ee38d552599">leaderHeartbeats</a>;
<a name="l00144"></a>00144 
<a name="l00145"></a>00145     <span class="comment">/* DEBUG */</span>
<a name="l00146"></a><a class="code" href="classoversim_1_1Nice.html#aebff401d083e6f6b20fb9253181465ff">00146</a>     <span class="keywordtype">int</span> <a class="code" href="classoversim_1_1Nice.html#aebff401d083e6f6b20fb9253181465ff">clusterrefinement</a>;
<a name="l00147"></a><a class="code" href="classoversim_1_1Nice.html#ae8b24bedc06f07fe2c03ec7b135c63a5">00147</a>     <span class="keywordtype">int</span> <a class="code" href="classoversim_1_1Nice.html#ae8b24bedc06f07fe2c03ec7b135c63a5">debug_heartbeats</a>;
<a name="l00148"></a><a class="code" href="classoversim_1_1Nice.html#a1a3aaae38bf78dc32e177868afbde6c7">00148</a>     <span class="keywordtype">int</span> <a class="code" href="classoversim_1_1Nice.html#a1a3aaae38bf78dc32e177868afbde6c7">debug_visualization</a>;
<a name="l00149"></a><a class="code" href="classoversim_1_1Nice.html#afa26359a3e0160724c4f36bbb02df6f4">00149</a>     <span class="keywordtype">int</span> <a class="code" href="classoversim_1_1Nice.html#afa26359a3e0160724c4f36bbb02df6f4">debug_join</a>;
<a name="l00150"></a><a class="code" href="classoversim_1_1Nice.html#a6af70b0196fd0d482286c0ff5a46f5ae">00150</a>     <span class="keywordtype">int</span> <a class="code" href="classoversim_1_1Nice.html#a6af70b0196fd0d482286c0ff5a46f5ae">debug_peertimeouts</a>;
<a name="l00151"></a><a class="code" href="classoversim_1_1Nice.html#a12a2bd46343643e35473ab74900db70a">00151</a>     <span class="keywordtype">int</span> <a class="code" href="classoversim_1_1Nice.html#a12a2bd46343643e35473ab74900db70a">debug_removes</a>;
<a name="l00152"></a><a class="code" href="classoversim_1_1Nice.html#a65ded61488d36484e3529f3e23b6e713">00152</a>     <span class="keywordtype">int</span> <a class="code" href="classoversim_1_1Nice.html#a65ded61488d36484e3529f3e23b6e713">debug_queries</a>;
<a name="l00153"></a>00153 
<a name="l00154"></a>00154     <span class="comment">/* Cluster parameter k */</span>
<a name="l00155"></a><a class="code" href="classoversim_1_1Nice.html#a29f5e69b521aa1eb0047e64272b84562">00155</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classoversim_1_1Nice.html#a29f5e69b521aa1eb0047e64272b84562">k</a>;
<a name="l00156"></a>00156 
<a name="l00157"></a>00157     <span class="comment">/* Cluster Information */</span>
<a name="l00158"></a><a class="code" href="classoversim_1_1Nice.html#a644c991f567da9990713bba00e3dacac">00158</a>     <a class="code" href="classNiceCluster.html">NiceCluster</a> <a class="code" href="classoversim_1_1Nice.html#a644c991f567da9990713bba00e3dacac">clusters</a>[<a class="code" href="classoversim_1_1Nice.html#a960f2035d499686a97fe7163542b8647">maxLayers</a>];
<a name="l00159"></a>00159 
<a name="l00160"></a>00160     <span class="comment">/* Holds the current layer we query, if we do */</span>
<a name="l00161"></a><a class="code" href="classoversim_1_1Nice.html#a71935c17b8b4804bc6dd823d696dbf3e">00161</a>     <span class="keywordtype">int</span> <a class="code" href="classoversim_1_1Nice.html#a71935c17b8b4804bc6dd823d696dbf3e">evalLayer</a>;
<a name="l00162"></a><a class="code" href="classoversim_1_1Nice.html#a46807673c62fb160eaf202a0eac29058">00162</a>     <span class="keywordtype">int</span> <a class="code" href="classoversim_1_1Nice.html#a46807673c62fb160eaf202a0eac29058">joinLayer</a>;
<a name="l00163"></a>00163 
<a name="l00164"></a>00164     <span class="comment">/* The address of the point which we polled as RendevouzPoint */</span>
<a name="l00165"></a><a class="code" href="classoversim_1_1Nice.html#ac00b0f8d11b8f3f7c3e5c2eb78511cc6">00165</a>     <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a> <a class="code" href="classoversim_1_1Nice.html#ac00b0f8d11b8f3f7c3e5c2eb78511cc6">polledRendevouzPoint</a>;
<a name="l00166"></a>00166 
<a name="l00167"></a>00167     <span class="comment">/* Holds the query start time for RTT evaluation */</span>
<a name="l00168"></a><a class="code" href="classoversim_1_1Nice.html#aa604bd27a4b737fd179c2b09debebc84">00168</a>     simtime_t <a class="code" href="classoversim_1_1Nice.html#aa604bd27a4b737fd179c2b09debebc84">query_start</a>;
<a name="l00169"></a>00169 
<a name="l00170"></a>00170     <span class="comment">/* The current queried node */</span>
<a name="l00171"></a><a class="code" href="classoversim_1_1Nice.html#a974f1212dc063af0d943b5fa350cc57a">00171</a>     <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a> <a class="code" href="classoversim_1_1Nice.html#a974f1212dc063af0d943b5fa350cc57a">tempResolver</a>;
<a name="l00172"></a>00172 
<a name="l00173"></a>00173     <span class="comment">/* distance to first queried node that answers */</span>
<a name="l00174"></a><a class="code" href="classoversim_1_1Nice.html#a3460e84226f3260196e99da210b74082">00174</a>     simtime_t <a class="code" href="classoversim_1_1Nice.html#a3460e84226f3260196e99da210b74082">query_compare</a>;
<a name="l00175"></a>00175 
<a name="l00176"></a>00176     <span class="comment">/* Layer intended to join */</span>
<a name="l00177"></a><a class="code" href="classoversim_1_1Nice.html#a327e50ef2c393ea0b929f3f27154ce96">00177</a>     <span class="keywordtype">short</span> <a class="code" href="classoversim_1_1Nice.html#a327e50ef2c393ea0b929f3f27154ce96">targetLayer</a>;
<a name="l00178"></a>00178 
<a name="l00179"></a>00179     <span class="comment">/* Map for all peer infos */</span>
<a name="l00180"></a><a class="code" href="classoversim_1_1Nice.html#abfd784a7eb10c0af88d835308cf66ff6">00180</a>     std::map&lt;TransportAddress, NicePeerInfo*&gt; <a class="code" href="classoversim_1_1Nice.html#abfd784a7eb10c0af88d835308cf66ff6">peerInfos</a>;
<a name="l00181"></a>00181 
<a name="l00182"></a>00182     <span class="comment">/* set holding temporary peered joiner nodes */</span>
<a name="l00183"></a><a class="code" href="classoversim_1_1Nice.html#ab4e95531a9f00a8c4ed022749d263238">00183</a>     std::map&lt;TransportAddress, simtime_t&gt; <a class="code" href="classoversim_1_1Nice.html#ab4e95531a9f00a8c4ed022749d263238">tempPeers</a>;
<a name="l00184"></a><a class="code" href="classoversim_1_1Nice.html#abe5249e886cdb9e6d56efa40e6efe71e">00184</a>     <span class="keywordtype">bool</span> <a class="code" href="classoversim_1_1Nice.html#abe5249e886cdb9e6d56efa40e6efe71e">isTempPeered</a>;
<a name="l00185"></a>00185 
<a name="l00186"></a><a class="code" href="classoversim_1_1Nice.html#a3469d510d59a1cc3577e5d24a6628275">00186</a>     <span class="keywordtype">double</span> <a class="code" href="classoversim_1_1Nice.html#a3469d510d59a1cc3577e5d24a6628275">CLUSTERLEADERBOUND</a>;
<a name="l00187"></a><a class="code" href="classoversim_1_1Nice.html#ad83625b73a292aa04380837e7d6c3944">00187</a>     <span class="keywordtype">double</span> <a class="code" href="classoversim_1_1Nice.html#ad83625b73a292aa04380837e7d6c3944">CLUSTERLEADERCOMPAREDIST</a>;
<a name="l00188"></a><a class="code" href="classoversim_1_1Nice.html#a4368d509b0c5ac9950cf8fa52fa5f176">00188</a>     <span class="keywordtype">double</span> <a class="code" href="classoversim_1_1Nice.html#a4368d509b0c5ac9950cf8fa52fa5f176">SC_PROC_DISTANCE</a>;
<a name="l00189"></a><a class="code" href="classoversim_1_1Nice.html#a02292a0c465a7bbb80f66fbd7187cc9b">00189</a>     <span class="keywordtype">double</span> <a class="code" href="classoversim_1_1Nice.html#a02292a0c465a7bbb80f66fbd7187cc9b">SC_MIN_OFFSET</a>;
<a name="l00190"></a>00190 
<a name="l00191"></a>00191     <span class="comment">// Statistics</span>
<a name="l00192"></a><a class="code" href="classoversim_1_1Nice.html#a50dd1e20f4c56dc45f9ffa1c52d2716f">00192</a>     <span class="keywordtype">int</span> <a class="code" href="classoversim_1_1Nice.html#a50dd1e20f4c56dc45f9ffa1c52d2716f">numInconsistencies</a>;
<a name="l00193"></a>00193 
<a name="l00194"></a><a class="code" href="classoversim_1_1Nice.html#ac151ea0f3d5ac1d60b32d92c08d89e44">00194</a>     <span class="keywordtype">int</span> <a class="code" href="classoversim_1_1Nice.html#ac151ea0f3d5ac1d60b32d92c08d89e44">numQueryTimeouts</a>;
<a name="l00195"></a>00195 
<a name="l00196"></a><a class="code" href="classoversim_1_1Nice.html#a82e217903a688c47656a56dc4a593ebc">00196</a>     <span class="keywordtype">int</span> <a class="code" href="classoversim_1_1Nice.html#a82e217903a688c47656a56dc4a593ebc">numPeerTimeouts</a>;
<a name="l00197"></a>00197 
<a name="l00198"></a><a class="code" href="classoversim_1_1Nice.html#a97964c134da4da5b58b3c7dff32a0800">00198</a>     <span class="keywordtype">int</span> <a class="code" href="classoversim_1_1Nice.html#a97964c134da4da5b58b3c7dff32a0800">numTempPeerTimeouts</a>;
<a name="l00199"></a>00199 
<a name="l00200"></a><a class="code" href="classoversim_1_1Nice.html#acd1effc337560f6677e63608b3e53af8">00200</a>     <span class="keywordtype">int</span> <a class="code" href="classoversim_1_1Nice.html#acd1effc337560f6677e63608b3e53af8">numStructurePartitions</a>;
<a name="l00201"></a>00201 
<a name="l00202"></a><a class="code" href="classoversim_1_1Nice.html#ab0a8837fcffd376b822166d048a401fa">00202</a>     <span class="keywordtype">int</span> <a class="code" href="classoversim_1_1Nice.html#ab0a8837fcffd376b822166d048a401fa">numOwnMessagesReceived</a>;
<a name="l00203"></a>00203 
<a name="l00204"></a><a class="code" href="classoversim_1_1Nice.html#a063a91a0c9cbd3bcfeca7ce10944eb70">00204</a>     <span class="keywordtype">double</span> <a class="code" href="classoversim_1_1Nice.html#a063a91a0c9cbd3bcfeca7ce10944eb70">totalSCMinCompare</a>;
<a name="l00205"></a>00205 
<a name="l00206"></a><a class="code" href="classoversim_1_1Nice.html#a765b5d96a57bf709b6a8ce28541d55a6">00206</a>     <span class="keywordtype">int</span> <a class="code" href="classoversim_1_1Nice.html#a765b5d96a57bf709b6a8ce28541d55a6">numJoins</a>;
<a name="l00207"></a>00207 
<a name="l00208"></a><a class="code" href="classoversim_1_1Nice.html#aa0d6fe84d8444d39caee3e2c67323550">00208</a>     <span class="keywordtype">int</span> <a class="code" href="classoversim_1_1Nice.html#aa0d6fe84d8444d39caee3e2c67323550">numForward</a>;
<a name="l00209"></a>00209 
<a name="l00210"></a><a class="code" href="classoversim_1_1Nice.html#ade427df4fbd3edb53e04467984384927">00210</a>     <span class="keywordtype">int</span> <a class="code" href="classoversim_1_1Nice.html#ade427df4fbd3edb53e04467984384927">totalForwardBytes</a>;
<a name="l00211"></a>00211 
<a name="l00212"></a><a class="code" href="classoversim_1_1Nice.html#ab0165945cd4929e57f66e595ce76cc14">00212</a>     <span class="keywordtype">int</span> <a class="code" href="classoversim_1_1Nice.html#ab0165945cd4929e57f66e595ce76cc14">numReceived</a>;
<a name="l00213"></a>00213 
<a name="l00214"></a><a class="code" href="classoversim_1_1Nice.html#ab70712e9a475d6ab12690cf36a31ffe1">00214</a>     <span class="keywordtype">int</span> <a class="code" href="classoversim_1_1Nice.html#ab70712e9a475d6ab12690cf36a31ffe1">totalReceivedBytes</a>;
<a name="l00215"></a>00215 
<a name="l00216"></a><a class="code" href="classoversim_1_1Nice.html#aed41149eb142ad3c71d6a639b113a5f7">00216</a>     <span class="keywordtype">int</span> <a class="code" href="classoversim_1_1Nice.html#aed41149eb142ad3c71d6a639b113a5f7">numHeartbeat</a>;
<a name="l00217"></a>00217 
<a name="l00218"></a><a class="code" href="classoversim_1_1Nice.html#ad186e77457bdad45888594517319a02b">00218</a>     <span class="keywordtype">int</span> <a class="code" href="classoversim_1_1Nice.html#ad186e77457bdad45888594517319a02b">totalHeartbeatBytes</a>;
<a name="l00219"></a>00219 
<a name="l00220"></a>00220     <span class="comment">/* Find highest layer in which node is leader */</span>
<a name="l00221"></a>00221     <span class="keywordtype">int</span> <a class="code" href="classoversim_1_1Nice.html#a51eac39bb02905af0ea3a792bc23248a">getHighestLeaderLayer</a>();
<a name="l00222"></a>00222 
<a name="l00223"></a>00223     <span class="comment">/* Find highest layer in which node resides. Returns -1 when node not yet joined. */</span>
<a name="l00224"></a>00224     <span class="keywordtype">int</span> <a class="code" href="classoversim_1_1Nice.html#ac29c7ecdf6590c8f7fd4ea9b546f72f8">getHighestLayer</a>();
<a name="l00225"></a>00225 
<a name="l00226"></a>00226     <span class="comment">/* Joining the hierarchy from scratch */</span>
<a name="l00227"></a>00227     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#ad3b7430e484451777e58ea163e4fc049">BasicJoinLayer</a>(<span class="keywordtype">short</span> layer);
<a name="l00228"></a>00228 
<a name="l00229"></a>00229     <span class="comment">/* Splits a cluster */</span>
<a name="l00230"></a>00230     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#aa0181f581e1a294a1a115ce68363a517">ClusterSplit</a>(<span class="keywordtype">int</span> layer);
<a name="l00231"></a>00231 
<a name="l00232"></a>00232     <span class="comment">/* Request sublayer information from a cluster leader */</span>
<a name="l00233"></a>00233     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a6acafcf8008939d12f8db7e002a2ebb5">Query</a>(<span class="keyword">const</span> <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a>&amp; node, <span class="keywordtype">short</span> layer);
<a name="l00234"></a>00234 
<a name="l00235"></a>00235     <span class="comment">/* NICE message handlers */</span>
<a name="l00236"></a>00236     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a133d3f2486a3d5a7c294d3e2d5fa8369">handleNiceClusterMergeRequest</a>(<a class="code" href="classNiceClusterMerge.html" title="Class generated from overlay/nice/NiceMessage.msg by opp_msgc.">NiceClusterMerge</a>* mergeMsg);
<a name="l00237"></a>00237 
<a name="l00238"></a>00238     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a8a781cde350bdaed6e8db0d0f36d82c0">handleNiceForceMerge</a>(<a class="code" href="classNiceMessage.html" title="Class generated from overlay/nice/NiceMessage.msg by opp_msgc.">NiceMessage</a>* msg);
<a name="l00239"></a>00239 
<a name="l00240"></a>00240     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a9e789530fee17ed030b474ab2a7b1b18">handleNiceHeartbeat</a>(<a class="code" href="classNiceHeartbeat.html" title="Class generated from overlay/nice/NiceMessage.msg by opp_msgc.">NiceHeartbeat</a>* msg);
<a name="l00241"></a>00241 
<a name="l00242"></a>00242     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a2946a8a0d8f597e09e5d37659d1e30a1">handleNiceLeaderHeartbeat</a>(<a class="code" href="classNiceLeaderHeartbeat.html" title="Class generated from overlay/nice/NiceMessage.msg by opp_msgc.">NiceLeaderHeartbeat</a>* lhbMsg);
<a name="l00243"></a>00243 
<a name="l00244"></a>00244     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a0d13c3965aafab68b912a6dc75c4e9a0">handleNiceLeaderTransfer</a>(<a class="code" href="classNiceLeaderHeartbeat.html" title="Class generated from overlay/nice/NiceMessage.msg by opp_msgc.">NiceLeaderHeartbeat</a>* transferMsg);
<a name="l00245"></a>00245 
<a name="l00246"></a>00246     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a0757be556541e2d8efd235be889f2ab6">handleNiceJoinCluster</a>(<a class="code" href="classNiceMessage.html" title="Class generated from overlay/nice/NiceMessage.msg by opp_msgc.">NiceMessage</a>* joinMsg);
<a name="l00247"></a>00247 
<a name="l00248"></a>00248     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a32b8406978ad9ab46a7eba786ccf83a2">handleNiceJoineval</a>(<a class="code" href="classNiceMessage.html" title="Class generated from overlay/nice/NiceMessage.msg by opp_msgc.">NiceMessage</a>* msg);
<a name="l00249"></a>00249 
<a name="l00250"></a>00250     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a90140602613205803d08c25820b94063">handleNiceJoinevalResponse</a>(<a class="code" href="classNiceMessage.html" title="Class generated from overlay/nice/NiceMessage.msg by opp_msgc.">NiceMessage</a>* msg);
<a name="l00251"></a>00251 
<a name="l00252"></a>00252     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a34fcedb51cca4b510f3e5a9eebf28096">handleNiceLeaderHeartbeatOrTransfer</a>(<a class="code" href="classNiceMessage.html" title="Class generated from overlay/nice/NiceMessage.msg by opp_msgc.">NiceMessage</a>* msg);
<a name="l00253"></a>00253 
<a name="l00254"></a>00254     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a5ebd8516425fdcc5847e26ce3b08314f">handleNiceMulticast</a>(<a class="code" href="classNiceMulticastMessage.html" title="Class generated from overlay/nice/NiceMessage.msg by opp_msgc.">NiceMulticastMessage</a>* multicastMsg);
<a name="l00255"></a>00255 
<a name="l00256"></a>00256     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#ab6096a998d14db350a8c12780ca62e61">handleNicePeerTemporary</a>(<a class="code" href="classNiceMessage.html" title="Class generated from overlay/nice/NiceMessage.msg by opp_msgc.">NiceMessage</a>* msg);
<a name="l00257"></a>00257 
<a name="l00258"></a>00258     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a761b15b9d4124e34084250c79339da27">handleNicePeerTemporaryRelease</a>(<a class="code" href="classNiceMessage.html" title="Class generated from overlay/nice/NiceMessage.msg by opp_msgc.">NiceMessage</a>* msg);
<a name="l00259"></a>00259 
<a name="l00260"></a>00260     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a45f3d0f25ccf42b10be3717b1e59846b">handleNicePingProbe</a>(<a class="code" href="classNiceMessage.html" title="Class generated from overlay/nice/NiceMessage.msg by opp_msgc.">NiceMessage</a>* msg);
<a name="l00261"></a>00261 
<a name="l00262"></a>00262     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#aa818a9dfa6027388de5281eae926c7c4">handleNicePingProbeResponse</a>(<a class="code" href="classNiceMessage.html" title="Class generated from overlay/nice/NiceMessage.msg by opp_msgc.">NiceMessage</a>* msg);
<a name="l00263"></a>00263 
<a name="l00264"></a>00264     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a10494e710344144e515c7e22b83e786c">handleNicePollRp</a>(<a class="code" href="classNiceMessage.html" title="Class generated from overlay/nice/NiceMessage.msg by opp_msgc.">NiceMessage</a>* msg);
<a name="l00265"></a>00265 
<a name="l00266"></a>00266     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a655a94f5f3da35838278419173dda60c">handleNicePollRpResponse</a>(<a class="code" href="classNiceMessage.html" title="Class generated from overlay/nice/NiceMessage.msg by opp_msgc.">NiceMessage</a>* msg);
<a name="l00267"></a>00267 
<a name="l00268"></a>00268     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#afeb7081be1f7f76b2108aad45c49abfe">handleNiceQuery</a>(<a class="code" href="classNiceMessage.html" title="Class generated from overlay/nice/NiceMessage.msg by opp_msgc.">NiceMessage</a>* queryMsg);
<a name="l00269"></a>00269 
<a name="l00270"></a>00270     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#ab36bfc01b3cd042da92e1b27782ce7bd">handleNiceQueryResponse</a>(<a class="code" href="classNiceMemberMessage.html" title="Class generated from overlay/nice/NiceMessage.msg by opp_msgc.">NiceMemberMessage</a>* queryRspMsg);
<a name="l00271"></a>00271 
<a name="l00272"></a>00272     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a66a02ca915d3e7182580217bde40ccb5">handleNiceRemove</a>(<a class="code" href="classNiceMessage.html" title="Class generated from overlay/nice/NiceMessage.msg by opp_msgc.">NiceMessage</a>* msg);
<a name="l00273"></a>00273 
<a name="l00274"></a>00274 
<a name="l00275"></a>00275     <span class="comment">/* Joins a cluster */</span>
<a name="l00276"></a>00276     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#af4c42da9d6ab2d8e83a4056bf83dd8ab">JoinCluster</a>(<span class="keyword">const</span> <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a>&amp; leader, <span class="keywordtype">short</span> layer);
<a name="l00277"></a>00277 
<a name="l00278"></a>00278     <span class="comment">/* Sends heartbeats to all clusters the node resides in */</span>
<a name="l00279"></a>00279     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a1ffd3a3b39866e51502fee0bf37480f7">sendHeartbeats</a>();
<a name="l00280"></a>00280 
<a name="l00285"></a>00285     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#ae1bc183e5411855a2026e884d2d2cee1" title="Cleans the tempPeers map from peers that have timed out, removes timed-out peers in peerInfos and als...">cleanPeers</a>();
<a name="l00286"></a>00286 
<a name="l00291"></a>00291     <span class="keywordtype">bool</span> <a class="code" href="classoversim_1_1Nice.html#aed05e40d0f2c58971e6eff74009cbf82" title="Splits clusters if needed.">splitNeeded</a>();
<a name="l00292"></a>00292 
<a name="l00297"></a>00297     <span class="keywordtype">bool</span> <a class="code" href="classoversim_1_1Nice.html#a84af41f236c10b5398aa9d63aeab63b1" title="Merges clusters if needed.">mergeNeeded</a>();
<a name="l00298"></a>00298 
<a name="l00303"></a>00303     <span class="keywordtype">bool</span> <a class="code" href="classoversim_1_1Nice.html#a66d414d9448c241ede5d2702cbec6578" title="Checks if we have received conflicting leader heartbeats.">checkLeaderHeartbeatsForCollisions</a>(<a class="code" href="classNiceLeaderHeartbeat.html" title="Class generated from overlay/nice/NiceMessage.msg by opp_msgc.">NiceLeaderHeartbeat</a>* hbMsg);
<a name="l00304"></a>00304 
<a name="l00305"></a>00305     <span class="comment">/* Periodic maintenance of the protocol hierarchy */</span>
<a name="l00306"></a>00306     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a0a808dd35aedab035a7bb8ba1a5d6f9a">maintenance</a>();
<a name="l00307"></a>00307 
<a name="l00308"></a>00308     <span class="comment">/* Determines the max distance of a member in a cluster */</span>
<a name="l00309"></a>00309     simtime_t <a class="code" href="classoversim_1_1Nice.html#ad87e45d16986960bf34ce49f236e1d52">getMaxDistance</a>(<a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a> member, <span class="keyword">const</span> std::set&lt;TransportAddress&gt;&amp; neighbors);
<a name="l00310"></a>00310     <span class="keyword">template</span> &lt;<span class="keyword">class</span> ConstIter&gt;
<a name="l00311"></a>00311     simtime_t <a class="code" href="classoversim_1_1Nice.html#ad87e45d16986960bf34ce49f236e1d52">getMaxDistance</a>(<a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a> member, ConstIter neighborsBegin, ConstIter neighborsEnd);
<a name="l00312"></a>00312 
<a name="l00313"></a>00313     <span class="comment">/* Determines the mean distance of a cluster */</span>
<a name="l00314"></a>00314     simtime_t <a class="code" href="classoversim_1_1Nice.html#af6e0621edd3122f917e428d133a0a732">getMeanDistance</a>(std::set&lt;TransportAddress&gt; neighbors);
<a name="l00315"></a>00315 
<a name="l00316"></a>00316     <span class="comment">/* Initiates a LeaderTransfer message */</span>
<a name="l00317"></a>00317     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a4b8cc16894616bbe008940eb98775c0d">LeaderTransfer</a>(<span class="keywordtype">int</span> layer, <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a> leader, <a class="code" href="classoversim_1_1Nice.html#a60d75f363c7edb6f1fd349cac322d99a">TaSet</a> cluster, <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a> sc_leader, <a class="code" href="classoversim_1_1Nice.html#a60d75f363c7edb6f1fd349cac322d99a">TaSet</a> superCluster);
<a name="l00318"></a>00318 
<a name="l00319"></a>00319     <span class="comment">/* Transfers leadership of whole cluster to given node */</span>
<a name="l00320"></a>00320     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a4b8cc16894616bbe008940eb98775c0d">LeaderTransfer</a>(<span class="keywordtype">int</span> layer, <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a> leader);
<a name="l00321"></a>00321 
<a name="l00322"></a>00322     <span class="comment">/* Removes node from cluster */</span>
<a name="l00323"></a>00323     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a546c8b69ae759d24e9b809deb1d75398">Remove</a>(<span class="keywordtype">int</span> layer);
<a name="l00324"></a>00324 
<a name="l00325"></a>00325     <span class="comment">/* Sends Heartbeat to specific member */</span>
<a name="l00326"></a>00326     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a677d8c691996974f3abb040578279669">sendHeartbeatTo</a>(<span class="keyword">const</span> <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a>&amp; node, <span class="keywordtype">int</span> layer);
<a name="l00327"></a>00327 
<a name="l00328"></a>00328     <span class="comment">/* Sends a remove message to the given node at layer */</span>
<a name="l00329"></a>00329     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a70a802eb31e3c0047413fa08864986bf" title="sendRemoveTo">sendRemoveTo</a>(<span class="keyword">const</span> <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a>&amp; node, <span class="keywordtype">int</span> layer);
<a name="l00330"></a>00330 
<a name="l00331"></a>00331     <span class="comment">/* Merges two clusters */</span>
<a name="l00332"></a>00332     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#ad4f8cc3855e672b84d2a097bd60c0925">ClusterMerge</a>(<span class="keywordtype">int</span> layer);
<a name="l00333"></a>00333 
<a name="l00334"></a>00334     <span class="comment">/* Sends a ClusterMerge request message */</span>
<a name="l00335"></a>00335     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a46eb256216745f2ae5db49585d8c7025">ClusterMergeRequest</a>(<span class="keyword">const</span> <a class="code" href="classTransportAddress.html" title="This class implements a common transport address.">TransportAddress</a>&amp; node, <span class="keywordtype">int</span> layer);
<a name="l00336"></a>00336 
<a name="l00337"></a>00337     <span class="comment">/* Leaves structure gracefully */</span>
<a name="l00338"></a>00338     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#af48af4ac315203b552f1eecd1678689c">gracefulLeave</a>(<span class="keywordtype">short</span> bottomLayer);
<a name="l00339"></a>00339 
<a name="l00340"></a>00340     <span class="comment">/* Determines the center of a cluster */</span>
<a name="l00341"></a>00341     std::pair&lt;TransportAddress, simtime_t&gt; <a class="code" href="classoversim_1_1Nice.html#ab103d070590546c820b57f2a087955ed">findCenter</a>(<a class="code" href="classoversim_1_1Nice.html#a60d75f363c7edb6f1fd349cac322d99a">TaSet</a> cluster, <span class="keywordtype">bool</span> allowRandom = <span class="keyword">false</span>);
<a name="l00342"></a>00342     std::pair&lt;TransportAddress, simtime_t&gt; <a class="code" href="classoversim_1_1Nice.html#ab103d070590546c820b57f2a087955ed">findCenter</a>(std::vector&lt;TransportAddress&gt; cluster, <span class="keywordtype">bool</span> allowRandom = <span class="keyword">false</span>);
<a name="l00343"></a>00343     std::pair&lt;TransportAddress, simtime_t&gt; <a class="code" href="classoversim_1_1Nice.html#ab103d070590546c820b57f2a087955ed">findCenter</a>(<span class="keyword">const</span> <a class="code" href="classNiceCluster.html">NiceCluster</a>&amp; cluster, <span class="keywordtype">bool</span> allowRandom = <span class="keyword">false</span>);
<a name="l00344"></a>00344     <span class="keyword">template</span> &lt;<span class="keyword">class</span> ConstIter&gt;
<a name="l00345"></a>00345     std::pair&lt;TransportAddress, simtime_t&gt; <a class="code" href="classoversim_1_1Nice.html#ab103d070590546c820b57f2a087955ed">findCenter</a>(ConstIter begin, ConstIter end, <span class="keywordtype">bool</span> allowRandom = <span class="keyword">false</span>);
<a name="l00346"></a>00346 
<a name="l00347"></a>00347     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#a92c3a3c37c9c3101ac2e51ab609c4c64">sendDataToOverlay</a>(<a class="code" href="classNiceMulticastMessage.html" title="Class generated from overlay/nice/NiceMessage.msg by opp_msgc.">NiceMulticastMessage</a> *appMsg);
<a name="l00348"></a>00348 
<a name="l00349"></a>00349     <span class="keywordtype">void</span> <a class="code" href="classoversim_1_1Nice.html#ac1b9865b490cf352d83680020939c270">pollRP</a>(<span class="keywordtype">int</span> layer);
<a name="l00350"></a>00350 
<a name="l00351"></a>00351 };
<a name="l00352"></a>00352 
<a name="l00353"></a>00353 }; <span class="comment">//namespace</span>
<a name="l00354"></a>00354 
<a name="l00355"></a>00355 <span class="preprocessor">#endif</span>
<a name="l00356"></a>00356 <span class="preprocessor"></span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Nov 3 2010 14:40:44 for OverSim by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
