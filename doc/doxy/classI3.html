<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OverSim: I3 Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<h1>I3 Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="I3" --><!-- doxytag: inherits="BaseApp" -->
<p>Main Omnet module for the implementation of Internet Indirection Infrastructure.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="I3_8h_source.html">I3.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for I3:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classI3.png" usemap="#I3_map" alt=""/>
  <map id="I3_map" name="I3_map">
<area href="classBaseApp.html" alt="BaseApp" shape="rect" coords="57,112,162,136"/>
<area href="classBaseRpc.html" alt="BaseRpc" shape="rect" coords="0,56,105,80"/>
<area href="classBaseTcpSupport.html" alt="BaseTcpSupport" shape="rect" coords="115,56,220,80"/>
<area href="classRpcListener.html" alt="RpcListener" shape="rect" coords="0,0,105,24"/>
<area href="classI3TRTServer.html" alt="I3TRTServer" shape="rect" coords="57,224,162,248"/>
</map>
</div>

<p><a href="classI3-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="I3_8h.html#a8472afa61e8b0e8b6900212558ff418e">I3TriggerTable</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classI3.html#a058b26778ac3020781ab22b8ed934022">getTriggerTable</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the table of inserted triggers.  <a href="#a058b26778ac3020781ab22b8ed934022"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classI3Identifier.html">I3Identifier</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classI3.html#a484a2a57dd80db0497b31f1748ffd7df">findClosestMatch</a> (const <a class="el" href="classI3Identifier.html">I3Identifier</a> &amp;t) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Finds the closest match to t from the stored trigger identifiers.  <a href="#a484a2a57dd80db0497b31f1748ffd7df"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classI3.html#a41f6d55485f2de6f5ec420e8442552d1">insertTrigger</a> (<a class="el" href="classI3Trigger.html">I3Trigger</a> &amp;t)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Inserts a trigger into <a class="el" href="classI3.html" title="Main Omnet module for the implementation of Internet Indirection Infrastructure.">I3</a>.  <a href="#a41f6d55485f2de6f5ec420e8442552d1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classI3.html#a28d6ef774301710a6096fcbc106e5c77">removeTrigger</a> (<a class="el" href="classI3Trigger.html">I3Trigger</a> &amp;t)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Removes a trigger from <a class="el" href="classI3.html" title="Main Omnet module for the implementation of Internet Indirection Infrastructure.">I3</a>.  <a href="#a28d6ef774301710a6096fcbc106e5c77"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classI3.html#a4f149bf024aa7063d7c16a36ef35c9af">sendPacket</a> (<a class="el" href="classI3SendPacketMessage.html">I3SendPacketMessage</a> *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends a packet through <a class="el" href="classI3.html" title="Main Omnet module for the implementation of Internet Indirection Infrastructure.">I3</a>.  <a href="#a4f149bf024aa7063d7c16a36ef35c9af"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classI3.html#a871a4d88bc8957b9897746b03b54c853">sendToNode</a> (<a class="el" href="classI3SendPacketMessage.html">I3SendPacketMessage</a> *imsg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sends packet to matching IP address (used by sendPacket).  <a href="#a871a4d88bc8957b9897746b03b54c853"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classI3.html#af13daff811a3a4d309300bac956e45e1">numInitStages</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns number of required init stages.  <a href="#af13daff811a3a4d309300bac956e45e1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classI3.html#a1a517ce442b620aa21d619a00e59ecf8">initializeApp</a> (int stage)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Actual initialization function.  <a href="#a1a517ce442b620aa21d619a00e59ecf8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classI3.html#a85a00a8f18a553ad74d23d0a8eb987ef">deliver</a> (<a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;key, cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delivers a packet from the overlay.  <a href="#a85a00a8f18a553ad74d23d0a8eb987ef"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classI3.html#a98c0ce72816aa521720a07557ceb2295">handleUDPMessage</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handles a message from UDP.  <a href="#a98c0ce72816aa521720a07557ceb2295"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classI3.html#a8feed795f7a5a6c796a3e54ffff9ea9c">handleTimerEvent</a> (cMessage *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Handles timers.  <a href="#a8feed795f7a5a6c796a3e54ffff9ea9c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classI3.html#a11db4bb912682bba469be963d2b21ab9">sendQueryReply</a> (const <a class="el" href="classI3Identifier.html">I3Identifier</a> &amp;id, const <a class="el" href="structI3IPAddress.html">I3IPAddress</a> &amp;add)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Replies to a query of which server is responsible for the given identifier (this server).  <a href="#a11db4bb912682bba469be963d2b21ab9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classI3.html#a8fe47cc727c2716621eed77c17a79de8">forward</a> (<a class="el" href="classOverlayKey.html">OverlayKey</a> *key, cPacket **msg, <a class="el" href="classNodeHandle.html">NodeHandle</a> *nextHopNode)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Common API function: handles messages from overlay to be forwarded.  <a href="#a8fe47cc727c2716621eed77c17a79de8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classI3.html#ae1809398bd78886675128005f3f46881">updateTriggerTableString</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Updates TriggerTable's module display string.  <a href="#ae1809398bd78886675128005f3f46881"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classI3.html#a8f0a3fd248bd861185ff8dc3281dfa30">finish</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">collects statistical data  <a href="#a8f0a3fd248bd861185ff8dc3281dfa30"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classI3.html#ad72725c7715eab8133eda76d9838fb5c">numDroppedPackets</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Number of dropped packets.  <a href="#ad72725c7715eab8133eda76d9838fb5c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classI3.html#a84ecf53883b9dd3f8398e5f73419e901">byteDroppedPackets</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classI3.html#a73474922ca1ede3042b2fdc24da41552">numForwardedPackets</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classI3.html#af635c209fccea8f66869a7e23ba4005a">numForwardedBytes</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classI3.html#a6e1594f629d122f90fdab8b14a52cbc9">triggerTimeToLive</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Time before inserted triggers expire.  <a href="#a6e1594f629d122f90fdab8b14a52cbc9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="I3_8h.html#a8472afa61e8b0e8b6900212558ff418e">I3TriggerTable</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classI3.html#a7023a721d63935a34f2be71c53cf4678">triggerTable</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Table containing inserted triggers.  <a href="#a7023a721d63935a34f2be71c53cf4678"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">cMessage *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classI3.html#ab949fc88728b48fb2d1b9d1edb5d4370">expirationTimer</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Timer to check for trigger expiration.  <a href="#ab949fc88728b48fb2d1b9d1edb5d4370"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Main Omnet module for the implementation of Internet Indirection Infrastructure. </p>

<p>Definition at line <a class="el" href="I3_8h_source.html#l00046">46</a> of file <a class="el" href="I3_8h_source.html">I3.h</a>.</p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a85a00a8f18a553ad74d23d0a8eb987ef"></a><!-- doxytag: member="I3::deliver" ref="a85a00a8f18a553ad74d23d0a8eb987ef" args="(OverlayKey &amp;key, cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I3::deliver </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Delivers a packet from the overlay. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>Key from the overlay </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>msg</em>&nbsp;</td><td>Message to deliver </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classBaseApp.html#ad9bfd86cefb67c31a2bcc082df3aa04c">BaseApp</a>.</p>

<p>Reimplemented in <a class="el" href="classI3TRTServer.html#a5353a87055cb25bc71601deb2d0a34d4">I3TRTServer</a>.</p>

<p>Definition at line <a class="el" href="I3_8cc_source.html#l00314">314</a> of file <a class="el" href="I3_8cc_source.html">I3.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="classI3Message.html" title="Class generated from applications/i3/I3Message.msg by opp_msgc.">I3Message</a> *i3msg;

    i3msg = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classI3Message.html" title="Class generated from applications/i3/I3Message.msg by opp_msgc.">I3Message</a>*<span class="keyword">&gt;</span>(msg);
    <span class="keywordflow">if</span> (!i3msg) {
        cout &lt;&lt; <span class="stringliteral">&quot;Delivered non I3 Message!&quot;</span> &lt;&lt; endl;
        <span class="keyword">delete</span> msg;
        <span class="keywordflow">return</span>;
    }

    <span class="keywordflow">switch</span> (i3msg-&gt;<a class="code" href="classI3Message.html#abd2d0964bb06d466f4fc81c7179b689f">getType</a>()) {
    <span class="keywordflow">case</span> <a class="code" href="I3Message__m_8h.html#aabd1e55c19381bd63c1b4d47c5409afea2b7960bcdd651d62992e14ccaa29b977">INSERT_TRIGGER</a>:
        <a class="code" href="classI3InsertTriggerMessage.html">I3InsertTriggerMessage</a> *imsg;

        imsg = check_and_cast&lt;<a class="code" href="classI3InsertTriggerMessage.html">I3InsertTriggerMessage</a>*&gt;(i3msg);
        <a class="code" href="classI3.html#a41f6d55485f2de6f5ec420e8442552d1" title="Inserts a trigger into I3.">insertTrigger</a>(imsg-&gt;<a class="code" href="classI3InsertTriggerMessage__Base.html#a5b0c9820dd0c4453e4f9088d3c97d0d8">getTrigger</a>());

        <span class="keywordflow">if</span> (imsg-&gt;<a class="code" href="classI3InsertTriggerMessage__Base.html#ade94f2d2bd91db5438cdbde7421ebaa3">getSendReply</a>()) {
            <a class="code" href="classI3.html#a11db4bb912682bba469be963d2b21ab9" title="Replies to a query of which server is responsible for the given identifier (this server).">sendQueryReply</a>(imsg-&gt;<a class="code" href="classI3InsertTriggerMessage__Base.html#a5b0c9820dd0c4453e4f9088d3c97d0d8">getTrigger</a>().<a class="code" href="classI3Trigger.html#a008b5dc32f9d4a0203be48f2dab0e540" title="Returns the identifier.">getIdentifier</a>(), imsg-&gt;<a class="code" href="classI3InsertTriggerMessage__Base.html#abec0ddb3254aaa0eae944271c42d71e5">getSource</a>());
        }

        <span class="keyword">delete</span> msg;
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="I3Message__m_8h.html#aabd1e55c19381bd63c1b4d47c5409afeaacce412b4be14f90aa78b94ca37da909">REMOVE_TRIGGER</a>:
        <a class="code" href="classI3RemoveTriggerMessage.html">I3RemoveTriggerMessage</a> *rmsg;

        rmsg = check_and_cast&lt;<a class="code" href="classI3RemoveTriggerMessage.html">I3RemoveTriggerMessage</a>*&gt;(i3msg);
        <a class="code" href="classI3.html#a28d6ef774301710a6096fcbc106e5c77" title="Removes a trigger from I3.">removeTrigger</a>(rmsg-&gt;<a class="code" href="classI3RemoveTriggerMessage__Base.html#a81df4fb1ab3db6943e8ff28f37e246d1">getTrigger</a>());
        <span class="keyword">delete</span> msg;
        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="I3Message__m_8h.html#aabd1e55c19381bd63c1b4d47c5409afead25076dd974810d50835d534cc94950c">SEND_PACKET</a>:
        <a class="code" href="classI3SendPacketMessage.html">I3SendPacketMessage</a> *smsg;

        smsg = check_and_cast&lt;<a class="code" href="classI3SendPacketMessage.html">I3SendPacketMessage</a>*&gt;(i3msg);
        <a class="code" href="classI3.html#a4f149bf024aa7063d7c16a36ef35c9af" title="Sends a packet through I3.">sendPacket</a>(smsg);

        <span class="keywordflow">break</span>;
    <span class="keywordflow">default</span>:
        <span class="keyword">delete</span> msg;
        <span class="keywordflow">break</span>;
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a484a2a57dd80db0497b31f1748ffd7df"></a><!-- doxytag: member="I3::findClosestMatch" ref="a484a2a57dd80db0497b31f1748ffd7df" args="(const I3Identifier &amp;t) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classI3Identifier.html">I3Identifier</a> * I3::findClosestMatch </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classI3Identifier.html">I3Identifier</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>t</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Finds the closest match to t from the stored trigger identifiers. </p>
<p>Note that, in the case that there are many biggest prefix matches, it will only return the first one (bug! - couldn't find efficient way to do) </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>t</em>&nbsp;</td><td>Identifier to be matchesd </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Pointer to the biggest prefix match, or NULL if none was found </dd></dl>

<p>Definition at line <a class="el" href="I3_8cc_source.html#l00063">63</a> of file <a class="el" href="I3_8cc_source.html">I3.cc</a>.</p>

<p>Referenced by <a class="el" href="I3_8cc_source.html#l00146">sendPacket()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordtype">int</span> prevDist = 0, nextDist = 0;


    <span class="keywordflow">if</span> (<a class="code" href="classI3.html#a7023a721d63935a34f2be71c53cf4678" title="Table containing inserted triggers.">triggerTable</a>.size() == 0) <span class="keywordflow">return</span> 0;

    <span class="comment">/* find the closest identifier to t */</span>
    <span class="comment">/* if no match exists, it gets the next identifier with a bigger key */</span>
    I3TriggerTable::const_iterator it = <a class="code" href="classI3.html#a7023a721d63935a34f2be71c53cf4678" title="Table containing inserted triggers.">triggerTable</a>.lower_bound(t);

    <span class="keywordflow">if</span> (it == <a class="code" href="classI3.html#a7023a721d63935a34f2be71c53cf4678" title="Table containing inserted triggers.">triggerTable</a>.end()) {
        it--;               <span class="comment">// if at the end, check last</span>
    }

    <span class="keywordflow">if</span> (it-&gt;first == t) <span class="keywordflow">return</span> &amp;it-&gt;first; <span class="comment">// if we found an exact match, no need to bother</span>

    <span class="keywordflow">if</span> (it != <a class="code" href="classI3.html#a7023a721d63935a34f2be71c53cf4678" title="Table containing inserted triggers.">triggerTable</a>.begin()) { <span class="comment">// if no smaller keys, begin() is the candidate itself</span>

        <span class="comment">/* no exact match, check which is closer: */</span>
        <span class="comment">/* either where the iterator points to (the next biggest) or the previous one. */</span>
        <span class="comment">/* see I3Identifier::distanceTo for distance definition */</span>

        nextDist = it-&gt;first.distanceTo(t);
        it--;
        prevDist = it-&gt;first.distanceTo(t);

        <span class="comment">// if the next one is closest, put iterator back in place</span>
        <span class="keywordflow">if</span> (nextDist &lt; prevDist) {
            it++;
        }
    }

    <span class="comment">/* now check if they match in the I3 sense (first prefixLength bits) */</span>
    <span class="keywordflow">return</span> (it-&gt;first.isMatch(t)) ? &amp;it-&gt;first : 0;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8f0a3fd248bd861185ff8dc3281dfa30"></a><!-- doxytag: member="I3::finish" ref="a8f0a3fd248bd861185ff8dc3281dfa30" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I3::finish </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>collects statistical data </p>

<p>Reimplemented from <a class="el" href="classBaseApp.html#a754a4b87c7372bce4772db1d4d6175b1">BaseApp</a>.</p>

<p>Reimplemented in <a class="el" href="classI3TRTServer.html#a9d5869a2da2559534bfe58c22018991d">I3TRTServer</a>.</p>

<p>Definition at line <a class="el" href="I3_8cc_source.html#l00431">431</a> of file <a class="el" href="I3_8cc_source.html">I3.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    recordScalar(<span class="stringliteral">&quot;I3 Packets dropped&quot;</span>, <a class="code" href="classI3.html#ad72725c7715eab8133eda76d9838fb5c" title="Number of dropped packets.">numDroppedPackets</a>);
    recordScalar(<span class="stringliteral">&quot;I3 Bytes dropped&quot;</span>, <a class="code" href="classI3.html#a84ecf53883b9dd3f8398e5f73419e901">byteDroppedPackets</a>);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8fe47cc727c2716621eed77c17a79de8"></a><!-- doxytag: member="I3::forward" ref="a8fe47cc727c2716621eed77c17a79de8" args="(OverlayKey *key, cPacket **msg, NodeHandle *nextHopNode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I3::forward </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classOverlayKey.html">OverlayKey</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cPacket **&nbsp;</td>
          <td class="paramname"> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classNodeHandle.html">NodeHandle</a> *&nbsp;</td>
          <td class="paramname"> <em>nextHopNode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Common API function: handles messages from overlay to be forwarded. </p>
<p>method to handle decapsulated <a class="el" href="classKBRdeliver.html" title="Class generated from common/CommonMessages.msg by opp_msgc.">KBRdeliver</a> messages from overlay module, should be overwritten in derived application if needed </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>destination key </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>msg</em>&nbsp;</td><td>message to forward </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nextHopNode</em>&nbsp;</td><td>next hop </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classBaseApp.html#ad9ad1b23f2fe54f2355d6faad2ef7c9f">BaseApp</a>.</p>

<p>Definition at line <a class="el" href="I3_8cc_source.html#l00231">231</a> of file <a class="el" href="I3_8cc_source.html">I3.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="classI3.html#a73474922ca1ede3042b2fdc24da41552">numForwardedPackets</a>++;
    <a class="code" href="classI3.html#af635c209fccea8f66869a7e23ba4005a">numForwardedBytes</a> += (*msg)-&gt;getByteLength();

    <a class="code" href="classI3.html#a8fe47cc727c2716621eed77c17a79de8" title="Common API function: handles messages from overlay to be forwarded.">BaseApp::forward</a>(key, msg, hint);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a058b26778ac3020781ab22b8ed934022"></a><!-- doxytag: member="I3::getTriggerTable" ref="a058b26778ac3020781ab22b8ed934022" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="I3_8h.html#a8472afa61e8b0e8b6900212558ff418e">I3TriggerTable</a> &amp; I3::getTriggerTable </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the table of inserted triggers. </p>

<p>Definition at line <a class="el" href="I3_8cc_source.html#l00426">426</a> of file <a class="el" href="I3_8cc_source.html">I3.cc</a>.</p>

<p>Referenced by <a class="el" href="TriggerTable_8cc_source.html#l00036">TriggerTable::initialize()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="classI3.html#a7023a721d63935a34f2be71c53cf4678" title="Table containing inserted triggers.">triggerTable</a>;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8feed795f7a5a6c796a3e54ffff9ea9c"></a><!-- doxytag: member="I3::handleTimerEvent" ref="a8feed795f7a5a6c796a3e54ffff9ea9c" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I3::handleTimerEvent </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handles timers. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>msg</em>&nbsp;</td><td>Timer </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="I3_8cc_source.html#l00392">392</a> of file <a class="el" href="I3_8cc_source.html">I3.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordtype">bool</span> updateString = <span class="keyword">false</span>;

    <span class="keywordflow">if</span> (msg == <a class="code" href="classI3.html#ab949fc88728b48fb2d1b9d1edb5d4370" title="Timer to check for trigger expiration.">expirationTimer</a>) {
        scheduleAt(simTime() + <a class="code" href="classI3.html#a6e1594f629d122f90fdab8b14a52cbc9" title="Time before inserted triggers expire.">triggerTimeToLive</a>, <a class="code" href="classI3.html#ab949fc88728b48fb2d1b9d1edb5d4370" title="Timer to check for trigger expiration.">expirationTimer</a>);

        <span class="keywordflow">for</span> (I3TriggerTable::iterator it = <a class="code" href="classI3.html#a7023a721d63935a34f2be71c53cf4678" title="Table containing inserted triggers.">triggerTable</a>.begin(); it != <a class="code" href="classI3.html#a7023a721d63935a34f2be71c53cf4678" title="Table containing inserted triggers.">triggerTable</a>.end(); it++) {
            set&lt;I3Trigger&gt; &amp;triggerSet = it-&gt;second;
            <span class="keywordflow">for</span> (set&lt;I3Trigger&gt;::const_iterator sit = triggerSet.begin(); sit != triggerSet.end(); sit++) {
                <span class="comment">//cout &lt;&lt; &quot;Trigger &quot; &lt;&lt; *sit &lt;&lt; &quot; has</span>
                <span class="keywordflow">if</span> (simTime() - sit-&gt;getInsertionTime() &gt; <a class="code" href="classI3.html#a6e1594f629d122f90fdab8b14a52cbc9" title="Time before inserted triggers expire.">triggerTimeToLive</a>) {
                    <span class="comment">//if ((bool)par(&quot;debugOutput&quot;)) {</span>
                    <span class="comment">//  cout &lt;&lt; &quot;Erasing trigger &quot; &lt;&lt; *sit &lt;&lt; &quot; in &quot; &lt;&lt;</span>
                    <span class="comment">//          thisNode.getIp()&lt;&lt; &quot;, insertion time is &quot; &lt;&lt; sit-&gt;getInsertionTime()&lt;&lt; endl;</span>
                    <span class="comment">//}</span>
                    triggerSet.erase(sit);
                    updateString = <span class="keyword">true</span>;
                }
            }
            <span class="keywordflow">if</span> (it-&gt;second.size() == 0) {
                <a class="code" href="classI3.html#a7023a721d63935a34f2be71c53cf4678" title="Table containing inserted triggers.">triggerTable</a>.erase(it);
            }
        }
        <span class="keywordflow">if</span> (updateString) <a class="code" href="classI3.html#ae1809398bd78886675128005f3f46881" title="Updates TriggerTable&amp;#39;s module display string.">updateTriggerTableString</a>();
    } <span class="keywordflow">else</span> <span class="keyword">delete</span> msg;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a98c0ce72816aa521720a07557ceb2295"></a><!-- doxytag: member="I3::handleUDPMessage" ref="a98c0ce72816aa521720a07557ceb2295" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I3::handleUDPMessage </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handles a message from UDP. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>msg</em>&nbsp;</td><td>Incoming message </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classBaseApp.html#a86914395123f871fd67197db7310cdfa">BaseApp</a>.</p>

<p>Definition at line <a class="el" href="I3_8cc_source.html#l00240">240</a> of file <a class="el" href="I3_8cc_source.html">I3.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="classI3Message.html" title="Class generated from applications/i3/I3Message.msg by opp_msgc.">I3Message</a> *i3msg;

    i3msg = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classI3Message.html" title="Class generated from applications/i3/I3Message.msg by opp_msgc.">I3Message</a>*<span class="keyword">&gt;</span>(msg);

    <span class="keywordflow">if</span> (!i3msg) {
        <span class="keyword">delete</span> msg;
        <span class="keywordflow">return</span>;
    }

    <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a> key;

    msg-&gt;removeControlInfo();
    <span class="keywordflow">switch</span> (i3msg-&gt;<a class="code" href="classI3Message.html#abd2d0964bb06d466f4fc81c7179b689f">getType</a>()) {
    <span class="keywordflow">case</span> <a class="code" href="I3Message__m_8h.html#aabd1e55c19381bd63c1b4d47c5409afea2b7960bcdd651d62992e14ccaa29b977">INSERT_TRIGGER</a>:
        <a class="code" href="classI3InsertTriggerMessage.html">I3InsertTriggerMessage</a> *imsg;

        imsg = check_and_cast&lt;<a class="code" href="classI3InsertTriggerMessage.html">I3InsertTriggerMessage</a>*&gt;(i3msg);
        key = imsg-&gt;<a class="code" href="classI3InsertTriggerMessage__Base.html#a5b0c9820dd0c4453e4f9088d3c97d0d8">getTrigger</a>().<a class="code" href="classI3Trigger.html#a008b5dc32f9d4a0203be48f2dab0e540" title="Returns the identifier.">getIdentifier</a>().<a class="code" href="classI3Identifier.html#a1efb17b551ff587a48f21f9ff609132a" title="Creates an OverlayKey from an identifier, to be used in the overlay underneath.">asOverlayKey</a>();
        <a class="code" href="classBaseApp.html#a629659835cf4ccd86a995fd00e5f4794" title="Common API function: calls route-method in overlay.">callRoute</a>(key, imsg);

        <span class="comment">/*            if ((imsg-&gt;getSource().address.d[0] &amp; 0xff) == 56) {</span>
<span class="comment">                    cout &lt;&lt; &quot;UDP Server &quot; &lt;&lt; thisNode.getIp()&lt;&lt; &quot; trigger &quot; &lt;&lt; imsg-&gt;getTrigger() &lt;&lt; &quot; key &quot; &lt;&lt; key &lt;&lt; endl;</span>
<span class="comment">            }*/</span>

        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="I3Message__m_8h.html#aabd1e55c19381bd63c1b4d47c5409afeaacce412b4be14f90aa78b94ca37da909">REMOVE_TRIGGER</a>:
        <a class="code" href="classI3RemoveTriggerMessage.html">I3RemoveTriggerMessage</a> *rmsg;

        rmsg = check_and_cast&lt;<a class="code" href="classI3RemoveTriggerMessage.html">I3RemoveTriggerMessage</a>*&gt;(i3msg);
        key = rmsg-&gt;<a class="code" href="classI3RemoveTriggerMessage__Base.html#a81df4fb1ab3db6943e8ff28f37e246d1">getTrigger</a>().<a class="code" href="classI3Trigger.html#a008b5dc32f9d4a0203be48f2dab0e540" title="Returns the identifier.">getIdentifier</a>().<a class="code" href="classI3Identifier.html#a1efb17b551ff587a48f21f9ff609132a" title="Creates an OverlayKey from an identifier, to be used in the overlay underneath.">asOverlayKey</a>();
        <a class="code" href="classBaseApp.html#a629659835cf4ccd86a995fd00e5f4794" title="Common API function: calls route-method in overlay.">callRoute</a>(key, rmsg);

        <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="I3Message__m_8h.html#aabd1e55c19381bd63c1b4d47c5409afead25076dd974810d50835d534cc94950c">SEND_PACKET</a>:
    {
        <a class="code" href="classI3SendPacketMessage.html">I3SendPacketMessage</a> *smsg;

        smsg = check_and_cast&lt;<a class="code" href="classI3SendPacketMessage.html">I3SendPacketMessage</a>*&gt;(i3msg);
        <span class="keywordflow">if</span> (smsg-&gt;<a class="code" href="classI3SendPacketMessage__Base.html#af0180ec364a7d5c110d62419e1f615b8">getIdentifierStack</a>().<a class="code" href="classI3IdentifierStack.html#aed17301571697e75f9fa9600b0400f6f" title="Returns the size of the stack.">size</a>() == 0) {
            <span class="comment">/* got an empty identifier stack - nothing to do */</span>
            <span class="keyword">delete</span> msg;
            <span class="keywordflow">return</span>;
        }
        <a class="code" href="classI3SubIdentifier.html" title="A wrapper around either an I3IPAddress or an I3Identifier.">I3SubIdentifier</a> &amp;subId = smsg-&gt;<a class="code" href="classI3SendPacketMessage__Base.html#af0180ec364a7d5c110d62419e1f615b8">getIdentifierStack</a>().<a class="code" href="classI3IdentifierStack.html#a4cac49ae77f9d10a09e78502a741c830" title="Returns a reference to the top of the stack.">peek</a>();
        <span class="keywordflow">if</span> (subId.<a class="code" href="classI3SubIdentifier.html#a8e2b2f6354e24556ac78e91e5e467510" title="Returns the subidentifier type.">getType</a>() == I3SubIdentifier::IPAddress) {
            <span class="comment">/* why didn&#39;t they send it directly?! */</span>
            <a class="code" href="classI3.html#a871a4d88bc8957b9897746b03b54c853" title="Sends packet to matching IP address (used by sendPacket).">sendToNode</a>(smsg);
        } <span class="keywordflow">else</span> {
            key = subId.<a class="code" href="classI3SubIdentifier.html#a4250f1068693c6e25be429d7417233a6" title="Returns the identifier.">getIdentifier</a>().<a class="code" href="classI3Identifier.html#a1efb17b551ff587a48f21f9ff609132a" title="Creates an OverlayKey from an identifier, to be used in the overlay underneath.">asOverlayKey</a>();
            <a class="code" href="classBaseApp.html#a629659835cf4ccd86a995fd00e5f4794" title="Common API function: calls route-method in overlay.">callRoute</a>(key, smsg);
        }
        <span class="keywordflow">break</span>;
    }
    <span class="keywordflow">default</span>:
        <span class="comment">/* should&#39;t happen */</span>
        <span class="keyword">delete</span> msg;
        <span class="keywordflow">break</span>;
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1a517ce442b620aa21d619a00e59ecf8"></a><!-- doxytag: member="I3::initializeApp" ref="a1a517ce442b620aa21d619a00e59ecf8" args="(int stage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I3::initializeApp </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stage</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Actual initialization function. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>stage</em>&nbsp;</td><td>Actual stage </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classBaseApp.html#ac9a059a2cfb67f4c38f462bb1383e795">BaseApp</a>.</p>

<p>Reimplemented in <a class="el" href="classI3TRTServer.html#a519a1018e61fc3442b656c18247a44a8">I3TRTServer</a>.</p>

<p>Definition at line <a class="el" href="I3_8cc_source.html#l00363">363</a> of file <a class="el" href="I3_8cc_source.html">I3.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (stage != <a class="code" href="InitStages_8h.html#a42fde1aa1e14a1c45d29061d6e87e532ad9afa81d0184c5f0649fa111f7a821bc" title="deprecated">MIN_STAGE_APP</a>)
        <span class="keywordflow">return</span>;

    <a class="code" href="classI3.html#ad72725c7715eab8133eda76d9838fb5c" title="Number of dropped packets.">numDroppedPackets</a> = 0;
    WATCH(<a class="code" href="classI3.html#ad72725c7715eab8133eda76d9838fb5c" title="Number of dropped packets.">numDroppedPackets</a>);
    <a class="code" href="classI3.html#a84ecf53883b9dd3f8398e5f73419e901">byteDroppedPackets</a> = 0;
    WATCH(<a class="code" href="classI3.html#a84ecf53883b9dd3f8398e5f73419e901">byteDroppedPackets</a>);

    <a class="code" href="classI3.html#a73474922ca1ede3042b2fdc24da41552">numForwardedPackets</a> = 0;
    <a class="code" href="classI3.html#af635c209fccea8f66869a7e23ba4005a">numForwardedBytes</a> = 0;

    WATCH(<a class="code" href="classI3.html#a73474922ca1ede3042b2fdc24da41552">numForwardedPackets</a>);
    WATCH(<a class="code" href="classI3.html#af635c209fccea8f66869a7e23ba4005a">numForwardedBytes</a>);

    <a class="code" href="classI3.html#a6e1594f629d122f90fdab8b14a52cbc9" title="Time before inserted triggers expire.">triggerTimeToLive</a> = par(<span class="stringliteral">&quot;triggerTimeToLive&quot;</span>);
    WATCH(<a class="code" href="classI3.html#a6e1594f629d122f90fdab8b14a52cbc9" title="Time before inserted triggers expire.">triggerTimeToLive</a>);

    <a class="code" href="classI3.html#ab949fc88728b48fb2d1b9d1edb5d4370" title="Timer to check for trigger expiration.">expirationTimer</a> = <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;expiration timer&quot;</span>);
    scheduleAt(simTime() + <a class="code" href="classI3.html#a6e1594f629d122f90fdab8b14a52cbc9" title="Time before inserted triggers expire.">triggerTimeToLive</a>, <a class="code" href="classI3.html#ab949fc88728b48fb2d1b9d1edb5d4370" title="Timer to check for trigger expiration.">expirationTimer</a>);

    getDisplayString() = <span class="stringliteral">&quot;i=i3&quot;</span>;

    <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a46a1b53760e5f2d3f8af8c9591160a48" title="sets this-&amp;gt;port to the given port">setPort</a>(par(<span class="stringliteral">&quot;serverPort&quot;</span>));
    <a class="code" href="classBaseApp.html#a3fb90c6906b6a742246af14e4626dfef" title="Tells UDP we want to get all packets arriving on the given port.">bindToPort</a>(<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a4cf99c434c5110935683624dc3702e0f" title="returns port">getPort</a>());

}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a41f6d55485f2de6f5ec420e8442552d1"></a><!-- doxytag: member="I3::insertTrigger" ref="a41f6d55485f2de6f5ec420e8442552d1" args="(I3Trigger &amp;t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I3::insertTrigger </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classI3Trigger.html">I3Trigger</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>t</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Inserts a trigger into <a class="el" href="classI3.html" title="Main Omnet module for the implementation of Internet Indirection Infrastructure.">I3</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>t</em>&nbsp;</td><td>Trigger to be inserted </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="I3_8cc_source.html#l00100">100</a> of file <a class="el" href="I3_8cc_source.html">I3.cc</a>.</p>

<p>Referenced by <a class="el" href="I3_8cc_source.html#l00314">deliver()</a>.</p>

<p><div class="fragment"><pre class="fragment">{

    <span class="keywordflow">if</span> (t.<a class="code" href="classI3Trigger.html#aa9151cb1f263902d4aff32f8d9ea56c3" title="Returns the insertion time.">getIdentifierStack</a>().<a class="code" href="classI3IdentifierStack.html#aed17301571697e75f9fa9600b0400f6f" title="Returns the size of the stack.">size</a>() == 0) {
        <span class="comment">/* don&#39;t bother */</span>
        cout &lt;&lt; <span class="stringliteral">&quot;Warning: Got trigger &quot;</span> &lt;&lt; t &lt;&lt; <span class="stringliteral">&quot; with size 0 in &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()&lt;&lt; endl;
        <span class="keywordflow">return</span>;
    }

    t.<a class="code" href="classI3Trigger.html#aa4578d84b46cb850124ad91ddb801e42" title="Sets the insertion time.">setInsertionTime</a>(simTime());

    <span class="comment">/* insert packet in triggerTable; */</span>
    <span class="comment">/* if it was already there, remove and insert updated copy */</span>

    <a class="code" href="classI3.html#a7023a721d63935a34f2be71c53cf4678" title="Table containing inserted triggers.">triggerTable</a>[t.<a class="code" href="classI3Trigger.html#a008b5dc32f9d4a0203be48f2dab0e540" title="Returns the identifier.">getIdentifier</a>()].erase(t);
    <a class="code" href="classI3.html#a7023a721d63935a34f2be71c53cf4678" title="Table containing inserted triggers.">triggerTable</a>[t.<a class="code" href="classI3Trigger.html#a008b5dc32f9d4a0203be48f2dab0e540" title="Returns the identifier.">getIdentifier</a>()].insert(t);

    <a class="code" href="classI3.html#ae1809398bd78886675128005f3f46881" title="Updates TriggerTable&amp;#39;s module display string.">updateTriggerTableString</a>();
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="af13daff811a3a4d309300bac956e45e1"></a><!-- doxytag: member="I3::numInitStages" ref="af13daff811a3a4d309300bac956e45e1" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int I3::numInitStages </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns number of required init stages. </p>

<p>Reimplemented from <a class="el" href="classBaseApp.html#a89836f3b6ddff37e3f101ef463938fd4">BaseApp</a>.</p>

<p>Definition at line <a class="el" href="I3_8cc_source.html#l00358">358</a> of file <a class="el" href="I3_8cc_source.html">I3.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="InitStages_8h.html#a42fde1aa1e14a1c45d29061d6e87e532ad9afa81d0184c5f0649fa111f7a821bc" title="deprecated">MIN_STAGE_APP</a> + 1;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a28d6ef774301710a6096fcbc106e5c77"></a><!-- doxytag: member="I3::removeTrigger" ref="a28d6ef774301710a6096fcbc106e5c77" args="(I3Trigger &amp;t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I3::removeTrigger </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classI3Trigger.html">I3Trigger</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>t</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes a trigger from <a class="el" href="classI3.html" title="Main Omnet module for the implementation of Internet Indirection Infrastructure.">I3</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>t</em>&nbsp;</td><td>Trigger to be removed </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="I3_8cc_source.html#l00120">120</a> of file <a class="el" href="I3_8cc_source.html">I3.cc</a>.</p>

<p>Referenced by <a class="el" href="I3_8cc_source.html#l00314">deliver()</a>.</p>

<p><div class="fragment"><pre class="fragment">{

    <span class="comment">//cout &lt;&lt; &quot;Removing trigger at &quot; &lt;&lt; getId() &lt;&lt; endl;</span>
    <span class="comment">//getParentModule()-&gt;getParentModule()-&gt;bubble(&quot;Removing trigger&quot;);</span>

    <span class="keywordflow">if</span> (<a class="code" href="classI3.html#a7023a721d63935a34f2be71c53cf4678" title="Table containing inserted triggers.">triggerTable</a>.count(t.<a class="code" href="classI3Trigger.html#a008b5dc32f9d4a0203be48f2dab0e540" title="Returns the identifier.">getIdentifier</a>()) == 0) <span class="keywordflow">return</span>;

    set&lt;I3Trigger&gt; &amp;s = <a class="code" href="classI3.html#a7023a721d63935a34f2be71c53cf4678" title="Table containing inserted triggers.">triggerTable</a>[t.<a class="code" href="classI3Trigger.html#a008b5dc32f9d4a0203be48f2dab0e540" title="Returns the identifier.">getIdentifier</a>()];

    s.erase(t);

    <span class="keywordflow">if</span> (s.size() == 0) <a class="code" href="classI3.html#a7023a721d63935a34f2be71c53cf4678" title="Table containing inserted triggers.">triggerTable</a>.erase(t.<a class="code" href="classI3Trigger.html#a008b5dc32f9d4a0203be48f2dab0e540" title="Returns the identifier.">getIdentifier</a>());

    <a class="code" href="classI3.html#ae1809398bd78886675128005f3f46881" title="Updates TriggerTable&amp;#39;s module display string.">updateTriggerTableString</a>();
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4f149bf024aa7063d7c16a36ef35c9af"></a><!-- doxytag: member="I3::sendPacket" ref="a4f149bf024aa7063d7c16a36ef35c9af" args="(I3SendPacketMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I3::sendPacket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classI3SendPacketMessage.html">I3SendPacketMessage</a> *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sends a packet through <a class="el" href="classI3.html" title="Main Omnet module for the implementation of Internet Indirection Infrastructure.">I3</a>. </p>
<p>It checks the trigger table for triggers matching the message's first <a class="el" href="classI3SubIdentifier.html" title="A wrapper around either an I3IPAddress or an I3Identifier.">I3SubIdentifier</a> from the stack. If none are found, the subidentifier is dropped and the packet is routed based on the next remaining one (if no subidentifiers remain, the packet itself is dropped). The matching trigger's own subidentifier stack is then appended to the message stack, and then routed to the first subidentifier of the resulting stack (or sent through UDP if it's an IP address). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>msg</em>&nbsp;</td><td>Message to be sent </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="I3_8cc_source.html#l00146">146</a> of file <a class="el" href="I3_8cc_source.html">I3.cc</a>.</p>

<p>Referenced by <a class="el" href="I3_8cc_source.html#l00314">deliver()</a>.</p>

<p><div class="fragment"><pre class="fragment">{

    <a class="code" href="classI3IdentifierStack.html" title="Stack of I3SubIdentifier, implementing the &amp;quot;identifier stack&amp;quot; proposed in Internet Indirect...">I3IdentifierStack</a> &amp;idStack = msg-&gt;<a class="code" href="classI3SendPacketMessage__Base.html#af0180ec364a7d5c110d62419e1f615b8">getIdentifierStack</a>();

    <span class="keywordflow">if</span> (idStack.<a class="code" href="classI3IdentifierStack.html#aed17301571697e75f9fa9600b0400f6f" title="Returns the size of the stack.">size</a>() == 0) {
        <span class="comment">/* no identifiers left! drop packet */</span>
        <span class="comment">/* shouldn&#39;t happen (how&#39;d it get here anyway?) */</span>
        <a class="code" href="classI3.html#ad72725c7715eab8133eda76d9838fb5c" title="Number of dropped packets.">numDroppedPackets</a>++;
        <a class="code" href="classI3.html#a84ecf53883b9dd3f8398e5f73419e901">byteDroppedPackets</a> += msg-&gt;getBitLength();
        <span class="keyword">delete</span> msg;
        <span class="keywordflow">return</span>;
    }

    <a class="code" href="classI3SubIdentifier.html" title="A wrapper around either an I3IPAddress or an I3Identifier.">I3SubIdentifier</a> <span class="keywordtype">id</span> = idStack.<a class="code" href="classI3IdentifierStack.html#a4cac49ae77f9d10a09e78502a741c830" title="Returns a reference to the top of the stack.">peek</a>();

    <span class="keywordflow">if</span> (<span class="keywordtype">id</span>.getType() == <a class="code" href="classI3SubIdentifier.html#a194013cc3797514e06818c6cab1b4ed8a7fb96edc088de944cffd641b899957f3" title="Subidentifier refers to an I3Identifier.">I3SubIdentifier::IPAddress</a>) {
        <span class="comment">/* shouldn&#39;t happen (how&#39;d they find us anyway?) but just in case */</span>
        <a class="code" href="classI3.html#a871a4d88bc8957b9897746b03b54c853" title="Sends packet to matching IP address (used by sendPacket).">sendToNode</a>(msg);
    } <span class="keywordflow">else</span> {

        <span class="comment">/* if we were asked to reply, send it now */</span>
        <span class="keywordflow">if</span> (msg-&gt;<a class="code" href="classI3SendPacketMessage__Base.html#ad4e0c00383e83a4ce5c233c52a8de5cd">getSendReply</a>()) {
            <a class="code" href="classI3.html#a11db4bb912682bba469be963d2b21ab9" title="Replies to a query of which server is responsible for the given identifier (this server).">sendQueryReply</a>(<span class="keywordtype">id</span>.getIdentifier(), msg-&gt;<a class="code" href="classI3SendPacketMessage__Base.html#aa6de703f618e463af31967d03b235f6a">getSource</a>());
        }

        <span class="keyword">const</span> <a class="code" href="classI3Identifier.html">I3Identifier</a> *i3id = <a class="code" href="classI3.html#a484a2a57dd80db0497b31f1748ffd7df" title="Finds the closest match to t from the stored trigger identifiers.">findClosestMatch</a>(<span class="keywordtype">id</span>.getIdentifier());

        <span class="comment">/* eliminate top of the stack */</span>
        idStack.<a class="code" href="classI3IdentifierStack.html#a94c6bc20992b854ee53cbf9b1e20aae0" title="Pops a subidentifier from the top of the stack.">pop</a>();

        <span class="keywordflow">if</span> (!i3id) {
            <span class="comment">/* no matching ids found in this server, re-route to next id */</span>
            <span class="keywordflow">if</span> (idStack.<a class="code" href="classI3IdentifierStack.html#aed17301571697e75f9fa9600b0400f6f" title="Returns the size of the stack.">size</a>() == 0) {
                <span class="comment">/* no identifiers left! drop packet */</span>
                <a class="code" href="classI3.html#ad72725c7715eab8133eda76d9838fb5c" title="Number of dropped packets.">numDroppedPackets</a>++;
                <a class="code" href="classI3.html#a84ecf53883b9dd3f8398e5f73419e901">byteDroppedPackets</a> += msg-&gt;getBitLength();
                cout &lt;&lt; <span class="stringliteral">&quot;Dropped packet at&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()&lt;&lt; <span class="stringliteral">&quot; to unknown id &quot;</span> &lt;&lt; <span class="keywordtype">id</span>.getIdentifier() &lt;&lt; endl;
                <span class="keyword">delete</span> msg;
                <span class="keywordflow">return</span>;
            } <span class="keywordflow">else</span> {
                msg-&gt;setBitLength(<a class="code" href="I3Message__m_8h.html#ae7fce2ecc74dbf0da3e01ffa4b7b4830">SEND_PACKET_L</a>(msg)); <span class="comment">/* stack size changed, recalculate */</span>
                <span class="keywordflow">if</span> (idStack.<a class="code" href="classI3IdentifierStack.html#a4cac49ae77f9d10a09e78502a741c830" title="Returns a reference to the top of the stack.">peek</a>().<a class="code" href="classI3SubIdentifier.html#a8e2b2f6354e24556ac78e91e5e467510" title="Returns the subidentifier type.">getType</a>() == I3SubIdentifier::IPAddress) {
                    msg-&gt;<a class="code" href="classI3SendPacketMessage__Base.html#a5e02e5ee4a4f07a09f0f294c321d1c89">getMatchedTrigger</a>().<a class="code" href="classI3Trigger.html#a53235c41a0781badc78c4be32d28749e">clear</a>(); <span class="comment">// not trigger, but direct IP match</span>
                    <a class="code" href="classI3.html#a871a4d88bc8957b9897746b03b54c853" title="Sends packet to matching IP address (used by sendPacket).">sendToNode</a>(msg);
                } <span class="keywordflow">else</span> {
                    <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a> key = idStack.<a class="code" href="classI3IdentifierStack.html#a4cac49ae77f9d10a09e78502a741c830" title="Returns a reference to the top of the stack.">peek</a>().<a class="code" href="classI3SubIdentifier.html#a4250f1068693c6e25be429d7417233a6" title="Returns the identifier.">getIdentifier</a>().<a class="code" href="classI3Identifier.html#a1efb17b551ff587a48f21f9ff609132a" title="Creates an OverlayKey from an identifier, to be used in the overlay underneath.">asOverlayKey</a>();
                    <a class="code" href="classBaseApp.html#a629659835cf4ccd86a995fd00e5f4794" title="Common API function: calls route-method in overlay.">callRoute</a>(key, msg);
                }
            }

        } <span class="keywordflow">else</span> {
            <span class="comment">/* some id found, send to all friends */</span>
            set&lt;I3Trigger&gt; &amp;s = <a class="code" href="classI3.html#a7023a721d63935a34f2be71c53cf4678" title="Table containing inserted triggers.">triggerTable</a>[*i3id];
            set&lt;I3Trigger&gt;::iterator it;

            <span class="keywordflow">for</span> (it = s.begin(); it != s.end(); it++) {
                <a class="code" href="classI3SendPacketMessage.html">I3SendPacketMessage</a> *newMsg;
                cPacket *dupMsg;

                newMsg = <span class="keyword">new</span> <a class="code" href="classI3SendPacketMessage.html">I3SendPacketMessage</a>();
                newMsg-&gt;<a class="code" href="classI3SendPacketMessage__Base.html#ae7240aa53907fdd86e41bb17d1a1e081">setIdentifierStack</a>(idStack); <span class="comment">/* create copy */</span>
                newMsg-&gt;<a class="code" href="classI3SendPacketMessage__Base.html#af0180ec364a7d5c110d62419e1f615b8">getIdentifierStack</a>().<a class="code" href="classI3IdentifierStack.html#aea6b94c0f8f1c52e5ea5a16f31927655" title="Pushes an I3Identifier.">push</a>(it-&gt;getIdentifierStack()); <span class="comment">/* append our stuff to the top of the stack */</span>
                dupMsg = check_and_cast&lt;cPacket*&gt;(msg-&gt;getEncapsulatedPacket()-&gt;<a class="code" href="classI3SendPacketMessage.html#a94adb703961d68d365efe5bdf8ef0fc1">dup</a>()); <span class="comment">/* dup msg */</span>
                newMsg-&gt;setBitLength(<a class="code" href="I3Message__m_8h.html#ae7fce2ecc74dbf0da3e01ffa4b7b4830">SEND_PACKET_L</a>(newMsg)); <span class="comment">/* stack size changed, recalculate */</span>
                newMsg-&gt;encapsulate(dupMsg);

                <a class="code" href="classI3SubIdentifier.html" title="A wrapper around either an I3IPAddress or an I3Identifier.">I3SubIdentifier</a> &amp;top = newMsg-&gt;<a class="code" href="classI3SendPacketMessage__Base.html#af0180ec364a7d5c110d62419e1f615b8">getIdentifierStack</a>().<a class="code" href="classI3IdentifierStack.html#a4cac49ae77f9d10a09e78502a741c830" title="Returns a reference to the top of the stack.">peek</a>();

                <span class="keywordflow">if</span> (top.<a class="code" href="classI3SubIdentifier.html#a8e2b2f6354e24556ac78e91e5e467510" title="Returns the subidentifier type.">getType</a>() == I3SubIdentifier::IPAddress) {
                    newMsg-&gt;<a class="code" href="classI3SendPacketMessage__Base.html#af2428341c58ccbf50df70f8806c654a3">setMatchedTrigger</a>(*it);
                    <a class="code" href="classI3.html#a871a4d88bc8957b9897746b03b54c853" title="Sends packet to matching IP address (used by sendPacket).">sendToNode</a>(newMsg);
                } <span class="keywordflow">else</span> {
                    <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a> key = top.<a class="code" href="classI3SubIdentifier.html#a4250f1068693c6e25be429d7417233a6" title="Returns the identifier.">getIdentifier</a>().<a class="code" href="classI3Identifier.html#a1efb17b551ff587a48f21f9ff609132a" title="Creates an OverlayKey from an identifier, to be used in the overlay underneath.">asOverlayKey</a>();
                    <a class="code" href="classBaseApp.html#a629659835cf4ccd86a995fd00e5f4794" title="Common API function: calls route-method in overlay.">callRoute</a>(key, newMsg);
                }
            }

            <span class="comment">/* copies sent, erase original */</span>
            <span class="keyword">delete</span> msg;

        }
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a11db4bb912682bba469be963d2b21ab9"></a><!-- doxytag: member="I3::sendQueryReply" ref="a11db4bb912682bba469be963d2b21ab9" args="(const I3Identifier &amp;id, const I3IPAddress &amp;add)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I3::sendQueryReply </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classI3Identifier.html">I3Identifier</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structI3IPAddress.html">I3IPAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>add</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Replies to a query of which server is responsible for the given identifier (this server). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>id</em>&nbsp;</td><td><a class="el" href="classI3.html" title="Main Omnet module for the implementation of Internet Indirection Infrastructure.">I3</a> identifier of the query </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>add</em>&nbsp;</td><td>IP address of requester </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="I3_8cc_source.html#l00302">302</a> of file <a class="el" href="I3_8cc_source.html">I3.cc</a>.</p>

<p>Referenced by <a class="el" href="I3_8cc_source.html#l00314">deliver()</a>, and <a class="el" href="I3_8cc_source.html#l00146">sendPacket()</a>.</p>

<p><div class="fragment"><pre class="fragment">                                                                      {
    <a class="code" href="classI3QueryReplyMessage.html">I3QueryReplyMessage</a> *pmsg;
    <a class="code" href="structI3IPAddress.html" title="A simple wrapper around an IPvXAddress and a port.">I3IPAddress</a> myAddress(<a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>(), par(<span class="stringliteral">&quot;serverPort&quot;</span>));

    pmsg = <span class="keyword">new</span> <a class="code" href="classI3QueryReplyMessage.html">I3QueryReplyMessage</a>();
    pmsg-&gt;setSource(myAddress);
    pmsg-&gt;setSendingTime(simTime());
    pmsg-&gt;setIdentifier(<span class="keywordtype">id</span>);
    pmsg-&gt;setBitLength(<a class="code" href="I3Message__m_8h.html#ac8918f6a6cd5bc2d0faa06f37017b06d">QUERY_REPLY_L</a>(pmsg));
    <a class="code" href="classBaseApp.html#a72acef51aa3b90493918056e7cd763fe" title="Sends a packet over UDP.">sendMessageToUDP</a>(add, pmsg);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a871a4d88bc8957b9897746b03b54c853"></a><!-- doxytag: member="I3::sendToNode" ref="a871a4d88bc8957b9897746b03b54c853" args="(I3SendPacketMessage *imsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I3::sendToNode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classI3SendPacketMessage.html">I3SendPacketMessage</a> *&nbsp;</td>
          <td class="paramname"> <em>imsg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sends packet to matching IP address (used by sendPacket). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>imsg</em>&nbsp;</td><td>Message to be sent </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="I3_8cc_source.html#l00137">137</a> of file <a class="el" href="I3_8cc_source.html">I3.cc</a>.</p>

<p>Referenced by <a class="el" href="I3_8cc_source.html#l00240">handleUDPMessage()</a>, and <a class="el" href="I3_8cc_source.html#l00146">sendPacket()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="structI3IPAddress.html" title="A simple wrapper around an IPvXAddress and a port.">I3IPAddress</a> address;
    <span class="comment">/* re-route message to a client node */</span>
    address = imsg-&gt;<a class="code" href="classI3SendPacketMessage__Base.html#af0180ec364a7d5c110d62419e1f615b8">getIdentifierStack</a>().<a class="code" href="classI3IdentifierStack.html#a4cac49ae77f9d10a09e78502a741c830" title="Returns a reference to the top of the stack.">peek</a>().<a class="code" href="classI3SubIdentifier.html#aca40c15817a73d7854b1a3d395eb1ee5" title="Returns the IP address.">getIPAddress</a>();
    imsg-&gt;<a class="code" href="classI3SendPacketMessage__Base.html#af0180ec364a7d5c110d62419e1f615b8">getIdentifierStack</a>().<a class="code" href="classI3IdentifierStack.html#a94c6bc20992b854ee53cbf9b1e20aae0" title="Pops a subidentifier from the top of the stack.">pop</a>(); <span class="comment">// pop ip address</span>
    <a class="code" href="classBaseApp.html#a72acef51aa3b90493918056e7cd763fe" title="Sends a packet over UDP.">sendMessageToUDP</a>(address, imsg);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae1809398bd78886675128005f3f46881"></a><!-- doxytag: member="I3::updateTriggerTableString" ref="ae1809398bd78886675128005f3f46881" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I3::updateTriggerTableString </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Updates TriggerTable's module display string. </p>

<p>Definition at line <a class="el" href="I3_8cc_source.html#l00420">420</a> of file <a class="el" href="I3_8cc_source.html">I3.cc</a>.</p>

<p>Referenced by <a class="el" href="I3_8cc_source.html#l00392">handleTimerEvent()</a>, <a class="el" href="I3_8cc_source.html#l00100">insertTrigger()</a>, and <a class="el" href="I3_8cc_source.html#l00120">removeTrigger()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="structTriggerTable.html" title="Omnetpp module to wrap around I3&amp;#39;s I3TriggerTable.">TriggerTable</a> *table = check_and_cast&lt;<a class="code" href="structTriggerTable.html" title="Omnetpp module to wrap around I3&amp;#39;s I3TriggerTable.">TriggerTable</a>*&gt;(getParentModule()-&gt;getSubmodule(<span class="stringliteral">&quot;triggerTable&quot;</span>));
    table-&gt;<a class="code" href="structTriggerTable.html#a392a20c86a7fec4cf9e8b55006f8854c">updateDisplayString</a>();
}
</pre></div></p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a84ecf53883b9dd3f8398e5f73419e901"></a><!-- doxytag: member="I3::byteDroppedPackets" ref="a84ecf53883b9dd3f8398e5f73419e901" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classI3.html#a84ecf53883b9dd3f8398e5f73419e901">I3::byteDroppedPackets</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="I3_8h_source.html#l00051">51</a> of file <a class="el" href="I3_8h_source.html">I3.h</a>.</p>

<p>Referenced by <a class="el" href="I3_8cc_source.html#l00431">finish()</a>, <a class="el" href="I3_8cc_source.html#l00363">initializeApp()</a>, and <a class="el" href="I3_8cc_source.html#l00146">sendPacket()</a>.</p>

</div>
</div>
<a class="anchor" id="ab949fc88728b48fb2d1b9d1edb5d4370"></a><!-- doxytag: member="I3::expirationTimer" ref="ab949fc88728b48fb2d1b9d1edb5d4370" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cMessage* <a class="el" href="classI3.html#ab949fc88728b48fb2d1b9d1edb5d4370">I3::expirationTimer</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Timer to check for trigger expiration. </p>

<p>Definition at line <a class="el" href="I3_8h_source.html#l00063">63</a> of file <a class="el" href="I3_8h_source.html">I3.h</a>.</p>

<p>Referenced by <a class="el" href="I3_8cc_source.html#l00392">handleTimerEvent()</a>, and <a class="el" href="I3_8cc_source.html#l00363">initializeApp()</a>.</p>

</div>
</div>
<a class="anchor" id="ad72725c7715eab8133eda76d9838fb5c"></a><!-- doxytag: member="I3::numDroppedPackets" ref="ad72725c7715eab8133eda76d9838fb5c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classI3.html#ad72725c7715eab8133eda76d9838fb5c">I3::numDroppedPackets</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Number of dropped packets. </p>

<p>Definition at line <a class="el" href="I3_8h_source.html#l00050">50</a> of file <a class="el" href="I3_8h_source.html">I3.h</a>.</p>

<p>Referenced by <a class="el" href="I3_8cc_source.html#l00431">finish()</a>, <a class="el" href="I3_8cc_source.html#l00363">initializeApp()</a>, and <a class="el" href="I3_8cc_source.html#l00146">sendPacket()</a>.</p>

</div>
</div>
<a class="anchor" id="af635c209fccea8f66869a7e23ba4005a"></a><!-- doxytag: member="I3::numForwardedBytes" ref="af635c209fccea8f66869a7e23ba4005a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classI3.html#af635c209fccea8f66869a7e23ba4005a">I3::numForwardedBytes</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="I3_8h_source.html#l00054">54</a> of file <a class="el" href="I3_8h_source.html">I3.h</a>.</p>

<p>Referenced by <a class="el" href="I3_8cc_source.html#l00231">forward()</a>, and <a class="el" href="I3_8cc_source.html#l00363">initializeApp()</a>.</p>

</div>
</div>
<a class="anchor" id="a73474922ca1ede3042b2fdc24da41552"></a><!-- doxytag: member="I3::numForwardedPackets" ref="a73474922ca1ede3042b2fdc24da41552" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classI3.html#a73474922ca1ede3042b2fdc24da41552">I3::numForwardedPackets</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="I3_8h_source.html#l00053">53</a> of file <a class="el" href="I3_8h_source.html">I3.h</a>.</p>

<p>Referenced by <a class="el" href="I3_8cc_source.html#l00231">forward()</a>, and <a class="el" href="I3_8cc_source.html#l00363">initializeApp()</a>.</p>

</div>
</div>
<a class="anchor" id="a7023a721d63935a34f2be71c53cf4678"></a><!-- doxytag: member="I3::triggerTable" ref="a7023a721d63935a34f2be71c53cf4678" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="I3_8h.html#a8472afa61e8b0e8b6900212558ff418e">I3TriggerTable</a> <a class="el" href="classI3.html#a7023a721d63935a34f2be71c53cf4678">I3::triggerTable</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Table containing inserted triggers. </p>

<p>Definition at line <a class="el" href="I3_8h_source.html#l00060">60</a> of file <a class="el" href="I3_8h_source.html">I3.h</a>.</p>

<p>Referenced by <a class="el" href="I3_8cc_source.html#l00063">findClosestMatch()</a>, <a class="el" href="I3_8cc_source.html#l00426">getTriggerTable()</a>, <a class="el" href="I3_8cc_source.html#l00392">handleTimerEvent()</a>, <a class="el" href="I3_8cc_source.html#l00100">insertTrigger()</a>, <a class="el" href="I3_8cc_source.html#l00120">removeTrigger()</a>, and <a class="el" href="I3_8cc_source.html#l00146">sendPacket()</a>.</p>

</div>
</div>
<a class="anchor" id="a6e1594f629d122f90fdab8b14a52cbc9"></a><!-- doxytag: member="I3::triggerTimeToLive" ref="a6e1594f629d122f90fdab8b14a52cbc9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classI3.html#a6e1594f629d122f90fdab8b14a52cbc9">I3::triggerTimeToLive</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Time before inserted triggers expire. </p>

<p>Definition at line <a class="el" href="I3_8h_source.html#l00057">57</a> of file <a class="el" href="I3_8h_source.html">I3.h</a>.</p>

<p>Referenced by <a class="el" href="I3_8cc_source.html#l00392">handleTimerEvent()</a>, and <a class="el" href="I3_8cc_source.html#l00363">initializeApp()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="I3_8h_source.html">I3.h</a></li>
<li><a class="el" href="I3_8cc_source.html">I3.cc</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Nov 3 2010 14:40:50 for OverSim by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
