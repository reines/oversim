<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OverSim: PubSubLobby Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#friends">Friends</a>  </div>
  <div class="headertitle">
<h1>PubSubLobby Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="PubSubLobby" --><!-- doxytag: inherits="BaseOverlay" -->
<p><code>#include &lt;<a class="el" href="PubSubLobby_8h_source.html">PubSubLobby.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for PubSubLobby:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classPubSubLobby.png" usemap="#PubSubLobby_map" alt=""/>
  <map id="PubSubLobby_map" name="PubSubLobby_map">
<area href="classBaseOverlay.html" alt="BaseOverlay" shape="rect" coords="115,112,220,136"/>
<area href="classBaseRpc.html" alt="BaseRpc" shape="rect" coords="0,56,105,80"/>
<area href="classBaseTcpSupport.html" alt="BaseTcpSupport" shape="rect" coords="115,56,220,80"/>
<area href="classTopologyVis.html" alt="TopologyVis" shape="rect" coords="230,56,335,80"/>
<area href="classRpcListener.html" alt="RpcListener" shape="rect" coords="0,0,105,24"/>
</map>
</div>

<p><a href="classPubSubLobby-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby_1_1ChildEntry.html">ChildEntry</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#a67576d993fe7e9df85ed6712b8831a1c">~PubSubLobby</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#a22c24c5e2c839123f68d3b567eebf16e">initializeOverlay</a> (int stage)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes derived-class-attributes.  <a href="#a22c24c5e2c839123f68d3b567eebf16e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#a75b9ef6a08fd634c142d6cbd7d6f0f68">finishOverlay</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">collects statistical data in derived class  <a href="#a75b9ef6a08fd634c142d6cbd7d6f0f68"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#ae6e5337366950b5812ea523a7feffc2c">handleUDPMessage</a> (<a class="el" href="classBaseOverlayMessage.html">BaseOverlayMessage</a> *msg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Processes messages from underlay.  <a href="#ae6e5337366950b5812ea523a7feffc2c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#a1e372f6bf585a978a0f5cdc2d9f95fde">handleTimerEvent</a> (cMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#a51b8bc62e387b0a7c6bda5dbaa0127b3">handleRpcCall</a> (<a class="el" href="classBaseCallMessage.html">BaseCallMessage</a> *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#a83a084e5bbb57faffc4f77c2e7ef9835">handleRpcResponse</a> (<a class="el" href="classBaseResponseMessage.html">BaseResponseMessage</a> *msg, cPolymorphic *context, int rpcId, simtime_t rtt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#a91d9df92cffdedecad2d9e442cfad7c0">handleRpcTimeout</a> (<a class="el" href="classBaseCallMessage.html">BaseCallMessage</a> *msg, const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;dest, cPolymorphic *context, int rpcId, const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;destKey)</td></tr>
<tr><td colspan="2"><h2><a name="pro-types"></a>
Protected Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::map<br class="typebreak"/>
&lt; <a class="el" href="classTransportAddress.html">TransportAddress</a>, <a class="el" href="classPubSubLobby_1_1ChildEntry.html">ChildEntry</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#a4bbae3eea2faaf9cf26e8c948bfc79da">PlayerMap</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::multimap&lt; int, <br class="typebreak"/>
<a class="el" href="classPubSubLobby_1_1ChildEntry.html">ChildEntry</a> *, std::greater<br class="typebreak"/>
&lt; int &gt; &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#a25fcdd57095ec6adf049f74c62e8ae35">PlayerRessourceMap</a></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#a24f71522cce60cb94a4826f80e3ffc09">handleJoin</a> (<a class="el" href="classPubSubJoinCall.html">PubSubJoinCall</a> *joinMsg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#a2bc7fb47f186e3b449c3352ca96a382b">handleHelpCall</a> (<a class="el" href="classPubSubHelpCall.html">PubSubHelpCall</a> *helpMsg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#a117ee7104c6edb0ab6213ba8e9cbdbbd">handleRespCall</a> (<a class="el" href="classPubSubResponsibleNodeCall.html">PubSubResponsibleNodeCall</a> *respCall)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#a6a7519bd3f516d3d0c5667c437c6b5b4">handleTakeOverResponse</a> (<a class="el" href="classPubSubTakeOverSubspaceResponse.html">PubSubTakeOverSubspaceResponse</a> *takeOverResp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#aac64ab2e9e6bd4d8e78e56d1872267dc">handleTakeOverTimeout</a> (<a class="el" href="classPubSubTakeOverSubspaceCall.html">PubSubTakeOverSubspaceCall</a> *takeOverCall, const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;oldNode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#ae3a56fb68d5829b09a9d9b50bb9a4f6c">handleHelpReleaseMessage</a> (<a class="el" href="classPubSubHelpReleaseMessage.html">PubSubHelpReleaseMessage</a> *helpRMsg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#af2002fd1c1b0c158e34f98433d148b69">replaceResponsibleNode</a> (int subspaceId, <a class="el" href="classNodeHandle.html">NodeHandle</a> respNode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#af2ba331a078883dc6182d6db6eeb8153">replaceResponsibleNode</a> (<a class="el" href="classPubSubSubspaceId.html">PubSubSubspaceId</a> subspaceId, <a class="el" href="classNodeHandle.html">NodeHandle</a> respNode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#ac30e0ce9761b523e995d638b78fd7129">failedNode</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;node)</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#a5379836b0bca001ade60571fc330c7ca">subspaceSize</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#a24a89046b61fd6ee93ca4da1cbf2869c">numSubspaces</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector<br class="typebreak"/>
&lt; <a class="el" href="classPubSubSubspaceLobby.html">PubSubSubspaceLobby</a> &gt; &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#ab2f87aabe4bd9986751cda300556c547">subspaces</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::list&lt; <a class="el" href="classPubSubHelpCall.html">PubSubHelpCall</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#aad3f4f6a35c2a161d444115ed0bbf69c">waitingForHelp</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPubSubLobby.html#a4bbae3eea2faaf9cf26e8c948bfc79da">PlayerMap</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#a09d7cf8803e638b57ecb2f42639c43f3">playerMap</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPubSubLobby.html#a25fcdd57095ec6adf049f74c62e8ae35">PlayerRessourceMap</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#ad2677c6bbc0fa6d3ee5f9d5e1052623d">playerRessourceMap</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#a70506df7e812aab27fe5c4aca469befd">numPubSubSignalingMessages</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#a6791b356638b40a2a06fc0b9c21fe08f">pubSubSignalingMessagesSize</a></td></tr>
<tr><td colspan="2"><h2><a name="friends"></a>
Friends</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPubSubLobby.html#a887fdcd4f32e4dd84921e6ffa82a5857">operator&lt;&lt;</a> (std::ostream &amp;o, const <a class="el" href="classPubSubLobby_1_1ChildEntry.html">ChildEntry</a> &amp;entry)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>

<p>Definition at line <a class="el" href="PubSubLobby_8h_source.html#l00036">36</a> of file <a class="el" href="PubSubLobby_8h_source.html">PubSubLobby.h</a>.</p>
<hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="a4bbae3eea2faaf9cf26e8c948bfc79da"></a><!-- doxytag: member="PubSubLobby::PlayerMap" ref="a4bbae3eea2faaf9cf26e8c948bfc79da" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;<a class="el" href="classTransportAddress.html">TransportAddress</a>, <a class="el" href="classPubSubLobby_1_1ChildEntry.html">ChildEntry</a>&gt; <a class="el" href="classPubSubLobby.html#a4bbae3eea2faaf9cf26e8c948bfc79da">PubSubLobby::PlayerMap</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PubSubLobby_8h_source.html#l00073">73</a> of file <a class="el" href="PubSubLobby_8h_source.html">PubSubLobby.h</a>.</p>

</div>
</div>
<a class="anchor" id="a25fcdd57095ec6adf049f74c62e8ae35"></a><!-- doxytag: member="PubSubLobby::PlayerRessourceMap" ref="a25fcdd57095ec6adf049f74c62e8ae35" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::multimap&lt;int, <a class="el" href="classPubSubLobby_1_1ChildEntry.html">ChildEntry</a>*, std::greater&lt;int&gt; &gt; <a class="el" href="classPubSubLobby.html#a25fcdd57095ec6adf049f74c62e8ae35">PubSubLobby::PlayerRessourceMap</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PubSubLobby_8h_source.html#l00075">75</a> of file <a class="el" href="PubSubLobby_8h_source.html">PubSubLobby.h</a>.</p>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a67576d993fe7e9df85ed6712b8831a1c"></a><!-- doxytag: member="PubSubLobby::~PubSubLobby" ref="a67576d993fe7e9df85ed6712b8831a1c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PubSubLobby::~PubSubLobby </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PubSubLobby_8cc_source.html#l00474">474</a> of file <a class="el" href="PubSubLobby_8cc_source.html">PubSubLobby.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
}
</pre></div></p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ac30e0ce9761b523e995d638b78fd7129"></a><!-- doxytag: member="PubSubLobby::failedNode" ref="ac30e0ce9761b523e995d638b78fd7129" args="(const TransportAddress &amp;node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PubSubLobby::failedNode </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>node</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PubSubLobby_8cc_source.html#l00414">414</a> of file <a class="el" href="PubSubLobby_8cc_source.html">PubSubLobby.cc</a>.</p>

<p>Referenced by <a class="el" href="PubSubLobby_8cc_source.html#l00324">handleTakeOverTimeout()</a>, and <a class="el" href="PubSubLobby_8cc_source.html#l00081">handleUDPMessage()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span>( node.<a class="code" href="classTransportAddress.html#a026e777c423ff2a0280edd2fa5472e74" title="indicates if TransportAddress is specified">isUnspecified</a>() ) <span class="keywordflow">return</span>;

    <span class="comment">// Find node in playerMap</span>
    PlayerMap::iterator playerIt = <a class="code" href="classPubSubLobby.html#a09d7cf8803e638b57ecb2f42639c43f3">playerMap</a>.find( node );
    <span class="keywordflow">if</span>( playerIt == <a class="code" href="classPubSubLobby.html#a09d7cf8803e638b57ecb2f42639c43f3">playerMap</a>.end() ){
        <span class="comment">// Player was already deleted</span>
        <span class="keywordflow">return</span>;
    }
    ChildEntry* respNodeEntry = &amp;(playerIt-&gt;second);

<span class="comment">// FIXME: only for debugging</span>
<span class="keywordflow">if</span>( <a class="code" href="classGlobalNodeListAccess.html" title="Gives access to the GlobalNodeList.">GlobalNodeListAccess</a>().get()-&gt;getPeerInfo( node ) ){
    opp_error(<span class="stringliteral">&quot;Trying to delete node that&#39;s still there...&quot;</span>);
}

    <span class="comment">// check if node was responsible for a subspace</span>
    set&lt;int&gt;::iterator dutyIt;
    <span class="keywordflow">for</span>( dutyIt = respNodeEntry-&gt;dutySet.begin(); dutyIt != respNodeEntry-&gt;dutySet.end(); ++dutyIt ){
        <a class="code" href="classPubSubSubspaceId.html">PubSubSubspaceId</a> subspaceId( *dutyIt, <a class="code" href="classPubSubLobby.html#a24a89046b61fd6ee93ca4da1cbf2869c">numSubspaces</a> );
        <a class="code" href="classPubSubSubspaceLobby.html">PubSubSubspaceLobby</a>&amp; subspace = <a class="code" href="classPubSubLobby.html#ab2f87aabe4bd9986751cda300556c547">subspaces</a>[subspaceId.getX()][subspaceId.getY()];
        <span class="keywordflow">if</span>( !subspace.<a class="code" href="classPubSubSubspace.html#a996b0242f4c47164d5ee2141755d8fb1">getResponsibleNode</a>().<a class="code" href="classNodeHandle.html#ab5136375a4548ced7c2014a73c8743c9" title="indicates if this NodeHandle is specified">isUnspecified</a>() &amp;&amp; node == subspace.<a class="code" href="classPubSubSubspace.html#a996b0242f4c47164d5ee2141755d8fb1">getResponsibleNode</a>() ){
            <span class="comment">// remove old responsible node</span>
            subspace.<a class="code" href="classPubSubSubspace.html#addf352c69955906dd9bda7e0a0c09dbb">setResponsibleNode</a>(<a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a>());

            <span class="comment">// wait for the backup node to claim subspace; if timer expires, waiting-flag will be reset</span>
            subspace.<a class="code" href="classPubSubSubspaceLobby.html#a74eb3b7110def6855302731c29323f79">waitingForRespNode</a> = <span class="keyword">true</span>;
            <a class="code" href="classPubSubTimer.html" title="Class generated from overlay/pubsubmmog/PubSubMessage.msg by opp_msgc.">PubSubTimer</a>* graceTimer = <span class="keyword">new</span> <a class="code" href="classPubSubTimer.html" title="Class generated from overlay/pubsubmmog/PubSubMessage.msg by opp_msgc.">PubSubTimer</a>(<span class="stringliteral">&quot;Grace timer for claiming subspace&quot;</span>);
            graceTimer-&gt;<a class="code" href="classPubSubTimer.html#a09825991200a1fa76d4cfc9549ac51f5">setType</a>( <a class="code" href="PubSubMessage__m_8h.html#ac87923fdb9d8348a9eb766921ec0e04cab0e89a4ee35934c7d563a3d44f906bef">PUBSUB_TAKEOVER_GRACE_TIME</a> );
            graceTimer-&gt;<a class="code" href="classPubSubTimer.html#a9b0ce83bc691ae0d4d35844c6aac569b">setSubspaceId</a>( subspace.<a class="code" href="classPubSubSubspace.html#a68c0be6c59e362d291533d74a65aa187">getId</a>().<a class="code" href="classPubSubSubspaceId.html#afb4d71a54d5337d65bb89c27e4d4938c">getId</a>() );
            scheduleAt( simTime() + 5, graceTimer ); <span class="comment">//FIXME: make it a parameter</span>
        }
    }

   <span class="comment">// delete node from backupList</span>
    pair&lt;PlayerRessourceMap::iterator, PlayerRessourceMap::iterator&gt; resRange;
    PlayerRessourceMap::iterator resIt;

    resRange = <a class="code" href="classPubSubLobby.html#ad2677c6bbc0fa6d3ee5f9d5e1052623d">playerRessourceMap</a>.equal_range( respNodeEntry-&gt;ressources );
    <span class="keywordflow">for</span>( resIt = resRange.first; resIt != resRange.second; ++resIt ){
        <span class="keywordflow">if</span>( resIt-&gt;second == respNodeEntry ){
            <a class="code" href="classPubSubLobby.html#ad2677c6bbc0fa6d3ee5f9d5e1052623d">playerRessourceMap</a>.erase( resIt );
            <span class="keywordflow">break</span>;
        }
    }
    <a class="code" href="classPubSubLobby.html#a09d7cf8803e638b57ecb2f42639c43f3">playerMap</a>.erase( playerIt );
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a75b9ef6a08fd634c142d6cbd7d6f0f68"></a><!-- doxytag: member="PubSubLobby::finishOverlay" ref="a75b9ef6a08fd634c142d6cbd7d6f0f68" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PubSubLobby::finishOverlay </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>collects statistical data in derived class </p>

<p>Reimplemented from <a class="el" href="classBaseOverlay.html#a8db85b9c706d04007154761d5a0cec16">BaseOverlay</a>.</p>

<p>Definition at line <a class="el" href="PubSubLobby_8cc_source.html#l00463">463</a> of file <a class="el" href="PubSubLobby_8cc_source.html">PubSubLobby.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    simtime_t time = <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a610799ebfbf64696c59b811870cc8300">calcMeasuredLifetime</a>(<a class="code" href="classBaseOverlay.html#af0eebaddea732ee4ab4d247c388e62bd" title="simtime when the node has been created">creationTime</a>);
    <span class="keywordflow">if</span> (time &lt; <a class="code" href="classGlobalStatistics.html#a169810c78519b271f7e32fdc7c9fc641" title="minimum useful measured lifetime in seconds">GlobalStatistics::MIN_MEASURED</a>) <span class="keywordflow">return</span>;

    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;PubSubLobby: Sent Signaling Messages/s&quot;</span>,
                                <a class="code" href="classPubSubLobby.html#a70506df7e812aab27fe5c4aca469befd">numPubSubSignalingMessages</a> / time);
    <a class="code" href="classBaseRpc.html#a9552ba3a2b09c83b3c561e65dab9f23d" title="pointer to GlobalStatistics module in this node">globalStatistics</a>-&gt;<a class="code" href="classGlobalStatistics.html#a6a697a0b67f344e4bc214159761f943a" title="Add a new value to the cStdDev container specified by the name parameter.">addStdDev</a>(<span class="stringliteral">&quot;PubSubLobby: Sent Signaling bytes/s&quot;</span>,
                                <a class="code" href="classPubSubLobby.html#a6791b356638b40a2a06fc0b9c21fe08f">pubSubSignalingMessagesSize</a> / time);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2bc7fb47f186e3b449c3352ca96a382b"></a><!-- doxytag: member="PubSubLobby::handleHelpCall" ref="a2bc7fb47f186e3b449c3352ca96a382b" args="(PubSubHelpCall *helpMsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PubSubLobby::handleHelpCall </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPubSubHelpCall.html">PubSubHelpCall</a> *&nbsp;</td>
          <td class="paramname"> <em>helpMsg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PubSubLobby_8cc_source.html#l00226">226</a> of file <a class="el" href="PubSubLobby_8cc_source.html">PubSubLobby.cc</a>.</p>

<p>Referenced by <a class="el" href="PubSubLobby_8cc_source.html#l00096">handleRpcCall()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="comment">// A node needs help! Give him the handle of the node with the most ressources...</span>
    <span class="keyword">const</span> <a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a>&amp; src = helpMsg-&gt;<a class="code" href="classBaseRpcMessage.html#ada3e122125cfb5acc7350277ca69c45a">getSrcNode</a>();
    <span class="keywordtype">int</span> subspaceId = helpMsg-&gt;<a class="code" href="classPubSubHelpCall.html#a355bda3c231e82b82b31b9ac1a667745">getSubspaceId</a>();
    PlayerRessourceMap::iterator it;
    <span class="keywordflow">for</span>( it = <a class="code" href="classPubSubLobby.html#ad2677c6bbc0fa6d3ee5f9d5e1052623d">playerRessourceMap</a>.begin(); it != <a class="code" href="classPubSubLobby.html#ad2677c6bbc0fa6d3ee5f9d5e1052623d">playerRessourceMap</a>.end(); ++it ){
        <span class="keywordflow">if</span>( it-&gt;second-&gt;handle != src &amp;&amp;
               it-&gt;second-&gt;dutySet.find( subspaceId ) == it-&gt;second-&gt;dutySet.end() &amp;&amp;
               it-&gt;second-&gt;ressources &gt; 1 ){
            <span class="keywordflow">break</span>;
        }
    }

    <span class="comment">// No suitable node found!</span>
    <span class="keywordflow">if</span>( it == <a class="code" href="classPubSubLobby.html#ad2677c6bbc0fa6d3ee5f9d5e1052623d">playerRessourceMap</a>.end() ){
        <a class="code" href="classPubSubLobby.html#aad3f4f6a35c2a161d444115ed0bbf69c">waitingForHelp</a>.push_back( helpMsg );
        <span class="keywordflow">return</span>;
    }

    <span class="comment">// decrease ressources</span>
    ChildEntry* child = it-&gt;second;
    child-&gt;ressources -= ( helpMsg-&gt;<a class="code" href="classPubSubHelpCall.html#a0932e05108f01dae426028453373165f">getHelpType</a>() == PUBSUB_BACKUP ) ? 2 : 1; <span class="comment">// FIXME: make it a parameter</span>
    child-&gt;dutySet.insert( subspaceId );
    <a class="code" href="classPubSubLobby.html#ad2677c6bbc0fa6d3ee5f9d5e1052623d">playerRessourceMap</a>.erase( it );
    <a class="code" href="classPubSubLobby.html#ad2677c6bbc0fa6d3ee5f9d5e1052623d">playerRessourceMap</a>.insert( make_pair(child-&gt;ressources, child) );

    <span class="comment">// Send handle to requesting node</span>
    <a class="code" href="classPubSubHelpResponse.html" title="Class generated from overlay/pubsubmmog/PubSubMessage.msg by opp_msgc.">PubSubHelpResponse</a>* helpResp = <span class="keyword">new</span> <a class="code" href="classPubSubHelpResponse.html" title="Class generated from overlay/pubsubmmog/PubSubMessage.msg by opp_msgc.">PubSubHelpResponse</a>(<span class="stringliteral">&quot;Ask him to help you&quot;</span>);
    helpResp-&gt;<a class="code" href="classPubSubHelpResponse.html#a429b316bb8b01b1bd29007fef33682e6">setSubspaceId</a>( subspaceId );
    helpResp-&gt;<a class="code" href="classPubSubHelpResponse.html#a2436b73ce3d8438ecf36a2bcad4d7ef7">setHelpType</a>( helpMsg-&gt;<a class="code" href="classPubSubHelpCall.html#a0932e05108f01dae426028453373165f">getHelpType</a>() );
    helpResp-&gt;<a class="code" href="classPubSubHelpResponse.html#ac169d54cf6ae2b7d72d9c56777815cf3">setNode</a>( child-&gt;handle );
    helpResp-&gt;setBitLength( <a class="code" href="PubSubMessage__m_8h.html#aa5cea757d38ff4d8ff69447f73c7dae0">PUBSUB_HELPRESPONSE_L</a>( helpResp ));
    <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(
            ++<a class="code" href="classPubSubLobby.html#a70506df7e812aab27fe5c4aca469befd">numPubSubSignalingMessages</a>;
            <a class="code" href="classPubSubLobby.html#a6791b356638b40a2a06fc0b9c21fe08f">pubSubSignalingMessagesSize</a> += helpResp-&gt;getByteLength()
            );
    <a class="code" href="classBaseRpc.html#adc06091d348c98a5efbf54fe0afe8747" title="Send Remote-Procedure response message and deletes call message.">sendRpcResponse</a>( helpMsg, helpResp );
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae3a56fb68d5829b09a9d9b50bb9a4f6c"></a><!-- doxytag: member="PubSubLobby::handleHelpReleaseMessage" ref="ae3a56fb68d5829b09a9d9b50bb9a4f6c" args="(PubSubHelpReleaseMessage *helpRMsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PubSubLobby::handleHelpReleaseMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPubSubHelpReleaseMessage.html">PubSubHelpReleaseMessage</a> *&nbsp;</td>
          <td class="paramname"> <em>helpRMsg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PubSubLobby_8cc_source.html#l00331">331</a> of file <a class="el" href="PubSubLobby_8cc_source.html">PubSubLobby.cc</a>.</p>

<p>Referenced by <a class="el" href="PubSubLobby_8cc_source.html#l00081">handleUDPMessage()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    PlayerMap::iterator playerIt = <a class="code" href="classPubSubLobby.html#a09d7cf8803e638b57ecb2f42639c43f3">playerMap</a>.find( helpRMsg-&gt;<a class="code" href="classPubSubHelpReleaseMessage.html#a181dab074ca0dbaa3bc70f45602228ec">getNode</a>() );
    <span class="keywordflow">if</span>( playerIt == <a class="code" href="classPubSubLobby.html#a09d7cf8803e638b57ecb2f42639c43f3">playerMap</a>.end() ){
        <span class="comment">// Player was already deleted</span>
        <span class="keywordflow">return</span>;
    }
    ChildEntry* nodeEntry = &amp;(playerIt-&gt;second);

    <span class="comment">// remove subspace from node&#39;s duty set</span>
    nodeEntry-&gt;dutySet.erase( helpRMsg-&gt;<a class="code" href="classPubSubHelpReleaseMessage.html#a2f8ef353aa9e7d9a8842c95386d57751">getSubspaceId</a>() );

    <span class="comment">// Increase node&#39;s ressources</span>
    pair&lt;PlayerRessourceMap::iterator, PlayerRessourceMap::iterator&gt; resRange;
    PlayerRessourceMap::iterator resIt;
    resRange = <a class="code" href="classPubSubLobby.html#ad2677c6bbc0fa6d3ee5f9d5e1052623d">playerRessourceMap</a>.equal_range( nodeEntry-&gt;ressources );
    <span class="keywordflow">for</span>( resIt = resRange.first; resIt != resRange.second; ++resIt ){
        <span class="keywordflow">if</span>( resIt-&gt;second == nodeEntry ){
            <a class="code" href="classPubSubLobby.html#ad2677c6bbc0fa6d3ee5f9d5e1052623d">playerRessourceMap</a>.erase( resIt );
            <span class="keywordflow">break</span>;
        }
    }
    nodeEntry-&gt;ressources += 1; <span class="comment">// FIXME: make it a parameter</span>
    <a class="code" href="classPubSubLobby.html#ad2677c6bbc0fa6d3ee5f9d5e1052623d">playerRessourceMap</a>.insert( make_pair(nodeEntry-&gt;ressources, nodeEntry) );
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a24f71522cce60cb94a4826f80e3ffc09"></a><!-- doxytag: member="PubSubLobby::handleJoin" ref="a24f71522cce60cb94a4826f80e3ffc09" args="(PubSubJoinCall *joinMsg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PubSubLobby::handleJoin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPubSubJoinCall.html">PubSubJoinCall</a> *&nbsp;</td>
          <td class="paramname"> <em>joinMsg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PubSubLobby_8cc_source.html#l00138">138</a> of file <a class="el" href="PubSubLobby_8cc_source.html">PubSubLobby.cc</a>.</p>

<p>Referenced by <a class="el" href="PubSubLobby_8cc_source.html#l00096">handleRpcCall()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="comment">// Insert node in the queue of possible backup nodes</span>
    ChildEntry e;
    e.handle = joinMsg-&gt;<a class="code" href="classBaseRpcMessage.html#ada3e122125cfb5acc7350277ca69c45a">getSrcNode</a>();
    e.ressources = joinMsg-&gt;<a class="code" href="classPubSubJoinCall.html#af6961e433a8374b44ac3e90b5cc87646">getRessources</a>();

    pair&lt;PlayerMap::iterator, bool&gt; inserter;
    inserter = <a class="code" href="classPubSubLobby.html#a09d7cf8803e638b57ecb2f42639c43f3">playerMap</a>.insert( make_pair( e.handle, e ));
    ChildEntry* childEntry = &amp;(inserter.first-&gt;second);
    <span class="comment">//pair&lt;PlayerRessourceMap::iterator, bool&gt; rInserter;</span>
    <span class="comment">//rInserter = playerRessourceMap.insert( make_pair( e.ressources, childEntry ));</span>
    PlayerRessourceMap::iterator rInserter;
    rInserter = <a class="code" href="classPubSubLobby.html#ad2677c6bbc0fa6d3ee5f9d5e1052623d">playerRessourceMap</a>.insert( make_pair( e.ressources, childEntry ));
    <span class="keywordtype">bool</span> insertedAtBegin = rInserter == <a class="code" href="classPubSubLobby.html#ad2677c6bbc0fa6d3ee5f9d5e1052623d">playerRessourceMap</a>.begin();

    <span class="comment">// send answer with responsible node</span>
    <a class="code" href="classPubSubJoinResponse.html" title="Class generated from overlay/pubsubmmog/PubSubMessage.msg by opp_msgc.">PubSubJoinResponse</a>* joinResp = <span class="keyword">new</span> <a class="code" href="classPubSubJoinResponse.html" title="Class generated from overlay/pubsubmmog/PubSubMessage.msg by opp_msgc.">PubSubJoinResponse</a>( <span class="stringliteral">&quot;Join Response&quot;</span>);
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x = (<span class="keywordtype">unsigned</span> int) (joinMsg-&gt;<a class="code" href="classPubSubJoinCall.html#ab168f5cfcd6d2e8472c76ac946e20f92">getPosition</a>().<a class="code" href="classVector2D.html#ac5c4e553815737aa24bec8281270178f">x</a> / <a class="code" href="classPubSubLobby.html#a5379836b0bca001ade60571fc330c7ca">subspaceSize</a>);
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y = (<span class="keywordtype">unsigned</span> int) (joinMsg-&gt;<a class="code" href="classPubSubJoinCall.html#ab168f5cfcd6d2e8472c76ac946e20f92">getPosition</a>().<a class="code" href="classVector2D.html#ac38d0179cfe74c30fee290a703ab209a">y</a> / <a class="code" href="classPubSubLobby.html#a5379836b0bca001ade60571fc330c7ca">subspaceSize</a>);
    <a class="code" href="classPubSubSubspaceLobby.html">PubSubSubspaceLobby</a>&amp; subspace = <a class="code" href="classPubSubLobby.html#ab2f87aabe4bd9986751cda300556c547">subspaces</a>[x][y];
    <a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a> respNode = subspace.<a class="code" href="classPubSubSubspace.html#a996b0242f4c47164d5ee2141755d8fb1">getResponsibleNode</a>();
    joinResp-&gt;<a class="code" href="classPubSubJoinResponse.html#aa53b98af1bd10266edf053eff7cb2e41">setResponsibleNode</a>( respNode );
    joinResp-&gt;setBitLength( <a class="code" href="PubSubMessage__m_8h.html#a6a72ae762a9911847d32136060e2ec4e">PUBSUB_JOINRESPONSE_L</a>( joinResp ));
    <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(
            ++<a class="code" href="classPubSubLobby.html#a70506df7e812aab27fe5c4aca469befd">numPubSubSignalingMessages</a>;
            <a class="code" href="classPubSubLobby.html#a6791b356638b40a2a06fc0b9c21fe08f">pubSubSignalingMessagesSize</a> += joinResp-&gt;getByteLength()
            );
    <a class="code" href="classBaseRpc.html#adc06091d348c98a5efbf54fe0afe8747" title="Send Remote-Procedure response message and deletes call message.">sendRpcResponse</a>( joinMsg, joinResp );

    <span class="keywordflow">if</span>( respNode.<a class="code" href="classNodeHandle.html#ab5136375a4548ced7c2014a73c8743c9" title="indicates if this NodeHandle is specified">isUnspecified</a>() &amp;&amp; !subspace.<a class="code" href="classPubSubSubspaceLobby.html#a74eb3b7110def6855302731c29323f79">waitingForRespNode</a>) {
        <span class="comment">// respNode is unknown, create new...</span>
        <span class="comment">// TODO: refactor: make a funktion out of this...</span>
        <a class="code" href="classPubSubTakeOverSubspaceCall.html" title="Class generated from overlay/pubsubmmog/PubSubMessage.msg by opp_msgc.">PubSubTakeOverSubspaceCall</a>* toCall = <span class="keyword">new</span> <a class="code" href="classPubSubTakeOverSubspaceCall.html" title="Class generated from overlay/pubsubmmog/PubSubMessage.msg by opp_msgc.">PubSubTakeOverSubspaceCall</a>( <span class="stringliteral">&quot;Take over subspace&quot;</span>);
        toCall-&gt;<a class="code" href="classPubSubTakeOverSubspaceCall.html#aed7eaaf73ae573ce7de2c74b12147d75">setSubspacePos</a>( <a class="code" href="classVector2D.html">Vector2D</a>(x, y) );

        ChildEntry* child = <a class="code" href="classPubSubLobby.html#ad2677c6bbc0fa6d3ee5f9d5e1052623d">playerRessourceMap</a>.begin()-&gt;second;
        toCall-&gt;setBitLength( <a class="code" href="PubSubMessage__m_8h.html#a98a4918aeaf248642af3549108763ab4">PUBSUB_TAKEOVERSUBSPACECALL_L</a>( toCall ));
        <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(
                ++<a class="code" href="classPubSubLobby.html#a70506df7e812aab27fe5c4aca469befd">numPubSubSignalingMessages</a>;
                pubSubSignalingMessagesSize += toCall-&gt;getByteLength()
                );
        <a class="code" href="classBaseRpc.html#ac128e0ff0d09f81b652f7d3e00ce9441" title="Sends a Remote-Procedure-Call message to the underlay ">sendUdpRpcCall</a>( child-&gt;handle, toCall );

        <a class="code" href="classPubSubLobby.html#ad2677c6bbc0fa6d3ee5f9d5e1052623d">playerRessourceMap</a>.erase( <a class="code" href="classPubSubLobby.html#ad2677c6bbc0fa6d3ee5f9d5e1052623d">playerRessourceMap</a>.begin() );
        child-&gt;dutySet.insert( subspace.<a class="code" href="classPubSubSubspace.html#a68c0be6c59e362d291533d74a65aa187">getId</a>().<a class="code" href="classPubSubSubspaceId.html#afb4d71a54d5337d65bb89c27e4d4938c">getId</a>() );
        child-&gt;ressources-=2; <span class="comment">// XXX FIXME: make it a parameter...</span>
        <span class="keywordflow">if</span>( insertedAtBegin ){
            rInserter = <a class="code" href="classPubSubLobby.html#ad2677c6bbc0fa6d3ee5f9d5e1052623d">playerRessourceMap</a>.insert( make_pair(child-&gt;ressources, child) );
        } <span class="keywordflow">else</span> {
            <a class="code" href="classPubSubLobby.html#ad2677c6bbc0fa6d3ee5f9d5e1052623d">playerRessourceMap</a>.insert( make_pair(child-&gt;ressources, child) );
        }

        subspace.<a class="code" href="classPubSubSubspaceLobby.html#a74eb3b7110def6855302731c29323f79">waitingForRespNode</a> = <span class="keyword">true</span>;
    }

    <span class="comment">// New node is out of luck: he gets to help all waiting nodes as long as he has ressources left</span>
    <span class="keywordflow">if</span>( <a class="code" href="classPubSubLobby.html#aad3f4f6a35c2a161d444115ed0bbf69c">waitingForHelp</a>.size() &gt; 0 ) {
        std::list&lt;PubSubHelpCall*&gt;::iterator it = <a class="code" href="classPubSubLobby.html#aad3f4f6a35c2a161d444115ed0bbf69c">waitingForHelp</a>.begin();
        <span class="keywordflow">while</span>( it != <a class="code" href="classPubSubLobby.html#aad3f4f6a35c2a161d444115ed0bbf69c">waitingForHelp</a>.end() ) {
            <span class="comment">// Insert subspace into node&#39;s dutySet</span>
            <span class="keywordflow">if</span>( childEntry-&gt;dutySet.insert( (*it)-&gt;getSubspaceId() ).second ){
                <span class="comment">// If it was not already there (due to duplicate HelpCalls because of retransmissions),</span>
                <span class="comment">// decrease ressources</span>
                childEntry-&gt;ressources -= ( (*it)-&gt;getHelpType() == PUBSUB_BACKUP ) ? 2 : 1; <span class="comment">// FIXME: make it a parameter</span>
            }

            <a class="code" href="classPubSubHelpResponse.html" title="Class generated from overlay/pubsubmmog/PubSubMessage.msg by opp_msgc.">PubSubHelpResponse</a>* helpResp = <span class="keyword">new</span> <a class="code" href="classPubSubHelpResponse.html" title="Class generated from overlay/pubsubmmog/PubSubMessage.msg by opp_msgc.">PubSubHelpResponse</a>(<span class="stringliteral">&quot;Ask him to help you&quot;</span>);
            helpResp-&gt;<a class="code" href="classPubSubHelpResponse.html#a429b316bb8b01b1bd29007fef33682e6">setSubspaceId</a>( (*it)-&gt;getSubspaceId() );
            helpResp-&gt;<a class="code" href="classBaseOverlayMessage.html#a1441ce272062923bae9d821ac35ed7cf">setType</a>( (*it)-&gt;getType() );
            helpResp-&gt;<a class="code" href="classPubSubHelpResponse.html#ac169d54cf6ae2b7d72d9c56777815cf3">setNode</a>( e.handle );
            helpResp-&gt;setBitLength( <a class="code" href="PubSubMessage__m_8h.html#aa5cea757d38ff4d8ff69447f73c7dae0">PUBSUB_HELPRESPONSE_L</a>( helpResp ));
            <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(
                    ++<a class="code" href="classPubSubLobby.html#a70506df7e812aab27fe5c4aca469befd">numPubSubSignalingMessages</a>;
                    pubSubSignalingMessagesSize += helpResp-&gt;getByteLength()
                    );
            <a class="code" href="classBaseRpc.html#adc06091d348c98a5efbf54fe0afe8747" title="Send Remote-Procedure response message and deletes call message.">sendRpcResponse</a>( *it, helpResp );

            <a class="code" href="classPubSubLobby.html#aad3f4f6a35c2a161d444115ed0bbf69c">waitingForHelp</a>.erase( it++ );

            <span class="keywordflow">if</span>( childEntry-&gt;ressources &lt;= 0 ) <span class="keywordflow">break</span>; <span class="comment">// FIXME: clean up duplicate calls!</span>
        }
        <span class="comment">// Fix ressource map entry</span>
        <a class="code" href="classPubSubLobby.html#ad2677c6bbc0fa6d3ee5f9d5e1052623d">playerRessourceMap</a>.erase( rInserter );
        <a class="code" href="classPubSubLobby.html#ad2677c6bbc0fa6d3ee5f9d5e1052623d">playerRessourceMap</a>.insert( make_pair(childEntry-&gt;ressources, childEntry) );
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a117ee7104c6edb0ab6213ba8e9cbdbbd"></a><!-- doxytag: member="PubSubLobby::handleRespCall" ref="a117ee7104c6edb0ab6213ba8e9cbdbbd" args="(PubSubResponsibleNodeCall *respCall)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PubSubLobby::handleRespCall </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPubSubResponsibleNodeCall.html">PubSubResponsibleNodeCall</a> *&nbsp;</td>
          <td class="paramname"> <em>respCall</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PubSubLobby_8cc_source.html#l00266">266</a> of file <a class="el" href="PubSubLobby_8cc_source.html">PubSubLobby.cc</a>.</p>

<p>Referenced by <a class="el" href="PubSubLobby_8cc_source.html#l00096">handleRpcCall()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x = (<span class="keywordtype">unsigned</span> int) respCall-&gt;<a class="code" href="classPubSubResponsibleNodeCall.html#aa6f4d981e7c540d77c40337bbf4e34a1">getSubspacePos</a>().<a class="code" href="classVector2D.html#ac5c4e553815737aa24bec8281270178f">x</a>;
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y = (<span class="keywordtype">unsigned</span> int) respCall-&gt;<a class="code" href="classPubSubResponsibleNodeCall.html#aa6f4d981e7c540d77c40337bbf4e34a1">getSubspacePos</a>().<a class="code" href="classVector2D.html#ac38d0179cfe74c30fee290a703ab209a">y</a>;
    <a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a> respNode = <a class="code" href="classPubSubLobby.html#ab2f87aabe4bd9986751cda300556c547">subspaces</a>[x][y].getResponsibleNode();
    <span class="keywordflow">if</span>( !respNode.<a class="code" href="classNodeHandle.html#ab5136375a4548ced7c2014a73c8743c9" title="indicates if this NodeHandle is specified">isUnspecified</a>() ) {
        <a class="code" href="classPubSubSubspaceId.html">PubSubSubspaceId</a> region( x, y, <a class="code" href="classPubSubLobby.html#a24a89046b61fd6ee93ca4da1cbf2869c">numSubspaces</a>);

        <a class="code" href="classPubSubResponsibleNodeResponse.html" title="Class generated from overlay/pubsubmmog/PubSubMessage.msg by opp_msgc.">PubSubResponsibleNodeResponse</a>* msg = <span class="keyword">new</span> <a class="code" href="classPubSubResponsibleNodeResponse.html" title="Class generated from overlay/pubsubmmog/PubSubMessage.msg by opp_msgc.">PubSubResponsibleNodeResponse</a>( <span class="stringliteral">&quot;ResponsibleNode Response&quot;</span>);
        msg-&gt;<a class="code" href="classPubSubResponsibleNodeResponse.html#abb9c4caac4074e4b07b8a7fe7751b42f">setResponsibleNode</a>( respNode );
        msg-&gt;<a class="code" href="classPubSubResponsibleNodeResponse.html#a73b835409428a48054aea30164049e8a">setSubspaceId</a>( region.getId() );
        msg-&gt;setBitLength( <a class="code" href="PubSubMessage__m_8h.html#a83b307ff36cba03e2513b9b187545f7e">PUBSUB_RESPONSIBLENODERESPONSE_L</a>( msg ));
        <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(
                ++<a class="code" href="classPubSubLobby.html#a70506df7e812aab27fe5c4aca469befd">numPubSubSignalingMessages</a>;
                <a class="code" href="classPubSubLobby.html#a6791b356638b40a2a06fc0b9c21fe08f">pubSubSignalingMessagesSize</a> += msg-&gt;getByteLength()
                );
        <a class="code" href="classBaseRpc.html#adc06091d348c98a5efbf54fe0afe8747" title="Send Remote-Procedure response message and deletes call message.">sendRpcResponse</a>( respCall, msg );
    } <span class="keywordflow">else</span> {
        <span class="comment">// no responsible node for subspace known.</span>
        <span class="comment">// push call to list of waiting nodes ...</span>
        <a class="code" href="classPubSubSubspaceLobby.html">PubSubSubspaceLobby</a>&amp; subspace = <a class="code" href="classPubSubLobby.html#ab2f87aabe4bd9986751cda300556c547">subspaces</a>[x][y];
        subspace.<a class="code" href="classPubSubSubspaceLobby.html#a11e3db4ea089dcb43883107a47aef396">waitingNodes</a>.push_back( respCall );

        <span class="keywordflow">if</span> (!subspace.<a class="code" href="classPubSubSubspaceLobby.html#a74eb3b7110def6855302731c29323f79">waitingForRespNode</a>) {
            <span class="comment">// ... and ask a node to take over the subspace</span>
            <a class="code" href="classPubSubTakeOverSubspaceCall.html" title="Class generated from overlay/pubsubmmog/PubSubMessage.msg by opp_msgc.">PubSubTakeOverSubspaceCall</a>* msg = <span class="keyword">new</span> <a class="code" href="classPubSubTakeOverSubspaceCall.html" title="Class generated from overlay/pubsubmmog/PubSubMessage.msg by opp_msgc.">PubSubTakeOverSubspaceCall</a>( <span class="stringliteral">&quot;Take over subspace&quot;</span>);
            msg-&gt;<a class="code" href="classPubSubTakeOverSubspaceCall.html#aed7eaaf73ae573ce7de2c74b12147d75">setSubspacePos</a>( <a class="code" href="classVector2D.html">Vector2D</a>( x, y) );

            ChildEntry* child = <a class="code" href="classPubSubLobby.html#ad2677c6bbc0fa6d3ee5f9d5e1052623d">playerRessourceMap</a>.begin()-&gt;second;
            msg-&gt;setBitLength( <a class="code" href="PubSubMessage__m_8h.html#a98a4918aeaf248642af3549108763ab4">PUBSUB_TAKEOVERSUBSPACECALL_L</a>( msg ));
            <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(
                    ++<a class="code" href="classPubSubLobby.html#a70506df7e812aab27fe5c4aca469befd">numPubSubSignalingMessages</a>;
                    pubSubSignalingMessagesSize += msg-&gt;getByteLength()
                    );
            <a class="code" href="classBaseRpc.html#ac128e0ff0d09f81b652f7d3e00ce9441" title="Sends a Remote-Procedure-Call message to the underlay ">sendUdpRpcCall</a>( child-&gt;handle, msg );

            <a class="code" href="classPubSubLobby.html#ad2677c6bbc0fa6d3ee5f9d5e1052623d">playerRessourceMap</a>.erase( <a class="code" href="classPubSubLobby.html#ad2677c6bbc0fa6d3ee5f9d5e1052623d">playerRessourceMap</a>.begin() );
            child-&gt;dutySet.insert( subspace.<a class="code" href="classPubSubSubspace.html#a68c0be6c59e362d291533d74a65aa187">getId</a>().<a class="code" href="classPubSubSubspaceId.html#afb4d71a54d5337d65bb89c27e4d4938c">getId</a>() );
            <span class="comment">// Decrease ressources. Note: the ressources are decreased by the cost of an &quot;backup&quot; node</span>
            <span class="comment">// The rest will be decreased when the new responsible answeres the takeover call</span>
            child-&gt;ressources-=1; <span class="comment">// FIXME: make it a parameter...</span>
            <a class="code" href="classPubSubLobby.html#ad2677c6bbc0fa6d3ee5f9d5e1052623d">playerRessourceMap</a>.insert( make_pair(child-&gt;ressources, child) );

            subspace.<a class="code" href="classPubSubSubspaceLobby.html#a74eb3b7110def6855302731c29323f79">waitingForRespNode</a> = <span class="keyword">true</span>;
        }
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a51b8bc62e387b0a7c6bda5dbaa0127b3"></a><!-- doxytag: member="PubSubLobby::handleRpcCall" ref="a51b8bc62e387b0a7c6bda5dbaa0127b3" args="(BaseCallMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PubSubLobby::handleRpcCall </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBaseCallMessage.html">BaseCallMessage</a> *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PubSubLobby_8cc_source.html#l00096">96</a> of file <a class="el" href="PubSubLobby_8cc_source.html">PubSubLobby.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="comment">// delegate messages</span>
    <a class="code" href="RpcMacros_8h.html#aa75b135e279b574267e1a7dc4ab79da4" title="Marks the beginning of a Remote-Procedure-Call Switch block.">RPC_SWITCH_START</a>( msg )
    <a class="code" href="RpcMacros_8h.html#ad81d44e9bc59d2fb2cfcacc4d5ecda35" title="Declares a RPC method delegation.">RPC_DELEGATE</a>( PubSubJoin, <a class="code" href="classPubSubLobby.html#a24f71522cce60cb94a4826f80e3ffc09">handleJoin</a> );
    <a class="code" href="RpcMacros_8h.html#ad81d44e9bc59d2fb2cfcacc4d5ecda35" title="Declares a RPC method delegation.">RPC_DELEGATE</a>( PubSubHelp, <a class="code" href="classPubSubLobby.html#a2bc7fb47f186e3b449c3352ca96a382b">handleHelpCall</a> );
    <a class="code" href="RpcMacros_8h.html#ad81d44e9bc59d2fb2cfcacc4d5ecda35" title="Declares a RPC method delegation.">RPC_DELEGATE</a>( PubSubResponsibleNode, <a class="code" href="classPubSubLobby.html#a117ee7104c6edb0ab6213ba8e9cbdbbd">handleRespCall</a> );
    <a class="code" href="RpcMacros_8h.html#a29a8a3f21e67ecb25f58608a54df5191" title="Marks the end of a Remote-Procedure-Call Switch block.">RPC_SWITCH_END</a>( )

    return <a class="code" href="RpcMacros_8h.html#aa5e964b7c7129c0943237a786e455e9a">RPC_HANDLED</a>;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a83a084e5bbb57faffc4f77c2e7ef9835"></a><!-- doxytag: member="PubSubLobby::handleRpcResponse" ref="a83a084e5bbb57faffc4f77c2e7ef9835" args="(BaseResponseMessage *msg, cPolymorphic *context, int rpcId, simtime_t rtt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PubSubLobby::handleRpcResponse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBaseResponseMessage.html">BaseResponseMessage</a> *&nbsp;</td>
          <td class="paramname"> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cPolymorphic *&nbsp;</td>
          <td class="paramname"> <em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rpcId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">simtime_t&nbsp;</td>
          <td class="paramname"> <em>rtt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PubSubLobby_8cc_source.html#l00108">108</a> of file <a class="el" href="PubSubLobby_8cc_source.html">PubSubLobby.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="RpcMacros_8h.html#aa75b135e279b574267e1a7dc4ab79da4" title="Marks the beginning of a Remote-Procedure-Call Switch block.">RPC_SWITCH_START</a>(msg);
    <a class="code" href="RpcMacros_8h.html#a0394d2dc4f9f1e15d7e99c9f43da10c7">RPC_ON_RESPONSE</a>( PubSubTakeOverSubspace ) {
        <a class="code" href="classPubSubLobby.html#a6a7519bd3f516d3d0c5667c437c6b5b4">handleTakeOverResponse</a>( _PubSubTakeOverSubspaceResponse );
        <span class="keywordflow">break</span>;
    }
    <a class="code" href="RpcMacros_8h.html#a29a8a3f21e67ecb25f58608a54df5191" title="Marks the end of a Remote-Procedure-Call Switch block.">RPC_SWITCH_END</a>( );
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a91d9df92cffdedecad2d9e442cfad7c0"></a><!-- doxytag: member="PubSubLobby::handleRpcTimeout" ref="a91d9df92cffdedecad2d9e442cfad7c0" args="(BaseCallMessage *msg, const TransportAddress &amp;dest, cPolymorphic *context, int rpcId, const OverlayKey &amp;destKey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PubSubLobby::handleRpcTimeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBaseCallMessage.html">BaseCallMessage</a> *&nbsp;</td>
          <td class="paramname"> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cPolymorphic *&nbsp;</td>
          <td class="paramname"> <em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rpcId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classOverlayKey.html">OverlayKey</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>destKey</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PubSubLobby_8cc_source.html#l00120">120</a> of file <a class="el" href="PubSubLobby_8cc_source.html">PubSubLobby.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="RpcMacros_8h.html#aa75b135e279b574267e1a7dc4ab79da4" title="Marks the beginning of a Remote-Procedure-Call Switch block.">RPC_SWITCH_START</a>(msg)
    <a class="code" href="RpcMacros_8h.html#ae07fad586ce7b9e82ad12848767a32e5">RPC_ON_CALL</a>( PubSubTakeOverSubspace ) {
        <a class="code" href="classPubSubLobby.html#aac64ab2e9e6bd4d8e78e56d1872267dc">handleTakeOverTimeout</a>( _PubSubTakeOverSubspaceCall, dest );
        EV &lt;&lt; <span class="stringliteral">&quot;[PubSubMMOG::handleRpcTimeout() @ &quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classTransportAddress.html#a00e613d98d3412e2b92897c25aa0eb4c" title="returns ip address">getIp</a>()
           &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#aabeb4fd284a630a82e982ba34ece4fd9" title="Returns a string representation of this key.">toString</a>(16) &lt;&lt; <span class="stringliteral">&quot;)]\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;    TakeOverSubspace RPC Call timed out: id=&quot;</span> &lt;&lt; rpcId &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>
           &lt;&lt; <span class="stringliteral">&quot;    msg=&quot;</span> &lt;&lt; *_PubSubTakeOverSubspaceCall
           &lt;&lt; endl;
        <span class="keywordflow">break</span>;
    }
    <a class="code" href="RpcMacros_8h.html#a29a8a3f21e67ecb25f58608a54df5191" title="Marks the end of a Remote-Procedure-Call Switch block.">RPC_SWITCH_END</a>( )
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6a7519bd3f516d3d0c5667c437c6b5b4"></a><!-- doxytag: member="PubSubLobby::handleTakeOverResponse" ref="a6a7519bd3f516d3d0c5667c437c6b5b4" args="(PubSubTakeOverSubspaceResponse *takeOverResp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PubSubLobby::handleTakeOverResponse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPubSubTakeOverSubspaceResponse.html">PubSubTakeOverSubspaceResponse</a> *&nbsp;</td>
          <td class="paramname"> <em>takeOverResp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PubSubLobby_8cc_source.html#l00314">314</a> of file <a class="el" href="PubSubLobby_8cc_source.html">PubSubLobby.cc</a>.</p>

<p>Referenced by <a class="el" href="PubSubLobby_8cc_source.html#l00108">handleRpcResponse()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a> respNode = takeOverResp-&gt;<a class="code" href="classBaseRpcMessage.html#ada3e122125cfb5acc7350277ca69c45a">getSrcNode</a>();
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> x = (<span class="keywordtype">unsigned</span> int) takeOverResp-&gt;<a class="code" href="classPubSubTakeOverSubspaceResponse.html#ac0646cc53ac3507130474996ffd417e8">getSubspacePos</a>().<a class="code" href="classVector2D.html#ac5c4e553815737aa24bec8281270178f">x</a>;
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> y = (<span class="keywordtype">unsigned</span> int) takeOverResp-&gt;<a class="code" href="classPubSubTakeOverSubspaceResponse.html#ac0646cc53ac3507130474996ffd417e8">getSubspacePos</a>().<a class="code" href="classVector2D.html#ac38d0179cfe74c30fee290a703ab209a">y</a>;
    <a class="code" href="classPubSubSubspaceId.html">PubSubSubspaceId</a> region( x, y, <a class="code" href="classPubSubLobby.html#a24a89046b61fd6ee93ca4da1cbf2869c">numSubspaces</a>);

    <a class="code" href="classPubSubLobby.html#af2002fd1c1b0c158e34f98433d148b69">replaceResponsibleNode</a>( region, takeOverResp-&gt;<a class="code" href="classBaseRpcMessage.html#ada3e122125cfb5acc7350277ca69c45a">getSrcNode</a>() );
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="aac64ab2e9e6bd4d8e78e56d1872267dc"></a><!-- doxytag: member="PubSubLobby::handleTakeOverTimeout" ref="aac64ab2e9e6bd4d8e78e56d1872267dc" args="(PubSubTakeOverSubspaceCall *takeOverCall, const TransportAddress &amp;oldNode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PubSubLobby::handleTakeOverTimeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPubSubTakeOverSubspaceCall.html">PubSubTakeOverSubspaceCall</a> *&nbsp;</td>
          <td class="paramname"> <em>takeOverCall</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>oldNode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PubSubLobby_8cc_source.html#l00324">324</a> of file <a class="el" href="PubSubLobby_8cc_source.html">PubSubLobby.cc</a>.</p>

<p>Referenced by <a class="el" href="PubSubLobby_8cc_source.html#l00120">handleRpcTimeout()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="classVector2D.html">Vector2D</a> pos = takeOverCall-&gt;<a class="code" href="classPubSubTakeOverSubspaceCall.html#afed679f34e29e2f4265a16e6e59e38ec">getSubspacePos</a>();
    <a class="code" href="classPubSubLobby.html#ab2f87aabe4bd9986751cda300556c547">subspaces</a>[(int) pos.<a class="code" href="classVector2D.html#ac5c4e553815737aa24bec8281270178f">x</a>][(<span class="keywordtype">int</span>) pos.y].waitingForRespNode = false;
    <a class="code" href="classPubSubLobby.html#ac30e0ce9761b523e995d638b78fd7129">failedNode</a>( oldNode );
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a1e372f6bf585a978a0f5cdc2d9f95fde"></a><!-- doxytag: member="PubSubLobby::handleTimerEvent" ref="a1e372f6bf585a978a0f5cdc2d9f95fde" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PubSubLobby::handleTimerEvent </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PubSubLobby_8cc_source.html#l00067">67</a> of file <a class="el" href="PubSubLobby_8cc_source.html">PubSubLobby.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span>( <a class="code" href="classPubSubTimer.html" title="Class generated from overlay/pubsubmmog/PubSubMessage.msg by opp_msgc.">PubSubTimer</a>* timer = dynamic_cast&lt;PubSubTimer*&gt;(msg) ) {
        <span class="keywordflow">if</span>( timer-&gt;getType() == PUBSUB_TAKEOVER_GRACE_TIME ){
            <span class="comment">// Grace period for subspace takeover timed out.</span>
            <span class="comment">// If noone claimed the subspace yet, the next respNode query will</span>
            <span class="comment">// trigger the selection of a new responsible node</span>
            <a class="code" href="classPubSubSubspaceId.html">PubSubSubspaceId</a> subspaceId(timer-&gt;getSubspaceId(), <a class="code" href="classPubSubLobby.html#a24a89046b61fd6ee93ca4da1cbf2869c">numSubspaces</a> );
            <a class="code" href="classPubSubLobby.html#ab2f87aabe4bd9986751cda300556c547">subspaces</a>[subspaceId.getX()][subspaceId.getY()].waitingForRespNode = <span class="keyword">false</span>;
            <span class="keyword">delete</span> timer;
        }
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ae6e5337366950b5812ea523a7feffc2c"></a><!-- doxytag: member="PubSubLobby::handleUDPMessage" ref="ae6e5337366950b5812ea523a7feffc2c" args="(BaseOverlayMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PubSubLobby::handleUDPMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBaseOverlayMessage.html">BaseOverlayMessage</a> *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Processes messages from underlay. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>msg</em>&nbsp;</td><td>Message from UDP </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classBaseOverlay.html#a31d7dd39ddc9e62ad92f69f6d7210344">BaseOverlay</a>.</p>

<p>Definition at line <a class="el" href="PubSubLobby_8cc_source.html#l00081">81</a> of file <a class="el" href="PubSubLobby_8cc_source.html">PubSubLobby.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span>( <a class="code" href="classPubSubFailedNodeMessage.html" title="Class generated from overlay/pubsubmmog/PubSubMessage.msg by opp_msgc.">PubSubFailedNodeMessage</a>* failMsg = dynamic_cast&lt;PubSubFailedNodeMessage*&gt;(msg) ){
        <a class="code" href="classPubSubLobby.html#ac30e0ce9761b523e995d638b78fd7129">failedNode</a>( failMsg-&gt;getFailedNode() );
        <span class="keyword">delete</span> msg;

    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classPubSubReplacementMessage.html" title="Class generated from overlay/pubsubmmog/PubSubMessage.msg by opp_msgc.">PubSubReplacementMessage</a>* repMsg = dynamic_cast&lt;PubSubReplacementMessage*&gt;(msg) ){
        <a class="code" href="classPubSubLobby.html#af2002fd1c1b0c158e34f98433d148b69">replaceResponsibleNode</a>( repMsg-&gt;getSubspaceId(), repMsg-&gt;getNewResponsibleNode() );
        <span class="keyword">delete</span> msg;
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="classPubSubHelpReleaseMessage.html" title="Class generated from overlay/pubsubmmog/PubSubMessage.msg by opp_msgc.">PubSubHelpReleaseMessage</a>* helpRMsg = dynamic_cast&lt;PubSubHelpReleaseMessage*&gt;(msg) ){
        <a class="code" href="classPubSubLobby.html#ae3a56fb68d5829b09a9d9b50bb9a4f6c">handleHelpReleaseMessage</a>( helpRMsg );
        <span class="keyword">delete</span> msg;
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a22c24c5e2c839123f68d3b567eebf16e"></a><!-- doxytag: member="PubSubLobby::initializeOverlay" ref="a22c24c5e2c839123f68d3b567eebf16e" args="(int stage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PubSubLobby::initializeOverlay </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stage</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes derived-class-attributes. </p>
<p><br/>
</p>
<p>Initializes derived-class-attributes, called by <a class="el" href="classBaseOverlay.html#a9738ba6065b0f699f1921bbe82ab97be" title="initializes base-class-attributes">BaseOverlay::initialize()</a>. By default this method is called once. If more stages are needed one can overload <a class="el" href="classBaseOverlay.html#a3234dfcf81463984e88a42432734a615" title="Sets init stage.">numInitStages()</a> and add more stages.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>stage</em>&nbsp;</td><td>the init stage </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classBaseOverlay.html#a41f88dfbea856a2b38319ff52c758c96">BaseOverlay</a>.</p>

<p>Definition at line <a class="el" href="PubSubLobby_8cc_source.html#l00039">39</a> of file <a class="el" href="PubSubLobby_8cc_source.html">PubSubLobby.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="comment">// because of IPAddressResolver, we need to wait until interfaces are registered,</span>
    <span class="comment">// address auto-assignment takes place etc.</span>
    <span class="keywordflow">if</span>(stage != <a class="code" href="InitStages_8h.html#a42fde1aa1e14a1c45d29061d6e87e532a58e83c497c7c8495e9c592ff3148b6b9" title="first stage for overlay modules (Tier 0 / KBR)">MIN_STAGE_OVERLAY</a>) <span class="keywordflow">return</span>;

    <a class="code" href="classPubSubLobby.html#a24a89046b61fd6ee93ca4da1cbf2869c">numSubspaces</a> = par(<span class="stringliteral">&quot;numSubspaces&quot;</span>);
    <a class="code" href="classPubSubLobby.html#a5379836b0bca001ade60571fc330c7ca">subspaceSize</a> = (int) ( (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) par(<span class="stringliteral">&quot;areaDimension&quot;</span>) / <a class="code" href="classPubSubLobby.html#a24a89046b61fd6ee93ca4da1cbf2869c">numSubspaces</a>);

    <span class="comment">// FIXME: Inefficient, make subspace a single dimensioned array</span>
    <a class="code" href="classPubSubLobby.html#ab2f87aabe4bd9986751cda300556c547">subspaces</a>.resize( <a class="code" href="classPubSubLobby.html#a24a89046b61fd6ee93ca4da1cbf2869c">numSubspaces</a> );
    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="classPubSubLobby.html#a24a89046b61fd6ee93ca4da1cbf2869c">numSubspaces</a>; ++i ) {
        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> ii = 0; ii &lt; numSubspaces; ++ii ) {
            <a class="code" href="classPubSubSubspaceId.html">PubSubSubspaceId</a> region( i, ii, numSubspaces );
            <a class="code" href="classPubSubLobby.html#ab2f87aabe4bd9986751cda300556c547">subspaces</a>[i].push_back( <a class="code" href="classPubSubSubspaceLobby.html">PubSubSubspaceLobby</a>( region ) );
        }
        WATCH_VECTOR( <a class="code" href="classPubSubLobby.html#ab2f87aabe4bd9986751cda300556c547">subspaces</a>[i] );
    }
    <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a>.<a class="code" href="classNodeHandle.html#af3992f1fda9ea42dc10bf4739e47700a" title="saves given key to NodeHandle::key">setKey</a>( <a class="code" href="classOverlayKey.html#a1983e1b47e32783f8ccd5e59fe725290" title="Returns a random key.">OverlayKey::random</a>() );
    <a class="code" href="classGlobalNodeListAccess.html" title="Gives access to the GlobalNodeList.">GlobalNodeListAccess</a>().get()-&gt;registerPeer( <a class="code" href="classBaseRpc.html#a88eb68c06450fd12ea072f471bf1c1b8" title="NodeHandle to this node.">thisNode</a> );

    <a class="code" href="classPubSubLobby.html#a70506df7e812aab27fe5c4aca469befd">numPubSubSignalingMessages</a> = 0;
    <a class="code" href="classPubSubLobby.html#a6791b356638b40a2a06fc0b9c21fe08f">pubSubSignalingMessagesSize</a> = 0;
    WATCH( <a class="code" href="classPubSubLobby.html#a70506df7e812aab27fe5c4aca469befd">numPubSubSignalingMessages</a> );
    WATCH( <a class="code" href="classPubSubLobby.html#a6791b356638b40a2a06fc0b9c21fe08f">pubSubSignalingMessagesSize</a> );
    WATCH_MAP( <a class="code" href="classPubSubLobby.html#a09d7cf8803e638b57ecb2f42639c43f3">playerMap</a> );
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="af2002fd1c1b0c158e34f98433d148b69"></a><!-- doxytag: member="PubSubLobby::replaceResponsibleNode" ref="af2002fd1c1b0c158e34f98433d148b69" args="(int subspaceId, NodeHandle respNode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PubSubLobby::replaceResponsibleNode </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>subspaceId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classNodeHandle.html">NodeHandle</a>&nbsp;</td>
          <td class="paramname"> <em>respNode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PubSubLobby_8cc_source.html#l00357">357</a> of file <a class="el" href="PubSubLobby_8cc_source.html">PubSubLobby.cc</a>.</p>

<p>Referenced by <a class="el" href="PubSubLobby_8cc_source.html#l00314">handleTakeOverResponse()</a>, and <a class="el" href="PubSubLobby_8cc_source.html#l00081">handleUDPMessage()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="classPubSubLobby.html#af2002fd1c1b0c158e34f98433d148b69">replaceResponsibleNode</a>( <a class="code" href="classPubSubSubspaceId.html">PubSubSubspaceId</a>( subspaceId, <a class="code" href="classPubSubLobby.html#a24a89046b61fd6ee93ca4da1cbf2869c">numSubspaces</a>), respNode );
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="af2ba331a078883dc6182d6db6eeb8153"></a><!-- doxytag: member="PubSubLobby::replaceResponsibleNode" ref="af2ba331a078883dc6182d6db6eeb8153" args="(PubSubSubspaceId subspaceId, NodeHandle respNode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PubSubLobby::replaceResponsibleNode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPubSubSubspaceId.html">PubSubSubspaceId</a>&nbsp;</td>
          <td class="paramname"> <em>subspaceId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classNodeHandle.html">NodeHandle</a>&nbsp;</td>
          <td class="paramname"> <em>respNode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PubSubLobby_8cc_source.html#l00362">362</a> of file <a class="el" href="PubSubLobby_8cc_source.html">PubSubLobby.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="comment">// a new responsible node was found for a subspace</span>
    <a class="code" href="classPubSubSubspaceLobby.html">PubSubSubspaceLobby</a>&amp; subspace = <a class="code" href="classPubSubLobby.html#ab2f87aabe4bd9986751cda300556c547">subspaces</a>[subspaceId.<a class="code" href="classPubSubSubspaceId.html#a9d018cb0151f348f084616532d2f2a18">getX</a>()][subspaceId.<a class="code" href="classPubSubSubspaceId.html#a4c09a6757d000dd8c064ab09ba9dc8ca">getY</a>()];
<span class="comment">//    NodeHandle oldNode = subspace.getResponsibleNode();</span>

    <span class="comment">// set new responsible node</span>
    subspace.<a class="code" href="classPubSubSubspace.html#addf352c69955906dd9bda7e0a0c09dbb">setResponsibleNode</a>( respNode );
    subspace.<a class="code" href="classPubSubSubspaceLobby.html#a74eb3b7110def6855302731c29323f79">waitingForRespNode</a> = <span class="keyword">false</span>;

    <span class="comment">// decrease responsible node&#39;s ressources</span>
    pair&lt;PlayerRessourceMap::iterator, PlayerRessourceMap::iterator&gt; resRange;
    PlayerRessourceMap::iterator resIt;
    PlayerMap::iterator plIt = <a class="code" href="classPubSubLobby.html#a09d7cf8803e638b57ecb2f42639c43f3">playerMap</a>.find( respNode );

    <span class="keywordflow">if</span>( plIt == <a class="code" href="classPubSubLobby.html#a09d7cf8803e638b57ecb2f42639c43f3">playerMap</a>.end() ){
        <span class="comment">// FIXME: How to react?</span>
        <span class="comment">// Best would be: reinsert node. But most probable we have two nodes that want to be</span>
        <span class="comment">// responsible, so how to avoid the resulting inconsostency?</span>
        opp_error(<span class="stringliteral">&quot;PlayerMap inconsistent: Allegedly failed node wants to become Responsible node&quot;</span>);
    }
<span class="comment">//    ChildEntry* respNodeEntry = &amp;(plIt-&gt;second);</span>
<span class="comment">//    resRange = playerRessourceMap.equal_range( respNodeEntry-&gt;ressources );</span>
<span class="comment">//    for( resIt = resRange.first; resIt != resRange.second; ++resIt ){</span>
<span class="comment">//        if( resIt-&gt;second == respNodeEntry ){</span>
<span class="comment">//            playerRessourceMap.erase( resIt );</span>
<span class="comment">//            break;</span>
<span class="comment">//        }</span>
<span class="comment">//    }</span>
<span class="comment">//    respNodeEntry-&gt;ressources -= 2; // FIXME: make it a parameter</span>
<span class="comment">//    playerRessourceMap.insert( make_pair(respNodeEntry-&gt;ressources, respNodeEntry) );</span>

    <span class="comment">// remove old node from backupList-&gt;he failed...</span>
<span class="comment">//    failedNode( oldNode );</span>

    <span class="comment">// inform all waiting nodes...</span>
    std::list&lt;PubSubResponsibleNodeCall*&gt;::iterator it;
    <span class="keywordflow">for</span>( it = subspace.<a class="code" href="classPubSubSubspaceLobby.html#a11e3db4ea089dcb43883107a47aef396">waitingNodes</a>.begin(); it != subspace.<a class="code" href="classPubSubSubspaceLobby.html#a11e3db4ea089dcb43883107a47aef396">waitingNodes</a>.end(); ++it ) {
        <a class="code" href="classPubSubResponsibleNodeResponse.html" title="Class generated from overlay/pubsubmmog/PubSubMessage.msg by opp_msgc.">PubSubResponsibleNodeResponse</a>* msg = <span class="keyword">new</span> <a class="code" href="classPubSubResponsibleNodeResponse.html" title="Class generated from overlay/pubsubmmog/PubSubMessage.msg by opp_msgc.">PubSubResponsibleNodeResponse</a>( <span class="stringliteral">&quot;ResponsibleNode Response&quot;</span>);
        msg-&gt;<a class="code" href="classPubSubResponsibleNodeResponse.html#abb9c4caac4074e4b07b8a7fe7751b42f">setResponsibleNode</a>( respNode );
        msg-&gt;<a class="code" href="classPubSubResponsibleNodeResponse.html#a73b835409428a48054aea30164049e8a">setSubspaceId</a>( subspaceId.<a class="code" href="classPubSubSubspaceId.html#afb4d71a54d5337d65bb89c27e4d4938c">getId</a>() );
        msg-&gt;setBitLength( <a class="code" href="PubSubMessage__m_8h.html#a83b307ff36cba03e2513b9b187545f7e">PUBSUB_RESPONSIBLENODERESPONSE_L</a>( msg ));
        <a class="code" href="GlobalStatistics_8h.html#af29140ebe8e0a93406a58441f7c5fec8" title="Macro used for recording statistics considering measureNetwIn parameter.">RECORD_STATS</a>(
                ++<a class="code" href="classPubSubLobby.html#a70506df7e812aab27fe5c4aca469befd">numPubSubSignalingMessages</a>;
                <a class="code" href="classPubSubLobby.html#a6791b356638b40a2a06fc0b9c21fe08f">pubSubSignalingMessagesSize</a> += msg-&gt;getByteLength()
                );
        <a class="code" href="classBaseRpc.html#adc06091d348c98a5efbf54fe0afe8747" title="Send Remote-Procedure response message and deletes call message.">sendRpcResponse</a>( *it, msg );
    }
    subspace.<a class="code" href="classPubSubSubspaceLobby.html#a11e3db4ea089dcb43883107a47aef396">waitingNodes</a>.clear();
}
</pre></div></p>

</div>
</div>
<hr/><h2>Friends And Related Function Documentation</h2>
<a class="anchor" id="a887fdcd4f32e4dd84921e6ffa82a5857"></a><!-- doxytag: member="PubSubLobby::operator&lt;&lt;" ref="a887fdcd4f32e4dd84921e6ffa82a5857" args="(std::ostream &amp;o, const ChildEntry &amp;entry)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&nbsp;</td>
          <td class="paramname"> <em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classPubSubLobby_1_1ChildEntry.html">ChildEntry</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>entry</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PubSubLobby_8cc_source.html#l00031">31</a> of file <a class="el" href="PubSubLobby_8cc_source.html">PubSubLobby.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    o &lt;&lt; <span class="stringliteral">&quot;Node: &quot;</span> &lt;&lt; entry.handle &lt;&lt; <span class="stringliteral">&quot; ressources: &quot;</span> &lt;&lt; entry.ressources;
    <span class="keywordflow">return</span> o;
}
</pre></div></p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a70506df7e812aab27fe5c4aca469befd"></a><!-- doxytag: member="PubSubLobby::numPubSubSignalingMessages" ref="a70506df7e812aab27fe5c4aca469befd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classPubSubLobby.html#a70506df7e812aab27fe5c4aca469befd">PubSubLobby::numPubSubSignalingMessages</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PubSubLobby_8h_source.html#l00090">90</a> of file <a class="el" href="PubSubLobby_8h_source.html">PubSubLobby.h</a>.</p>

<p>Referenced by <a class="el" href="PubSubLobby_8cc_source.html#l00463">finishOverlay()</a>, <a class="el" href="PubSubLobby_8cc_source.html#l00226">handleHelpCall()</a>, <a class="el" href="PubSubLobby_8cc_source.html#l00138">handleJoin()</a>, <a class="el" href="PubSubLobby_8cc_source.html#l00266">handleRespCall()</a>, <a class="el" href="PubSubLobby_8cc_source.html#l00039">initializeOverlay()</a>, and <a class="el" href="PubSubLobby_8cc_source.html#l00362">replaceResponsibleNode()</a>.</p>

</div>
</div>
<a class="anchor" id="a24a89046b61fd6ee93ca4da1cbf2869c"></a><!-- doxytag: member="PubSubLobby::numSubspaces" ref="a24a89046b61fd6ee93ca4da1cbf2869c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classPubSubLobby.html#a24a89046b61fd6ee93ca4da1cbf2869c">PubSubLobby::numSubspaces</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PubSubLobby_8h_source.html#l00068">68</a> of file <a class="el" href="PubSubLobby_8h_source.html">PubSubLobby.h</a>.</p>

<p>Referenced by <a class="el" href="PubSubLobby_8cc_source.html#l00414">failedNode()</a>, <a class="el" href="PubSubLobby_8cc_source.html#l00266">handleRespCall()</a>, <a class="el" href="PubSubLobby_8cc_source.html#l00314">handleTakeOverResponse()</a>, <a class="el" href="PubSubLobby_8cc_source.html#l00067">handleTimerEvent()</a>, <a class="el" href="PubSubLobby_8cc_source.html#l00039">initializeOverlay()</a>, and <a class="el" href="PubSubLobby_8cc_source.html#l00357">replaceResponsibleNode()</a>.</p>

</div>
</div>
<a class="anchor" id="a09d7cf8803e638b57ecb2f42639c43f3"></a><!-- doxytag: member="PubSubLobby::playerMap" ref="a09d7cf8803e638b57ecb2f42639c43f3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPubSubLobby.html#a4bbae3eea2faaf9cf26e8c948bfc79da">PlayerMap</a> <a class="el" href="classPubSubLobby.html#a09d7cf8803e638b57ecb2f42639c43f3">PubSubLobby::playerMap</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PubSubLobby_8h_source.html#l00074">74</a> of file <a class="el" href="PubSubLobby_8h_source.html">PubSubLobby.h</a>.</p>

<p>Referenced by <a class="el" href="PubSubLobby_8cc_source.html#l00414">failedNode()</a>, <a class="el" href="PubSubLobby_8cc_source.html#l00331">handleHelpReleaseMessage()</a>, <a class="el" href="PubSubLobby_8cc_source.html#l00138">handleJoin()</a>, <a class="el" href="PubSubLobby_8cc_source.html#l00039">initializeOverlay()</a>, and <a class="el" href="PubSubLobby_8cc_source.html#l00362">replaceResponsibleNode()</a>.</p>

</div>
</div>
<a class="anchor" id="ad2677c6bbc0fa6d3ee5f9d5e1052623d"></a><!-- doxytag: member="PubSubLobby::playerRessourceMap" ref="ad2677c6bbc0fa6d3ee5f9d5e1052623d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPubSubLobby.html#a25fcdd57095ec6adf049f74c62e8ae35">PlayerRessourceMap</a> <a class="el" href="classPubSubLobby.html#ad2677c6bbc0fa6d3ee5f9d5e1052623d">PubSubLobby::playerRessourceMap</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PubSubLobby_8h_source.html#l00076">76</a> of file <a class="el" href="PubSubLobby_8h_source.html">PubSubLobby.h</a>.</p>

<p>Referenced by <a class="el" href="PubSubLobby_8cc_source.html#l00414">failedNode()</a>, <a class="el" href="PubSubLobby_8cc_source.html#l00226">handleHelpCall()</a>, <a class="el" href="PubSubLobby_8cc_source.html#l00331">handleHelpReleaseMessage()</a>, <a class="el" href="PubSubLobby_8cc_source.html#l00138">handleJoin()</a>, and <a class="el" href="PubSubLobby_8cc_source.html#l00266">handleRespCall()</a>.</p>

</div>
</div>
<a class="anchor" id="a6791b356638b40a2a06fc0b9c21fe08f"></a><!-- doxytag: member="PubSubLobby::pubSubSignalingMessagesSize" ref="a6791b356638b40a2a06fc0b9c21fe08f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classPubSubLobby.html#a6791b356638b40a2a06fc0b9c21fe08f">PubSubLobby::pubSubSignalingMessagesSize</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PubSubLobby_8h_source.html#l00091">91</a> of file <a class="el" href="PubSubLobby_8h_source.html">PubSubLobby.h</a>.</p>

<p>Referenced by <a class="el" href="PubSubLobby_8cc_source.html#l00463">finishOverlay()</a>, <a class="el" href="PubSubLobby_8cc_source.html#l00226">handleHelpCall()</a>, <a class="el" href="PubSubLobby_8cc_source.html#l00138">handleJoin()</a>, <a class="el" href="PubSubLobby_8cc_source.html#l00266">handleRespCall()</a>, <a class="el" href="PubSubLobby_8cc_source.html#l00039">initializeOverlay()</a>, and <a class="el" href="PubSubLobby_8cc_source.html#l00362">replaceResponsibleNode()</a>.</p>

</div>
</div>
<a class="anchor" id="ab2f87aabe4bd9986751cda300556c547"></a><!-- doxytag: member="PubSubLobby::subspaces" ref="ab2f87aabe4bd9986751cda300556c547" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::vector&lt;<a class="el" href="classPubSubSubspaceLobby.html">PubSubSubspaceLobby</a>&gt; &gt; <a class="el" href="classPubSubLobby.html#ab2f87aabe4bd9986751cda300556c547">PubSubLobby::subspaces</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PubSubLobby_8h_source.html#l00069">69</a> of file <a class="el" href="PubSubLobby_8h_source.html">PubSubLobby.h</a>.</p>

<p>Referenced by <a class="el" href="PubSubLobby_8cc_source.html#l00414">failedNode()</a>, <a class="el" href="PubSubLobby_8cc_source.html#l00138">handleJoin()</a>, <a class="el" href="PubSubLobby_8cc_source.html#l00266">handleRespCall()</a>, <a class="el" href="PubSubLobby_8cc_source.html#l00324">handleTakeOverTimeout()</a>, <a class="el" href="PubSubLobby_8cc_source.html#l00067">handleTimerEvent()</a>, <a class="el" href="PubSubLobby_8cc_source.html#l00039">initializeOverlay()</a>, and <a class="el" href="PubSubLobby_8cc_source.html#l00362">replaceResponsibleNode()</a>.</p>

</div>
</div>
<a class="anchor" id="a5379836b0bca001ade60571fc330c7ca"></a><!-- doxytag: member="PubSubLobby::subspaceSize" ref="a5379836b0bca001ade60571fc330c7ca" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classPubSubLobby.html#a5379836b0bca001ade60571fc330c7ca">PubSubLobby::subspaceSize</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PubSubLobby_8h_source.html#l00067">67</a> of file <a class="el" href="PubSubLobby_8h_source.html">PubSubLobby.h</a>.</p>

<p>Referenced by <a class="el" href="PubSubLobby_8cc_source.html#l00138">handleJoin()</a>, and <a class="el" href="PubSubLobby_8cc_source.html#l00039">initializeOverlay()</a>.</p>

</div>
</div>
<a class="anchor" id="aad3f4f6a35c2a161d444115ed0bbf69c"></a><!-- doxytag: member="PubSubLobby::waitingForHelp" ref="aad3f4f6a35c2a161d444115ed0bbf69c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt;<a class="el" href="classPubSubHelpCall.html">PubSubHelpCall</a>*&gt; <a class="el" href="classPubSubLobby.html#aad3f4f6a35c2a161d444115ed0bbf69c">PubSubLobby::waitingForHelp</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="PubSubLobby_8h_source.html#l00070">70</a> of file <a class="el" href="PubSubLobby_8h_source.html">PubSubLobby.h</a>.</p>

<p>Referenced by <a class="el" href="PubSubLobby_8cc_source.html#l00226">handleHelpCall()</a>, and <a class="el" href="PubSubLobby_8cc_source.html#l00138">handleJoin()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="PubSubLobby_8h_source.html">PubSubLobby.h</a></li>
<li><a class="el" href="PubSubLobby_8cc_source.html">PubSubLobby.cc</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Nov 3 2010 14:40:53 for OverSim by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
