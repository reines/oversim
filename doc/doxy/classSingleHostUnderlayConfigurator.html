<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OverSim: SingleHostUnderlayConfigurator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pro-methods">Protected Member Functions</a>  </div>
  <div class="headertitle">
<h1>SingleHostUnderlayConfigurator Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="SingleHostUnderlayConfigurator" --><!-- doxytag: inherits="UnderlayConfigurator" -->
<p><code>#include &lt;<a class="el" href="SingleHostUnderlayConfigurator_8h_source.html">SingleHostUnderlayConfigurator.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for SingleHostUnderlayConfigurator:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classSingleHostUnderlayConfigurator.png" usemap="#SingleHostUnderlayConfigurator_map" alt=""/>
  <map id="SingleHostUnderlayConfigurator_map" name="SingleHostUnderlayConfigurator_map">
<area href="classUnderlayConfigurator.html" alt="UnderlayConfigurator" shape="rect" coords="0,0,194,24"/>
</map>
</div>

<p><a href="classSingleHostUnderlayConfigurator-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSingleHostUnderlayConfigurator.html#a6a1fe38b21633089d8d78f0ed10b208c">initializeUnderlay</a> (int stage)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Init method for derived underlay configurators.  <a href="#a6a1fe38b21633089d8d78f0ed10b208c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSingleHostUnderlayConfigurator.html#a809b28cd4021d225aa2f78efd90c212f">finishUnderlay</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Cleans up concrete underlay configurator.  <a href="#a809b28cd4021d225aa2f78efd90c212f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSingleHostUnderlayConfigurator.html#a38b2716ca9257a11cb136b8967379dd7">setDisplayString</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets display string.  <a href="#a38b2716ca9257a11cb136b8967379dd7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSingleHostUnderlayConfigurator.html#abbe3008b1ddd53242eba802b5fe6f8e0">handleTimerEvent</a> (cMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTransportAddress.html">TransportAddress</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSingleHostUnderlayConfigurator.html#a93dbddafedc08fe8109090de4fa804a5">createNode</a> (<a class="el" href="classNodeType.html">NodeType</a> type, bool initialize)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates an overlay node.  <a href="#a93dbddafedc08fe8109090de4fa804a5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSingleHostUnderlayConfigurator.html#a6acce052d42d5d373d7e276ce6c0d37e">preKillNode</a> (<a class="el" href="classNodeType.html">NodeType</a> type, <a class="el" href="classTransportAddress.html">TransportAddress</a> *addr=NULL)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Notifies and schedules overlay nodes for removal.  <a href="#a6acce052d42d5d373d7e276ce6c0d37e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSingleHostUnderlayConfigurator.html#ac71d496cfe481e3d965098f2f4e1d7ff">migrateNode</a> (<a class="el" href="classNodeType.html">NodeType</a> type, <a class="el" href="classTransportAddress.html">TransportAddress</a> *addr=NULL)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Migrates overlay nodes from one access net to another.  <a href="#ac71d496cfe481e3d965098f2f4e1d7ff"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>

<p>Definition at line <a class="el" href="SingleHostUnderlayConfigurator_8h_source.html#l00036">36</a> of file <a class="el" href="SingleHostUnderlayConfigurator_8h_source.html">SingleHostUnderlayConfigurator.h</a>.</p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a93dbddafedc08fe8109090de4fa804a5"></a><!-- doxytag: member="SingleHostUnderlayConfigurator::createNode" ref="a93dbddafedc08fe8109090de4fa804a5" args="(NodeType type, bool initialize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTransportAddress.html">TransportAddress</a>* SingleHostUnderlayConfigurator::createNode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classNodeType.html">NodeType</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>initialize</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates an overlay node. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td><a class="el" href="classNodeType.html" title="Enum specifying node properties.">NodeType</a> of the node to create </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>initialize</em>&nbsp;</td><td>are we in init phase? </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classUnderlayConfigurator.html#a65d64297bacdcf855bc13e8410754c7e">UnderlayConfigurator</a>.</p>

<p>Definition at line <a class="el" href="SingleHostUnderlayConfigurator_8h_source.html#l00046">46</a> of file <a class="el" href="SingleHostUnderlayConfigurator_8h_source.html">SingleHostUnderlayConfigurator.h</a>.</p>

<p><div class="fragment"><pre class="fragment">{<a class="code" href="yang_8cc.html#adb989392f8aada21b0f7ec2f7a41dc00">error</a>(<span class="stringliteral">&quot;createNode can&#39;t be used with singleHostUnderlay!&quot;</span>); <span class="keywordflow">return</span> NULL;}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a809b28cd4021d225aa2f78efd90c212f"></a><!-- doxytag: member="SingleHostUnderlayConfigurator::finishUnderlay" ref="a809b28cd4021d225aa2f78efd90c212f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SingleHostUnderlayConfigurator::finishUnderlay </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Cleans up concrete underlay configurator. </p>

<p>Reimplemented from <a class="el" href="classUnderlayConfigurator.html#a774e30cdd3aced06e5a04eb3ec4e4b0b">UnderlayConfigurator</a>.</p>

<p>Definition at line <a class="el" href="SingleHostUnderlayConfigurator_8cc_source.html#l00189">189</a> of file <a class="el" href="SingleHostUnderlayConfigurator_8cc_source.html">SingleHostUnderlayConfigurator.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (!<a class="code" href="classUnderlayConfigurator.html#a00c2e85286a38799c7a04edb52ae6e76" title="still in initialization phase?">isInInitPhase</a>()) {
        <span class="keyword">struct </span>timeval now, diff;
        gettimeofday(&amp;now, NULL);
        <a class="code" href="UnderlayConfigurator_8h.html#a8b18f762e42417ce5d86090331d3e4eb">timersub</a>(&amp;now, &amp;<a class="code" href="classUnderlayConfigurator.html#a2675d1d01baaac0fe01436d01deabd13" title="timestamp at end of init phase">initFinishedTime</a>, &amp;diff);
        printf(<span class="stringliteral">&quot;Simulation time: %li.%06li\n&quot;</span>, diff.tv_sec, diff.tv_usec);
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="abbe3008b1ddd53242eba802b5fe6f8e0"></a><!-- doxytag: member="SingleHostUnderlayConfigurator::handleTimerEvent" ref="abbe3008b1ddd53242eba802b5fe6f8e0" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SingleHostUnderlayConfigurator::handleTimerEvent </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="classUnderlayConfigurator.html#a90985a5b37ced8385ae394f1648757c4">UnderlayConfigurator</a>.</p>

<p>Definition at line <a class="el" href="SingleHostUnderlayConfigurator_8cc_source.html#l00171">171</a> of file <a class="el" href="SingleHostUnderlayConfigurator_8cc_source.html">SingleHostUnderlayConfigurator.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (std::string(msg-&gt;getName()) != <span class="stringliteral">&quot;init phase finished&quot;</span>) {
        <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;unknown self-message received&quot;</span>);
    }
    <span class="keyword">delete</span> msg;

    <a class="code" href="classUnderlayConfigurator.html#a1a8154c6086e6f8e5a1a682e82f200d4">initFinished</a>();
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6a1fe38b21633089d8d78f0ed10b208c"></a><!-- doxytag: member="SingleHostUnderlayConfigurator::initializeUnderlay" ref="a6a1fe38b21633089d8d78f0ed10b208c" args="(int stage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SingleHostUnderlayConfigurator::initializeUnderlay </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stage</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Init method for derived underlay configurators. </p>

<p>Implements <a class="el" href="classUnderlayConfigurator.html#a00b370315b9dcd39b41e254837d9a7ad">UnderlayConfigurator</a>.</p>

<p>Definition at line <a class="el" href="SingleHostUnderlayConfigurator_8cc_source.html#l00057">57</a> of file <a class="el" href="SingleHostUnderlayConfigurator_8cc_source.html">SingleHostUnderlayConfigurator.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="structStunAddress4.html">StunAddress4</a> publicAddr, stunServerAddr;
    IPvXAddress addr;

    <span class="keywordflow">if</span>(stage != <a class="code" href="InitStages_8h.html#a42fde1aa1e14a1c45d29061d6e87e532a51360a7e54ff555dc3d078d686500cb9" title="last stage for underlay configurators">MAX_STAGE_UNDERLAY</a>)
        <span class="keywordflow">return</span>;

    <a class="code" href="classUnderlayConfigurator.html#aed1fe1d613fb061b714fc281cbb0b820" title="current number of overlay terminals">overlayTerminalCount</a> = 1;

    <span class="comment">// Set IP, Routes, etc</span>
    cModule* node = getParentModule()-&gt;getSubmodule(<span class="stringliteral">&quot;overlayTerminal&quot;</span>, 0);

    std::string nodeInterface = std::string(par(<span class="stringliteral">&quot;nodeInterface&quot;</span>).stringValue());
    std::string stunServer = std::string(par(<span class="stringliteral">&quot;stunServer&quot;</span>).stringValue());
    std::string nodeIP = std::string(par(<span class="stringliteral">&quot;nodeIP&quot;</span>).stringValue());

    <span class="keywordflow">if</span> (!nodeInterface.size() &amp;&amp; !stunServer.size() &amp;&amp; !nodeIP.size()) {
        <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;SingleHostConfigurator::initializeUnderlay(): &quot;</span>
                            <span class="stringliteral">&quot;Please specify at least one of &quot;</span>
                            <span class="stringliteral">&quot;**.nodeInterface, **.nodeIP, or **.stunServer&quot;</span>);
    }

    <span class="keywordflow">if</span> (nodeInterface.size()) {
<span class="preprocessor">#ifndef _WIN32</span>
<span class="preprocessor"></span>        SOCKET sock_fd;
        <span class="keyword">struct </span>ifreq req;
        <span class="keywordflow">if</span> ((sock_fd = socket(PF_INET, SOCK_DGRAM, IPPROTO_IP)) !=
            INVALID_SOCKET) {

            snprintf(req.ifr_name, <span class="keyword">sizeof</span>(req.ifr_name), <span class="stringliteral">&quot;%s&quot;</span>, nodeInterface.c_str());

            <span class="keywordflow">if</span> (!ioctl(sock_fd, SIOCGIFADDR, &amp;req)) {
                addr = IPAddress(inet_ntoa(((<span class="keyword">struct</span> sockaddr_in *)
                        (&amp;req.ifr_addr))-&gt;sin_addr));
            } <span class="keywordflow">else</span> {
                <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;SingleHostConfigurator::&quot;</span>
                                        <span class="stringliteral">&quot;initializeUnderlay(): &quot;</span>
                                        <span class="stringliteral">&quot;Invalid interface!&quot;</span>);
            }
            close(sock_fd);
        }
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>        <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;SingleHostConfigurator::&quot;</span>
                <span class="stringliteral">&quot;initializeUnderlay(): &quot;</span>
                <span class="stringliteral">&quot;**.nodeInterface parameter not supported on WIN32 yet!&quot;</span>);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nodeIP.size()) {
        addr = IPAddress(nodeIP.c_str());
    }

    <span class="keywordflow">if</span> (stunServer.size()) {
        <span class="comment">// TODO: use and set overlayPort!</span>
        <span class="keywordflow">throw</span> cRuntimeError(<span class="stringliteral">&quot;SingleHostConfigurator::initializeUnderlay():&quot;</span>
                                <span class="stringliteral">&quot; Not implemented yet!&quot;</span>);
        <span class="keywordtype">int</span> srcPort = 0;
        publicAddr.<a class="code" href="structStunAddress4.html#a870846bf1b2de80c031948f0795e24c6">addr</a> = 0;
        publicAddr.<a class="code" href="structStunAddress4.html#a182b25091f39b6f1d9904a02bcbeb43b">port</a> = srcPort;
        stunServerAddr.<a class="code" href="structStunAddress4.html#a870846bf1b2de80c031948f0795e24c6">addr</a> = 0;
        <span class="keywordtype">char</span> tmpAddr[512];
        strncpy (tmpAddr, stunServer.c_str(), 512);

        <span class="keywordflow">if</span> (<a class="code" href="stun_8cc.html#acc6ab05f9237a355919b963c6835ec9e" title="find the IP address of a the specified stun server - return false is fails parse">stunParseServerName</a>(tmpAddr, stunServerAddr)) {
            <span class="keywordtype">bool</span> presPort = <span class="keyword">false</span>;
            <span class="keywordtype">bool</span> hairpin = <span class="keyword">false</span>;

            <a class="code" href="stun_8h.html#a73736c0f7526e31ef6a35dcc0ebd34ce">NatType</a> stype = <a class="code" href="stun_8cc.html#a1bcb91a498bf5e73ba5b150c5a698c7d">stunNatType</a>(stunServerAddr, <span class="keyword">false</span>, &amp;presPort,
                                        &amp;hairpin, srcPort, &amp;publicAddr);
            <span class="keywordflow">if</span> (stype != <a class="code" href="stun_8h.html#a73736c0f7526e31ef6a35dcc0ebd34cea5f2fd642b25cc39e78472ec266efbf4e">StunTypeOpen</a>) {
                EV &lt;&lt; <span class="stringliteral">&quot;SingleHostConfigurator::initializeUnderlay(): &quot;</span>
                   &lt;&lt; <span class="stringliteral">&quot;Node is behind NAT or invalid STUN server configuration!&quot;</span>
                   &lt;&lt; std::endl;
            }

            publicAddr.<a class="code" href="structStunAddress4.html#a870846bf1b2de80c031948f0795e24c6">addr</a> = htonl(publicAddr.<a class="code" href="structStunAddress4.html#a870846bf1b2de80c031948f0795e24c6">addr</a>);
            addr = IPAddress(inet_ntoa(*((<span class="keyword">struct</span> in_addr *)(&amp;(publicAddr.<a class="code" href="structStunAddress4.html#a870846bf1b2de80c031948f0795e24c6">addr</a>)))));
        }
    }

    IPvXAddress gw = addr;
    InterfaceEntry* ifEntry = IPAddressResolver().interfaceTableOf(node)-&gt;
            getInterfaceByName(<span class="stringliteral">&quot;outDev&quot;</span>);
    IRoutingTable* rTable = check_and_cast&lt;IRoutingTable*&gt;(node-&gt;getSubmodule(<span class="stringliteral">&quot;routingTable&quot;</span>, 0));

    ifEntry-&gt;ipv4Data()-&gt;setIPAddress(addr.get4());
    ifEntry-&gt;ipv4Data()-&gt;setNetmask(IPAddress::ALLONES_ADDRESS);

    IPRoute* te = <span class="keyword">new</span> IPRoute();
    te-&gt;setHost(IPAddress::UNSPECIFIED_ADDRESS);
    te-&gt;setNetmask(IPAddress::UNSPECIFIED_ADDRESS);
    te-&gt;setGateway(gw.get4());
    te-&gt;setInterface(ifEntry);
    te-&gt;setType(IPRoute::REMOTE);
    te-&gt;setSource(IPRoute::MANUAL);
    rTable-&gt;addRoute(te);

    <span class="comment">//add node to bootstrap oracle</span>
    <a class="code" href="classPeerInfo.html" title="Base class for providing additional underlay specific information associated with a certain transport...">PeerInfo</a>* info = <span class="keyword">new</span> <a class="code" href="classPeerInfo.html" title="Base class for providing additional underlay specific information associated with a certain transport...">PeerInfo</a>(0, node-&gt;getId(), NULL);
    <a class="code" href="classUnderlayConfigurator.html#a18732aa18ca952e0f7973216692d7777" title="pointer to GlobalNodeList">globalNodeList</a>-&gt;<a class="code" href="classGlobalNodeList.html#a82a6c218304d734e2169e1c8fc5817ee" title="Adds new peers to the peer set.">addPeer</a>(addr, info);

    <span class="keywordflow">if</span> (strlen(par(<span class="stringliteral">&quot;bootstrapIP&quot;</span>)) &gt; 0) {
        <a class="code" href="classPeerInfo.html" title="Base class for providing additional underlay specific information associated with a certain transport...">PeerInfo</a>* bootstrapInfo = <span class="keyword">new</span> <a class="code" href="classPeerInfo.html" title="Base class for providing additional underlay specific information associated with a certain transport...">PeerInfo</a>(0, -1, NULL);
        <a class="code" href="classUnderlayConfigurator.html#a18732aa18ca952e0f7973216692d7777" title="pointer to GlobalNodeList">globalNodeList</a>-&gt;<a class="code" href="classGlobalNodeList.html#a82a6c218304d734e2169e1c8fc5817ee" title="Adds new peers to the peer set.">addPeer</a>(IPAddress(par(<span class="stringliteral">&quot;bootstrapIP&quot;</span>).stringValue()),
                                bootstrapInfo);

        <a class="code" href="classUnderlayConfigurator.html#a18732aa18ca952e0f7973216692d7777" title="pointer to GlobalNodeList">globalNodeList</a>-&gt;<a class="code" href="classGlobalNodeList.html#add76d38932795a481196e5504c5ee98e" title="Bootstraps peers in the peer set.">registerPeer</a>(<a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a>(<a class="code" href="classOverlayKey.html#a51a63dbc089143b7742d7da846a16abd" title="OverlayKey with key initialized as 1.">OverlayKey::ONE</a>,
            IPAddress(par(<span class="stringliteral">&quot;bootstrapIP&quot;</span>).stringValue()), par(<span class="stringliteral">&quot;bootstrapPort&quot;</span>)));
    }

    <span class="comment">// update display</span>
    <a class="code" href="classSingleHostUnderlayConfigurator.html#a38b2716ca9257a11cb136b8967379dd7" title="Sets display string.">setDisplayString</a>();

    scheduleAt(simTime(), <span class="keyword">new</span> cMessage(<span class="stringliteral">&quot;init phase finished&quot;</span>));
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac71d496cfe481e3d965098f2f4e1d7ff"></a><!-- doxytag: member="SingleHostUnderlayConfigurator::migrateNode" ref="ac71d496cfe481e3d965098f2f4e1d7ff" args="(NodeType type, TransportAddress *addr=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SingleHostUnderlayConfigurator::migrateNode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classNodeType.html">NodeType</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classTransportAddress.html">TransportAddress</a> *&nbsp;</td>
          <td class="paramname"> <em>addr</em> = <code>NULL</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Migrates overlay nodes from one access net to another. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td><a class="el" href="classNodeType.html" title="Enum specifying node properties.">NodeType</a> of the node to migrate </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>NULL for random node </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classUnderlayConfigurator.html#a31e6fc55c914b3a6606f6c2bc532a1cc">UnderlayConfigurator</a>.</p>

<p>Definition at line <a class="el" href="SingleHostUnderlayConfigurator_8h_source.html#l00048">48</a> of file <a class="el" href="SingleHostUnderlayConfigurator_8h_source.html">SingleHostUnderlayConfigurator.h</a>.</p>

<p><div class="fragment"><pre class="fragment">{<a class="code" href="yang_8cc.html#adb989392f8aada21b0f7ec2f7a41dc00">error</a>(<span class="stringliteral">&quot;migrateNode can&#39;t be used with singleHostUnderlay!&quot;</span>);}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6acce052d42d5d373d7e276ce6c0d37e"></a><!-- doxytag: member="SingleHostUnderlayConfigurator::preKillNode" ref="a6acce052d42d5d373d7e276ce6c0d37e" args="(NodeType type, TransportAddress *addr=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SingleHostUnderlayConfigurator::preKillNode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classNodeType.html">NodeType</a>&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classTransportAddress.html">TransportAddress</a> *&nbsp;</td>
          <td class="paramname"> <em>addr</em> = <code>NULL</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Notifies and schedules overlay nodes for removal. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td><a class="el" href="classNodeType.html" title="Enum specifying node properties.">NodeType</a> of the node to remove </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>addr</em>&nbsp;</td><td>NULL for random node </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classUnderlayConfigurator.html#a365808ae3d6f667e897f5bf3ee8666b8">UnderlayConfigurator</a>.</p>

<p>Definition at line <a class="el" href="SingleHostUnderlayConfigurator_8h_source.html#l00047">47</a> of file <a class="el" href="SingleHostUnderlayConfigurator_8h_source.html">SingleHostUnderlayConfigurator.h</a>.</p>

<p><div class="fragment"><pre class="fragment">{<a class="code" href="yang_8cc.html#adb989392f8aada21b0f7ec2f7a41dc00">error</a>(<span class="stringliteral">&quot;preKillNode can&#39;t be used with singleHostUnderlay!&quot;</span>);}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a38b2716ca9257a11cb136b8967379dd7"></a><!-- doxytag: member="SingleHostUnderlayConfigurator::setDisplayString" ref="a38b2716ca9257a11cb136b8967379dd7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SingleHostUnderlayConfigurator::setDisplayString </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets display string. </p>

<p>Implements <a class="el" href="classUnderlayConfigurator.html#a38c591a7837a8d7a426111229955c9fd">UnderlayConfigurator</a>.</p>

<p>Definition at line <a class="el" href="SingleHostUnderlayConfigurator_8cc_source.html#l00181">181</a> of file <a class="el" href="SingleHostUnderlayConfigurator_8cc_source.html">SingleHostUnderlayConfigurator.cc</a>.</p>

<p>Referenced by <a class="el" href="SingleHostUnderlayConfigurator_8cc_source.html#l00057">initializeUnderlay()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="comment">// updates the statistics display string</span>
    <span class="keywordtype">char</span> buf[80];
    sprintf(buf, <span class="stringliteral">&quot;%i overlay terminals&quot;</span>, <a class="code" href="classUnderlayConfigurator.html#aed1fe1d613fb061b714fc281cbb0b820" title="current number of overlay terminals">overlayTerminalCount</a>);
    getDisplayString().setTagArg(<span class="stringliteral">&quot;t&quot;</span>, 0, buf);
}
</pre></div></p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="SingleHostUnderlayConfigurator_8h_source.html">SingleHostUnderlayConfigurator.h</a></li>
<li><a class="el" href="SingleHostUnderlayConfigurator_8cc_source.html">SingleHostUnderlayConfigurator.cc</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Nov 3 2010 14:40:55 for OverSim by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
