<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OverSim: oversim::ChordSuccessorList Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="namespaceoversim.html">oversim</a>      </li>
      <li><a class="el" href="classoversim_1_1ChordSuccessorList.html">oversim::ChordSuccessorList</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<h1>oversim::ChordSuccessorList Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="oversim::ChordSuccessorList" -->
<p>Chord's successor list module.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="ChordSuccessorList_8h_source.html">ChordSuccessorList.h</a>&gt;</code></p>

<p><a href="classoversim_1_1ChordSuccessorList-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoversim_1_1ChordSuccessorList.html#a6ed9acdbe8927b72adfb8f6c6a0394b9">numInitStages</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoversim_1_1ChordSuccessorList.html#adbeaae5869a62c7190cfba1a46cc0051">initialize</a> (int stage)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoversim_1_1ChordSuccessorList.html#a9e5761ce3ddee0784edf4139823f854c">handleMessage</a> (cMessage *msg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoversim_1_1ChordSuccessorList.html#a882c36c7a32386519521b9b523a1c5a5">initializeList</a> (uint32_t size, <a class="el" href="classNodeHandle.html">NodeHandle</a> owner, <a class="el" href="classoversim_1_1Chord.html">Chord</a> *<a class="el" href="classoversim_1_1ChordSuccessorList.html#affa95321294c0f98f47c652a41855e2b">overlay</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initializes the successor list.  <a href="#a882c36c7a32386519521b9b523a1c5a5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoversim_1_1ChordSuccessorList.html#aa4c33c634da0ce72bc376528602f2407">getSize</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns number of neighbors in the successor list.  <a href="#aa4c33c634da0ce72bc376528602f2407"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoversim_1_1ChordSuccessorList.html#ac8d1a65c1a14401cc716754c466b276c">isEmpty</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Checks if the successor list is empty.  <a href="#ac8d1a65c1a14401cc716754c466b276c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoversim_1_1ChordSuccessorList.html#a941ea3a7568fba729c4990b92c8b9d97">getSuccessor</a> (uint32_t pos=0)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns a particular successor.  <a href="#a941ea3a7568fba729c4990b92c8b9d97"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoversim_1_1ChordSuccessorList.html#a986de50f02b1c775e8c1917d612a2e0b">addSuccessor</a> (<a class="el" href="classNodeHandle.html">NodeHandle</a> successor, bool resize=true)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Adds new successor nodes to the successor list.  <a href="#a986de50f02b1c775e8c1917d612a2e0b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoversim_1_1ChordSuccessorList.html#a263954ceb4ac03cb61aba0beef22ffa5">updateList</a> (<a class="el" href="classNotifyResponse.html">NotifyResponse</a> *notify)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoversim_1_1ChordSuccessorList.html#a8d1fd0adfaa40c236653c282e9c8ccee">handleFailedNode</a> (const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;failed)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoversim_1_1ChordSuccessorList.html#a7d70ece0da9bcd7f71669a195dba61a9">display</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoversim_1_1ChordSuccessorList.html#a53e8cd47bad8dbd47e62975b8708f2c3">removeOldSuccessors</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoversim_1_1ChordSuccessorList.html#a4f22289975d5c11045e986d8705b56a3">updateDisplayString</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Displays the current number of successors in the list.  <a href="#a4f22289975d5c11045e986d8705b56a3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoversim_1_1ChordSuccessorList.html#ac184f15db48fc3a3e5f68a4307a637d2">updateTooltip</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Displays the first 4 successor nodes as tooltip.  <a href="#ac184f15db48fc3a3e5f68a4307a637d2"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classNodeHandle.html">NodeHandle</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoversim_1_1ChordSuccessorList.html#a4eab7b228d548d85371337be242a0f77">thisNode</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">own node handle  <a href="#a4eab7b228d548d85371337be242a0f77"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="classOverlayKey.html">OverlayKey</a>, <br class="typebreak"/>
<a class="el" href="structoversim_1_1SuccessorListEntry.html">SuccessorListEntry</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a">successorMap</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">internal representation of the successor list  <a href="#a1e6b51299d8c993ab1c08005dd58ed8a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoversim_1_1ChordSuccessorList.html#a6da16382f45c1956e2e7aa9ad48db90d">successorListSize</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">maximum size of the successor list  <a href="#a6da16382f45c1956e2e7aa9ad48db90d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classoversim_1_1Chord.html">Chord</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoversim_1_1ChordSuccessorList.html#affa95321294c0f98f47c652a41855e2b">overlay</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">pointer to the main chord module  <a href="#affa95321294c0f98f47c652a41855e2b"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Chord's successor list module. </p>
<p>This modul contains the successor list of the <a class="el" href="classoversim_1_1Chord.html" title="Chord overlay module.">Chord</a> implementation.</p>
<dl class="author"><dt><b>Author:</b></dt><dd>Markus Mauch, Ingmar Baumgart </dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classoversim_1_1Chord.html" title="Chord overlay module.">Chord</a> </dd></dl>

<p>Definition at line <a class="el" href="ChordSuccessorList_8h_source.html#l00058">58</a> of file <a class="el" href="ChordSuccessorList_8h_source.html">ChordSuccessorList.h</a>.</p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a986de50f02b1c775e8c1917d612a2e0b"></a><!-- doxytag: member="oversim::ChordSuccessorList::addSuccessor" ref="a986de50f02b1c775e8c1917d612a2e0b" args="(NodeHandle successor, bool resize=true)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void oversim::ChordSuccessorList::addSuccessor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classNodeHandle.html">NodeHandle</a>&nbsp;</td>
          <td class="paramname"> <em>successor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>resize</em> = <code>true</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds new successor nodes to the successor list. </p>
<p>Adds new successor nodes to the successor list and sorts the list using the corresponding chord keys. If the list size exceeds the maximum size nodes at the end of the list will be removed.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>successor</em>&nbsp;</td><td>the node handle of the successor to be added </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>resize</em>&nbsp;</td><td>if true, shrink the list to successorListSize </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ChordSuccessorList_8cc_source.html#l00122">122</a> of file <a class="el" href="ChordSuccessorList_8cc_source.html">ChordSuccessorList.cc</a>.</p>

<p>Referenced by <a class="el" href="ChordSuccessorList_8cc_source.html#l00153">handleFailedNode()</a>, <a class="el" href="Chord_8cc_source.html#l00877">oversim::Chord::handleNewSuccessorHint()</a>, <a class="el" href="Chord_8cc_source.html#l00987">oversim::Chord::handleRpcJoinResponse()</a>, <a class="el" href="Chord_8cc_source.html#l01191">oversim::Chord::handleRpcNotifyResponse()</a>, <a class="el" href="Chord_8cc_source.html#l01071">oversim::Chord::handleRpcStabilizeResponse()</a>, <a class="el" href="ChordSuccessorList_8cc_source.html#l00057">initializeList()</a>, <a class="el" href="ChordSuccessorList_8cc_source.html#l00170">removeOldSuccessors()</a>, <a class="el" href="Chord_8cc_source.html#l00916">oversim::Chord::rpcJoin()</a>, <a class="el" href="Chord_8cc_source.html#l01105">oversim::Chord::rpcNotify()</a>, and <a class="el" href="ChordSuccessorList_8cc_source.html#l00101">updateList()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="classOverlayKey.html" title="A common overlay key class.">OverlayKey</a> sum = successor.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>() - (<a class="code" href="classoversim_1_1ChordSuccessorList.html#a4eab7b228d548d85371337be242a0f77" title="own node handle">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>() + <a class="code" href="classOverlayKey.html#a51a63dbc089143b7742d7da846a16abd" title="OverlayKey with key initialized as 1.">OverlayKey::ONE</a>);

    std::map&lt;OverlayKey, SuccessorListEntry&gt;::iterator it =
        <a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.find(sum);

    <span class="comment">// Make a CommonAPI update() upcall to inform application</span>
    <span class="comment">// about our new neighbor in the successor list</span>

    <span class="keywordflow">if</span> (it == <a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.end()) {
        <span class="comment">// TODO: first add node and than call update()</span>
        <a class="code" href="classoversim_1_1ChordSuccessorList.html#affa95321294c0f98f47c652a41855e2b" title="pointer to the main chord module">overlay</a>-&gt;callUpdate(successor, <span class="keyword">true</span>);
    } <span class="keywordflow">else</span> {
        <a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.erase(it);
    }

    SuccessorListEntry entry;
    entry.nodeHandle = successor;
    entry.newEntry = <span class="keyword">true</span>;

    <a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.insert(make_pair(sum, entry));

    <span class="keywordflow">if</span> ((resize == <span class="keyword">true</span>) &amp;&amp; (<a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.size() &gt; (uint32_t)<a class="code" href="classoversim_1_1ChordSuccessorList.html#a6da16382f45c1956e2e7aa9ad48db90d" title="maximum size of the successor list">successorListSize</a>)) {
        it = <a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.end();
        it--;
        <a class="code" href="classoversim_1_1ChordSuccessorList.html#affa95321294c0f98f47c652a41855e2b" title="pointer to the main chord module">overlay</a>-&gt;callUpdate(it-&gt;second.nodeHandle, <span class="keyword">false</span>);
        <a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.erase(it);
    }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7d70ece0da9bcd7f71669a195dba61a9"></a><!-- doxytag: member="oversim::ChordSuccessorList::display" ref="a7d70ece0da9bcd7f71669a195dba61a9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void oversim::ChordSuccessorList::display </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ChordSuccessorList_8cc_source.html#l00233">233</a> of file <a class="el" href="ChordSuccessorList_8cc_source.html">ChordSuccessorList.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    cout &lt;&lt; <span class="stringliteral">&quot;Content of ChordSuccessorList:&quot;</span> &lt;&lt; endl;
    <span class="keywordflow">for</span> (std::map&lt;OverlayKey,SuccessorListEntry&gt;::iterator it =
        <a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.begin(); it != <a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.end(); it++)
        cout &lt;&lt; it-&gt;first &lt;&lt; <span class="stringliteral">&quot; with Node: &quot;</span> &lt;&lt; it-&gt;second.nodeHandle &lt;&lt; endl;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="aa4c33c634da0ce72bc376528602f2407"></a><!-- doxytag: member="oversim::ChordSuccessorList::getSize" ref="aa4c33c634da0ce72bc376528602f2407" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t oversim::ChordSuccessorList::getSize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns number of neighbors in the successor list. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>number of neighbors </dd></dl>

<p>Definition at line <a class="el" href="ChordSuccessorList_8cc_source.html#l00067">67</a> of file <a class="el" href="ChordSuccessorList_8cc_source.html">ChordSuccessorList.cc</a>.</p>

<p>Referenced by <a class="el" href="Chord_8cc_source.html#l00601">oversim::Chord::closestPreceedingNode()</a>, <a class="el" href="Koorde_8cc_source.html#l00405">oversim::Koorde::findNode()</a>, <a class="el" href="Chord_8cc_source.html#l00547">oversim::Chord::findNode()</a>, <a class="el" href="Koorde_8cc_source.html#l00164">oversim::Koorde::handleDeBruijnTimerExpired()</a>, <a class="el" href="ChordSuccessorList_8cc_source.html#l00153">handleFailedNode()</a>, <a class="el" href="Koorde_8cc_source.html#l00328">oversim::Koorde::handleRpcDeBruijnRequest()</a>, <a class="el" href="Chord_8cc_source.html#l00421">oversim::Chord::isSiblingFor()</a>, <a class="el" href="ChordSuccessorList_8cc_source.html#l00170">removeOldSuccessors()</a>, <a class="el" href="Chord_8cc_source.html#l01227">oversim::Chord::rpcFixfingers()</a>, <a class="el" href="Chord_8cc_source.html#l00916">oversim::Chord::rpcJoin()</a>, <a class="el" href="Chord_8cc_source.html#l01105">oversim::Chord::rpcNotify()</a>, <a class="el" href="Koorde_8cc_source.html#l00584">oversim::Koorde::updateTooltip()</a>, and <a class="el" href="Koorde_8cc_source.html#l00572">oversim::Koorde::walkSuccessorList()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> <a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.size();
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a941ea3a7568fba729c4990b92c8b9d97"></a><!-- doxytag: member="oversim::ChordSuccessorList::getSuccessor" ref="a941ea3a7568fba729c4990b92c8b9d97" args="(uint32_t pos=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classNodeHandle.html">NodeHandle</a> &amp; oversim::ChordSuccessorList::getSuccessor </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>pos</em> = <code>0</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns a particular successor. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pos</em>&nbsp;</td><td>position in the successor list </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>successor at position pos </dd></dl>

<p>Definition at line <a class="el" href="ChordSuccessorList_8cc_source.html#l00080">80</a> of file <a class="el" href="ChordSuccessorList_8cc_source.html">ChordSuccessorList.cc</a>.</p>

<p>Referenced by <a class="el" href="Chord_8cc_source.html#l00601">oversim::Chord::closestPreceedingNode()</a>, <a class="el" href="Koorde_8cc_source.html#l00473">oversim::Koorde::findDeBruijnHop()</a>, <a class="el" href="Koorde_8cc_source.html#l00405">oversim::Koorde::findNode()</a>, <a class="el" href="Chord_8cc_source.html#l00547">oversim::Chord::findNode()</a>, <a class="el" href="ChordFingerTable_8cc_source.html#l00173">oversim::ChordFingerTable::getFinger()</a>, <a class="el" href="Koorde_8cc_source.html#l00164">oversim::Koorde::handleDeBruijnTimerExpired()</a>, <a class="el" href="Chord_8cc_source.html#l00501">oversim::Chord::handleFailedNode()</a>, <a class="el" href="Chord_8cc_source.html#l00844">oversim::Chord::handleFixFingersTimerExpired()</a>, <a class="el" href="Chord_8cc_source.html#l00877">oversim::Chord::handleNewSuccessorHint()</a>, <a class="el" href="Koorde_8cc_source.html#l00328">oversim::Koorde::handleRpcDeBruijnRequest()</a>, <a class="el" href="Chord_8cc_source.html#l01191">oversim::Chord::handleRpcNotifyResponse()</a>, <a class="el" href="Chord_8cc_source.html#l01071">oversim::Chord::handleRpcStabilizeResponse()</a>, <a class="el" href="Chord_8cc_source.html#l00792">oversim::Chord::handleStabilizeTimerExpired()</a>, <a class="el" href="ChordSuccessorList_8cc_source.html#l00072">isEmpty()</a>, <a class="el" href="Chord_8cc_source.html#l00421">oversim::Chord::isSiblingFor()</a>, <a class="el" href="Chord_8cc_source.html#l01227">oversim::Chord::rpcFixfingers()</a>, <a class="el" href="Koorde_8cc_source.html#l00317">oversim::Koorde::rpcJoin()</a>, <a class="el" href="Chord_8cc_source.html#l00916">oversim::Chord::rpcJoin()</a>, <a class="el" href="Chord_8cc_source.html#l01105">oversim::Chord::rpcNotify()</a>, <a class="el" href="Koorde_8cc_source.html#l00584">oversim::Koorde::updateTooltip()</a>, <a class="el" href="ChordSuccessorList_8cc_source.html#l00216">updateTooltip()</a>, <a class="el" href="Chord_8cc_source.html#l01378">oversim::Chord::updateTooltip()</a>, and <a class="el" href="Koorde_8cc_source.html#l00572">oversim::Koorde::walkSuccessorList()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="comment">// check boundaries</span>
    <span class="keywordflow">if</span> (pos == 0 &amp;&amp; <a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.size() == 0)
        <span class="keywordflow">return</span> <a class="code" href="classNodeHandle.html#a79bf2c5e29c969cbd0b2581cb188d8a6" title="the unspecified NodeHandle">NodeHandle::UNSPECIFIED_NODE</a>;

    <span class="keywordflow">if</span> (pos &gt;= <a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.size()) {
        <a class="code" href="yang_8cc.html#adb989392f8aada21b0f7ec2f7a41dc00">error</a>(<span class="stringliteral">&quot;Index out of bound (ChordSuccessorList, getSuccessor())&quot;</span>);
    }

    std::map&lt;OverlayKey, SuccessorListEntry&gt;::iterator it =
        <a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.begin();

    <span class="keywordflow">for</span> (uint32_t i= 0; i &lt; pos; i++) {
        it++;
        <span class="keywordflow">if</span> (i == (pos-1))
            <span class="keywordflow">return</span> it-&gt;second.nodeHandle;
    }
    <span class="keywordflow">return</span> it-&gt;second.nodeHandle;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8d1fd0adfaa40c236653c282e9c8ccee"></a><!-- doxytag: member="oversim::ChordSuccessorList::handleFailedNode" ref="a8d1fd0adfaa40c236653c282e9c8ccee" args="(const TransportAddress &amp;failed)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool oversim::ChordSuccessorList::handleFailedNode </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classTransportAddress.html">TransportAddress</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>failed</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ChordSuccessorList_8cc_source.html#l00153">153</a> of file <a class="el" href="ChordSuccessorList_8cc_source.html">ChordSuccessorList.cc</a>.</p>

<p>Referenced by <a class="el" href="Chord_8cc_source.html#l00501">oversim::Chord::handleFailedNode()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    assert(failed != <a class="code" href="classoversim_1_1ChordSuccessorList.html#a4eab7b228d548d85371337be242a0f77" title="own node handle">thisNode</a>);
    <span class="keywordflow">for</span> (std::map&lt;OverlayKey, SuccessorListEntry&gt;::iterator iter =
         <a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.begin(); iter != <a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.end(); ++iter) {
        <span class="keywordflow">if</span> (failed == iter-&gt;second.nodeHandle) {
            <a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.erase(iter);
            <a class="code" href="classoversim_1_1ChordSuccessorList.html#affa95321294c0f98f47c652a41855e2b" title="pointer to the main chord module">overlay</a>-&gt;callUpdate(failed, <span class="keyword">false</span>);
            <span class="comment">// ensure that thisNode is always in the successor list</span>
            <span class="keywordflow">if</span> (<a class="code" href="classoversim_1_1ChordSuccessorList.html#aa4c33c634da0ce72bc376528602f2407" title="Returns number of neighbors in the successor list.">getSize</a>() == 0)
                <a class="code" href="classoversim_1_1ChordSuccessorList.html#a986de50f02b1c775e8c1917d612a2e0b" title="Adds new successor nodes to the successor list.">addSuccessor</a>(<a class="code" href="classoversim_1_1ChordSuccessorList.html#a4eab7b228d548d85371337be242a0f77" title="own node handle">thisNode</a>);
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
    }
    <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9e5761ce3ddee0784edf4139823f854c"></a><!-- doxytag: member="oversim::ChordSuccessorList::handleMessage" ref="a9e5761ce3ddee0784edf4139823f854c" args="(cMessage *msg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void oversim::ChordSuccessorList::handleMessage </td>
          <td>(</td>
          <td class="paramtype">cMessage *&nbsp;</td>
          <td class="paramname"> <em>msg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ChordSuccessorList_8cc_source.html#l00052">52</a> of file <a class="el" href="ChordSuccessorList_8cc_source.html">ChordSuccessorList.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="yang_8cc.html#adb989392f8aada21b0f7ec2f7a41dc00">error</a>(<span class="stringliteral">&quot;this module doesn&#39;t handle messages, it runs only in initialize()&quot;</span>);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="adbeaae5869a62c7190cfba1a46cc0051"></a><!-- doxytag: member="oversim::ChordSuccessorList::initialize" ref="adbeaae5869a62c7190cfba1a46cc0051" args="(int stage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void oversim::ChordSuccessorList::initialize </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stage</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ChordSuccessorList_8cc_source.html#l00042">42</a> of file <a class="el" href="ChordSuccessorList_8cc_source.html">ChordSuccessorList.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="comment">// because of IPAddressResolver, we need to wait until interfaces</span>
    <span class="comment">// are registered, address auto-assignment takes place etc.</span>
    <span class="keywordflow">if</span> (stage != <a class="code" href="InitStages_8h.html#a42fde1aa1e14a1c45d29061d6e87e532a58e83c497c7c8495e9c592ff3148b6b9" title="first stage for overlay modules (Tier 0 / KBR)">MIN_STAGE_OVERLAY</a>)
        <span class="keywordflow">return</span>;

    WATCH_MAP(<a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a882c36c7a32386519521b9b523a1c5a5"></a><!-- doxytag: member="oversim::ChordSuccessorList::initializeList" ref="a882c36c7a32386519521b9b523a1c5a5" args="(uint32_t size, NodeHandle owner, Chord *overlay)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void oversim::ChordSuccessorList::initializeList </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classNodeHandle.html">NodeHandle</a>&nbsp;</td>
          <td class="paramname"> <em>owner</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classoversim_1_1Chord.html">Chord</a> *&nbsp;</td>
          <td class="paramname"> <em>overlay</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes the successor list. </p>
<p>This should be called on startup</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>maximum number of neighbors in the successor list </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>owner</em>&nbsp;</td><td>the node owner is added to the successor list </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>overlay</em>&nbsp;</td><td>pointer to the main chord module </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ChordSuccessorList_8cc_source.html#l00057">57</a> of file <a class="el" href="ChordSuccessorList_8cc_source.html">ChordSuccessorList.cc</a>.</p>

<p>Referenced by <a class="el" href="Koorde_8cc_source.html#l00770">oversim::Koorde::initializeFriendModules()</a>, and <a class="el" href="Chord_8cc_source.html#l01368">oversim::Chord::initializeFriendModules()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.clear();
    <a class="code" href="classoversim_1_1ChordSuccessorList.html#a6da16382f45c1956e2e7aa9ad48db90d" title="maximum size of the successor list">successorListSize</a> = size;
    <a class="code" href="classoversim_1_1ChordSuccessorList.html#a4eab7b228d548d85371337be242a0f77" title="own node handle">thisNode</a> = owner;
    this-&gt;<a class="code" href="classoversim_1_1ChordSuccessorList.html#affa95321294c0f98f47c652a41855e2b" title="pointer to the main chord module">overlay</a> = <a class="code" href="classoversim_1_1ChordSuccessorList.html#affa95321294c0f98f47c652a41855e2b" title="pointer to the main chord module">overlay</a>;
    <a class="code" href="classoversim_1_1ChordSuccessorList.html#a986de50f02b1c775e8c1917d612a2e0b" title="Adds new successor nodes to the successor list.">addSuccessor</a>(<a class="code" href="classoversim_1_1ChordSuccessorList.html#a4eab7b228d548d85371337be242a0f77" title="own node handle">thisNode</a>);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac8d1a65c1a14401cc716754c466b276c"></a><!-- doxytag: member="oversim::ChordSuccessorList::isEmpty" ref="ac8d1a65c1a14401cc716754c466b276c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool oversim::ChordSuccessorList::isEmpty </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Checks if the successor list is empty. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>returns false if the successor list contains other nodes than this node, true otherwise. </dd></dl>

<p>Definition at line <a class="el" href="ChordSuccessorList_8cc_source.html#l00072">72</a> of file <a class="el" href="ChordSuccessorList_8cc_source.html">ChordSuccessorList.cc</a>.</p>

<p>Referenced by <a class="el" href="Chord_8cc_source.html#l00547">oversim::Chord::findNode()</a>, <a class="el" href="Koorde_8cc_source.html#l00164">oversim::Koorde::handleDeBruijnTimerExpired()</a>, <a class="el" href="Chord_8cc_source.html#l00501">oversim::Chord::handleFailedNode()</a>, <a class="el" href="Chord_8cc_source.html#l00844">oversim::Chord::handleFixFingersTimerExpired()</a>, <a class="el" href="Koorde_8cc_source.html#l00328">oversim::Koorde::handleRpcDeBruijnRequest()</a>, <a class="el" href="Chord_8cc_source.html#l01071">oversim::Chord::handleRpcStabilizeResponse()</a>, <a class="el" href="Chord_8cc_source.html#l00792">oversim::Chord::handleStabilizeTimerExpired()</a>, <a class="el" href="Chord_8cc_source.html#l00421">oversim::Chord::isSiblingFor()</a>, <a class="el" href="Chord_8cc_source.html#l00916">oversim::Chord::rpcJoin()</a>, <a class="el" href="Chord_8cc_source.html#l01105">oversim::Chord::rpcNotify()</a>, and <a class="el" href="ChordSuccessorList_8cc_source.html#l00101">updateList()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (<a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.size() == 1 &amp;&amp; <a class="code" href="classoversim_1_1ChordSuccessorList.html#a941ea3a7568fba729c4990b92c8b9d97" title="Returns a particular successor.">getSuccessor</a>() == <a class="code" href="classoversim_1_1ChordSuccessorList.html#a4eab7b228d548d85371337be242a0f77" title="own node handle">thisNode</a>)
        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    <span class="keywordflow">else</span>
        <span class="keywordflow">return</span> <span class="keyword">false</span>;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a6ed9acdbe8927b72adfb8f6c6a0394b9"></a><!-- doxytag: member="oversim::ChordSuccessorList::numInitStages" ref="a6ed9acdbe8927b72adfb8f6c6a0394b9" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int oversim::ChordSuccessorList::numInitStages </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ChordSuccessorList_8h_source.html#l00061">61</a> of file <a class="el" href="ChordSuccessorList_8h_source.html">ChordSuccessorList.h</a>.</p>

<p><div class="fragment"><pre class="fragment">    {
        <span class="keywordflow">return</span> <a class="code" href="InitStages_8h.html#a42fde1aa1e14a1c45d29061d6e87e532af261a91f9b71ec40c7c7c7e18b3455ac" title="last stage for overlay modules (Tier 0 / KBR)">MAX_STAGE_OVERLAY</a> + 1;
    }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a53e8cd47bad8dbd47e62975b8708f2c3"></a><!-- doxytag: member="oversim::ChordSuccessorList::removeOldSuccessors" ref="a53e8cd47bad8dbd47e62975b8708f2c3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void oversim::ChordSuccessorList::removeOldSuccessors </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ChordSuccessorList_8cc_source.html#l00170">170</a> of file <a class="el" href="ChordSuccessorList_8cc_source.html">ChordSuccessorList.cc</a>.</p>

<p>Referenced by <a class="el" href="ChordSuccessorList_8cc_source.html#l00101">updateList()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    std::map&lt;OverlayKey,SuccessorListEntry&gt;::iterator it;

    <span class="keywordflow">for</span> (it = <a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.begin(); it != <a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.end();) {

        <span class="keywordflow">if</span> (it-&gt;second.newEntry == <span class="keyword">false</span>) {
            <a class="code" href="classoversim_1_1ChordSuccessorList.html#affa95321294c0f98f47c652a41855e2b" title="pointer to the main chord module">overlay</a>-&gt;callUpdate(it-&gt;second.nodeHandle, <span class="keyword">false</span>);
            <a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.erase(it++);
        } <span class="keywordflow">else</span> {
            it-&gt;second.newEntry = <span class="keyword">false</span>;
            it++;
        }
    }

    it = <a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.end();
    it--;

    <span class="keywordflow">while</span> (<a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.size() &gt; <a class="code" href="classoversim_1_1ChordSuccessorList.html#a6da16382f45c1956e2e7aa9ad48db90d" title="maximum size of the successor list">successorListSize</a>) {
        <a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.erase(it--);
    }

    <span class="keywordflow">if</span> (<a class="code" href="classoversim_1_1ChordSuccessorList.html#aa4c33c634da0ce72bc376528602f2407" title="Returns number of neighbors in the successor list.">getSize</a>() == 0)
        <a class="code" href="classoversim_1_1ChordSuccessorList.html#a986de50f02b1c775e8c1917d612a2e0b" title="Adds new successor nodes to the successor list.">addSuccessor</a>(<a class="code" href="classoversim_1_1ChordSuccessorList.html#a4eab7b228d548d85371337be242a0f77" title="own node handle">thisNode</a>);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4f22289975d5c11045e986d8705b56a3"></a><!-- doxytag: member="oversim::ChordSuccessorList::updateDisplayString" ref="a4f22289975d5c11045e986d8705b56a3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void oversim::ChordSuccessorList::updateDisplayString </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Displays the current number of successors in the list. </p>

<p>Definition at line <a class="el" href="ChordSuccessorList_8cc_source.html#l00197">197</a> of file <a class="el" href="ChordSuccessorList_8cc_source.html">ChordSuccessorList.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="comment">// FIXME: doesn&#39;t work without tcl/tk</span>
    <span class="comment">//          if (ev.isGUI()) {</span>
    <span class="keywordflow">if</span> (1) {
        <span class="keywordtype">char</span> buf[80];

        <span class="keywordflow">if</span> (<a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.size() == 1) {
            sprintf(buf, <span class="stringliteral">&quot;1 successor&quot;</span>);
        } <span class="keywordflow">else</span> {
            sprintf(buf, <span class="stringliteral">&quot;%zi successors&quot;</span>, <a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.size());
        }

        getDisplayString().setTagArg(<span class="stringliteral">&quot;t&quot;</span>, 0, buf);
        getDisplayString().setTagArg(<span class="stringliteral">&quot;t&quot;</span>, 2, <span class="stringliteral">&quot;blue&quot;</span>);
    }

}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a263954ceb4ac03cb61aba0beef22ffa5"></a><!-- doxytag: member="oversim::ChordSuccessorList::updateList" ref="a263954ceb4ac03cb61aba0beef22ffa5" args="(NotifyResponse *notify)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void oversim::ChordSuccessorList::updateList </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classNotifyResponse.html">NotifyResponse</a> *&nbsp;</td>
          <td class="paramname"> <em>notify</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ChordSuccessorList_8cc_source.html#l00101">101</a> of file <a class="el" href="ChordSuccessorList_8cc_source.html">ChordSuccessorList.cc</a>.</p>

<p>Referenced by <a class="el" href="Chord_8cc_source.html#l01191">oversim::Chord::handleRpcNotifyResponse()</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <a class="code" href="classoversim_1_1ChordSuccessorList.html#a986de50f02b1c775e8c1917d612a2e0b" title="Adds new successor nodes to the successor list.">addSuccessor</a>(notifyResponse-&gt;getSrcNode(), <span class="keyword">false</span>);

    <span class="keywordflow">for</span> (uint32_t k = 0; ((k &lt; static_cast&lt;uint32_t&gt;(notifyResponse-&gt;getSucNum()))
                     &amp;&amp; (k &lt; (<a class="code" href="classoversim_1_1ChordSuccessorList.html#a6da16382f45c1956e2e7aa9ad48db90d" title="maximum size of the successor list">successorListSize</a> - 1))); k++) {
        <a class="code" href="classNodeHandle.html" title="This class implements a node handle.">NodeHandle</a> successor = notifyResponse-&gt;getSucNode(k);

        <span class="comment">// don&#39;t add nodes, if this would change our successor</span>
        <span class="keywordflow">if</span> (successor.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>().<a class="code" href="classOverlayKey.html#af35313562131a78724e31297889be822" title="Returns true, if this key is element of the interval [keyA, keyB] on the ring.">isBetweenLR</a>(<a class="code" href="classoversim_1_1ChordSuccessorList.html#a4eab7b228d548d85371337be242a0f77" title="own node handle">thisNode</a>.<a class="code" href="classNodeHandle.html#aef531103cdf07c8353267f4d30a80112" title="returns key of this NodeHandle">getKey</a>(),
                                      notifyResponse-&gt;getSrcNode().getKey()))
            <span class="keywordflow">continue</span>;

        <a class="code" href="classoversim_1_1ChordSuccessorList.html#a986de50f02b1c775e8c1917d612a2e0b" title="Adds new successor nodes to the successor list.">addSuccessor</a>(successor, <span class="keyword">false</span>);
    }

    <a class="code" href="classoversim_1_1ChordSuccessorList.html#a53e8cd47bad8dbd47e62975b8708f2c3">removeOldSuccessors</a>();
    assert(!<a class="code" href="classoversim_1_1ChordSuccessorList.html#ac8d1a65c1a14401cc716754c466b276c" title="Checks if the successor list is empty.">isEmpty</a>());
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="ac184f15db48fc3a3e5f68a4307a637d2"></a><!-- doxytag: member="oversim::ChordSuccessorList::updateTooltip" ref="ac184f15db48fc3a3e5f68a4307a637d2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void oversim::ChordSuccessorList::updateTooltip </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Displays the first 4 successor nodes as tooltip. </p>

<p>Definition at line <a class="el" href="ChordSuccessorList_8cc_source.html#l00216">216</a> of file <a class="el" href="ChordSuccessorList_8cc_source.html">ChordSuccessorList.cc</a>.</p>

<p><div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (ev.isGUI()) {
        std::stringstream str;
        <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; <a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.size(); i++)      {
            str &lt;&lt; <a class="code" href="classoversim_1_1ChordSuccessorList.html#a941ea3a7568fba729c4990b92c8b9d97" title="Returns a particular successor.">getSuccessor</a>(i);
            <span class="keywordflow">if</span> ( i != <a class="code" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a" title="internal representation of the successor list">successorMap</a>.size() - 1 )
                str &lt;&lt; endl;
        }


        <span class="keywordtype">char</span> buf[1024];
        sprintf(buf, <span class="stringliteral">&quot;%s&quot;</span>, str.str().c_str());
        getDisplayString().setTagArg(<span class="stringliteral">&quot;tt&quot;</span>, 0, buf);
    }
}
</pre></div></p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="affa95321294c0f98f47c652a41855e2b"></a><!-- doxytag: member="oversim::ChordSuccessorList::overlay" ref="affa95321294c0f98f47c652a41855e2b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classoversim_1_1Chord.html">Chord</a>* <a class="el" href="classoversim_1_1ChordSuccessorList.html#affa95321294c0f98f47c652a41855e2b">oversim::ChordSuccessorList::overlay</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>pointer to the main chord module </p>

<p>Definition at line <a class="el" href="ChordSuccessorList_8h_source.html#l00126">126</a> of file <a class="el" href="ChordSuccessorList_8h_source.html">ChordSuccessorList.h</a>.</p>

<p>Referenced by <a class="el" href="ChordSuccessorList_8cc_source.html#l00122">addSuccessor()</a>, <a class="el" href="ChordSuccessorList_8cc_source.html#l00153">handleFailedNode()</a>, and <a class="el" href="ChordSuccessorList_8cc_source.html#l00170">removeOldSuccessors()</a>.</p>

</div>
</div>
<a class="anchor" id="a6da16382f45c1956e2e7aa9ad48db90d"></a><!-- doxytag: member="oversim::ChordSuccessorList::successorListSize" ref="a6da16382f45c1956e2e7aa9ad48db90d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="classoversim_1_1ChordSuccessorList.html#a6da16382f45c1956e2e7aa9ad48db90d">oversim::ChordSuccessorList::successorListSize</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>maximum size of the successor list </p>

<p>Definition at line <a class="el" href="ChordSuccessorList_8h_source.html#l00124">124</a> of file <a class="el" href="ChordSuccessorList_8h_source.html">ChordSuccessorList.h</a>.</p>

<p>Referenced by <a class="el" href="ChordSuccessorList_8cc_source.html#l00122">addSuccessor()</a>, <a class="el" href="ChordSuccessorList_8cc_source.html#l00057">initializeList()</a>, <a class="el" href="ChordSuccessorList_8cc_source.html#l00170">removeOldSuccessors()</a>, and <a class="el" href="ChordSuccessorList_8cc_source.html#l00101">updateList()</a>.</p>

</div>
</div>
<a class="anchor" id="a1e6b51299d8c993ab1c08005dd58ed8a"></a><!-- doxytag: member="oversim::ChordSuccessorList::successorMap" ref="a1e6b51299d8c993ab1c08005dd58ed8a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="classOverlayKey.html">OverlayKey</a>, <a class="el" href="structoversim_1_1SuccessorListEntry.html">SuccessorListEntry</a>&gt; <a class="el" href="classoversim_1_1ChordSuccessorList.html#a1e6b51299d8c993ab1c08005dd58ed8a">oversim::ChordSuccessorList::successorMap</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>internal representation of the successor list </p>

<p>Definition at line <a class="el" href="ChordSuccessorList_8h_source.html#l00122">122</a> of file <a class="el" href="ChordSuccessorList_8h_source.html">ChordSuccessorList.h</a>.</p>

<p>Referenced by <a class="el" href="ChordSuccessorList_8cc_source.html#l00122">addSuccessor()</a>, <a class="el" href="ChordSuccessorList_8cc_source.html#l00233">display()</a>, <a class="el" href="ChordSuccessorList_8cc_source.html#l00067">getSize()</a>, <a class="el" href="ChordSuccessorList_8cc_source.html#l00080">getSuccessor()</a>, <a class="el" href="ChordSuccessorList_8cc_source.html#l00153">handleFailedNode()</a>, <a class="el" href="ChordSuccessorList_8cc_source.html#l00042">initialize()</a>, <a class="el" href="ChordSuccessorList_8cc_source.html#l00057">initializeList()</a>, <a class="el" href="ChordSuccessorList_8cc_source.html#l00072">isEmpty()</a>, <a class="el" href="ChordSuccessorList_8cc_source.html#l00170">removeOldSuccessors()</a>, <a class="el" href="ChordSuccessorList_8cc_source.html#l00197">updateDisplayString()</a>, and <a class="el" href="ChordSuccessorList_8cc_source.html#l00216">updateTooltip()</a>.</p>

</div>
</div>
<a class="anchor" id="a4eab7b228d548d85371337be242a0f77"></a><!-- doxytag: member="oversim::ChordSuccessorList::thisNode" ref="a4eab7b228d548d85371337be242a0f77" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classNodeHandle.html">NodeHandle</a> <a class="el" href="classoversim_1_1ChordSuccessorList.html#a4eab7b228d548d85371337be242a0f77">oversim::ChordSuccessorList::thisNode</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>own node handle </p>

<p>Definition at line <a class="el" href="ChordSuccessorList_8h_source.html#l00121">121</a> of file <a class="el" href="ChordSuccessorList_8h_source.html">ChordSuccessorList.h</a>.</p>

<p>Referenced by <a class="el" href="ChordSuccessorList_8cc_source.html#l00122">addSuccessor()</a>, <a class="el" href="ChordSuccessorList_8cc_source.html#l00153">handleFailedNode()</a>, <a class="el" href="ChordSuccessorList_8cc_source.html#l00057">initializeList()</a>, <a class="el" href="ChordSuccessorList_8cc_source.html#l00072">isEmpty()</a>, <a class="el" href="ChordSuccessorList_8cc_source.html#l00170">removeOldSuccessors()</a>, and <a class="el" href="ChordSuccessorList_8cc_source.html#l00101">updateList()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="ChordSuccessorList_8h_source.html">ChordSuccessorList.h</a></li>
<li><a class="el" href="ChordSuccessorList_8cc_source.html">ChordSuccessorList.cc</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Nov 3 2010 14:40:55 for OverSim by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
